{"ast":null,"code":"'use client';\n\nimport { getWindow } from '@zag-js/dom-query';\nimport { useRef, useId, useMemo } from 'react';\nimport { useSafeLayoutEffect } from '../../utils/use-safe-layout-effect.js';\nimport { parts } from './fieldset.anatomy.js';\nconst useFieldset = props => {\n  const {\n    disabled = false,\n    invalid = false\n  } = props;\n  const hasErrorText = useRef(false);\n  const hasHelperText = useRef(false);\n  const id = props.id ?? useId();\n  const rootRef = useRef(null);\n  const errorTextId = `fieldset::${id}::error-text`;\n  const helperTextId = `fieldset::${id}::helper-text`;\n  useSafeLayoutEffect(() => {\n    const rootNode = rootRef.current;\n    if (!rootNode) return;\n    const win = getWindow(rootNode);\n    const doc = win.document;\n    const checkTextElements = () => {\n      hasErrorText.current = !!doc.getElementById(errorTextId);\n      hasHelperText.current = !!doc.getElementById(helperTextId);\n    };\n    checkTextElements();\n    const observer = new win.MutationObserver(checkTextElements);\n    observer.observe(rootNode, {\n      childList: true,\n      subtree: true\n    });\n    return () => observer.disconnect();\n  }, [errorTextId, helperTextId]);\n  const labelIds = useMemo(() => {\n    const ids = [];\n    if (hasErrorText.current && invalid) ids.push(errorTextId);\n    if (hasHelperText.current) ids.push(helperTextId);\n    return ids.join(\" \") || void 0;\n  }, [invalid, errorTextId, helperTextId]);\n  const getRootProps = useMemo(() => () => ({\n    ...parts.root.attrs,\n    ref: rootRef,\n    disabled,\n    \"data-disabled\": disabled ? \"true\" : void 0,\n    \"data-invalid\": invalid ? \"true\" : void 0,\n    \"aria-describedby\": labelIds\n  }), [disabled, invalid, labelIds]);\n  const getLegendProps = useMemo(() => () => ({\n    ...parts.legend.attrs,\n    \"data-disabled\": disabled ? \"true\" : void 0,\n    \"data-invalid\": invalid ? \"true\" : void 0\n  }), [disabled, invalid]);\n  const getHelperTextProps = useMemo(() => () => ({\n    id: helperTextId,\n    ...parts.helperText.attrs\n  }), [helperTextId]);\n  const getErrorTextProps = useMemo(() => () => ({\n    id: errorTextId,\n    ...parts.errorText.attrs,\n    \"aria-live\": \"polite\"\n  }), [errorTextId]);\n  return {\n    refs: {\n      rootRef\n    },\n    disabled,\n    invalid,\n    getRootProps,\n    getLegendProps,\n    getHelperTextProps,\n    getErrorTextProps\n  };\n};\nexport { useFieldset };","map":{"version":3,"names":["getWindow","useRef","useId","useMemo","useSafeLayoutEffect","parts","useFieldset","props","disabled","invalid","hasErrorText","hasHelperText","id","rootRef","errorTextId","helperTextId","rootNode","current","win","doc","document","checkTextElements","getElementById","observer","MutationObserver","observe","childList","subtree","disconnect","labelIds","ids","push","join","getRootProps","root","attrs","ref","getLegendProps","legend","getHelperTextProps","helperText","getErrorTextProps","errorText","refs"],"sources":["/Users/macbook/developer/2025/2026/node_modules/@ark-ui/react/dist/components/fieldset/use-fieldset.js"],"sourcesContent":["'use client';\nimport { getWindow } from '@zag-js/dom-query';\nimport { useRef, useId, useMemo } from 'react';\nimport { useSafeLayoutEffect } from '../../utils/use-safe-layout-effect.js';\nimport { parts } from './fieldset.anatomy.js';\n\nconst useFieldset = (props) => {\n  const { disabled = false, invalid = false } = props;\n  const hasErrorText = useRef(false);\n  const hasHelperText = useRef(false);\n  const id = props.id ?? useId();\n  const rootRef = useRef(null);\n  const errorTextId = `fieldset::${id}::error-text`;\n  const helperTextId = `fieldset::${id}::helper-text`;\n  useSafeLayoutEffect(() => {\n    const rootNode = rootRef.current;\n    if (!rootNode) return;\n    const win = getWindow(rootNode);\n    const doc = win.document;\n    const checkTextElements = () => {\n      hasErrorText.current = !!doc.getElementById(errorTextId);\n      hasHelperText.current = !!doc.getElementById(helperTextId);\n    };\n    checkTextElements();\n    const observer = new win.MutationObserver(checkTextElements);\n    observer.observe(rootNode, { childList: true, subtree: true });\n    return () => observer.disconnect();\n  }, [errorTextId, helperTextId]);\n  const labelIds = useMemo(() => {\n    const ids = [];\n    if (hasErrorText.current && invalid) ids.push(errorTextId);\n    if (hasHelperText.current) ids.push(helperTextId);\n    return ids.join(\" \") || void 0;\n  }, [invalid, errorTextId, helperTextId]);\n  const getRootProps = useMemo(\n    () => () => ({\n      ...parts.root.attrs,\n      ref: rootRef,\n      disabled,\n      \"data-disabled\": disabled ? \"true\" : void 0,\n      \"data-invalid\": invalid ? \"true\" : void 0,\n      \"aria-describedby\": labelIds\n    }),\n    [disabled, invalid, labelIds]\n  );\n  const getLegendProps = useMemo(\n    () => () => ({\n      ...parts.legend.attrs,\n      \"data-disabled\": disabled ? \"true\" : void 0,\n      \"data-invalid\": invalid ? \"true\" : void 0\n    }),\n    [disabled, invalid]\n  );\n  const getHelperTextProps = useMemo(\n    () => () => ({\n      id: helperTextId,\n      ...parts.helperText.attrs\n    }),\n    [helperTextId]\n  );\n  const getErrorTextProps = useMemo(\n    () => () => ({\n      id: errorTextId,\n      ...parts.errorText.attrs,\n      \"aria-live\": \"polite\"\n    }),\n    [errorTextId]\n  );\n  return {\n    refs: {\n      rootRef\n    },\n    disabled,\n    invalid,\n    getRootProps,\n    getLegendProps,\n    getHelperTextProps,\n    getErrorTextProps\n  };\n};\n\nexport { useFieldset };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}