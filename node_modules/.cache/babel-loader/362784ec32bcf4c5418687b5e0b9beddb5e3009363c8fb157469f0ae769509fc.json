{"ast":null,"code":"import { createAnatomy } from '@zag-js/anatomy';\nimport { createScope, isSafari, MAX_Z_INDEX, dataAttr, ariaAttr, isComposingEvent, getEventStep, isLeftClick, getEventPoint, getWindow, trackFormControl, observeAttributes, addDomEvent, requestPointerLock, raf, setElementValue, isModifierKey } from '@zag-js/dom-query';\nimport { roundToDpr, wrap, compact, isValueAtMin, isValueAtMax, isValueWithinRange, callAll, incrementValue, clampValue, decrementValue, isEqual } from '@zag-js/utils';\nimport { createMachine, choose, ref, guards } from '@zag-js/core';\nimport { NumberParser } from '@internationalized/number';\n\n// src/number-input.anatomy.ts\nvar anatomy = createAnatomy(\"numberInput\").parts(\"root\", \"label\", \"input\", \"control\", \"valueText\", \"incrementTrigger\", \"decrementTrigger\", \"scrubber\");\nvar parts = anatomy.build();\nvar dom = createScope({\n  getRootId: ctx => ctx.ids?.root ?? `number-input:${ctx.id}`,\n  getInputId: ctx => ctx.ids?.input ?? `number-input:${ctx.id}:input`,\n  getIncrementTriggerId: ctx => ctx.ids?.incrementTrigger ?? `number-input:${ctx.id}:inc`,\n  getDecrementTriggerId: ctx => ctx.ids?.decrementTrigger ?? `number-input:${ctx.id}:dec`,\n  getScrubberId: ctx => ctx.ids?.scrubber ?? `number-input:${ctx.id}:scrubber`,\n  getCursorId: ctx => `number-input:${ctx.id}:cursor`,\n  getLabelId: ctx => ctx.ids?.label ?? `number-input:${ctx.id}:label`,\n  getInputEl: ctx => dom.getById(ctx, dom.getInputId(ctx)),\n  getIncrementTriggerEl: ctx => dom.getById(ctx, dom.getIncrementTriggerId(ctx)),\n  getDecrementTriggerEl: ctx => dom.getById(ctx, dom.getDecrementTriggerId(ctx)),\n  getScrubberEl: ctx => dom.getById(ctx, dom.getScrubberId(ctx)),\n  getCursorEl: ctx => dom.getDoc(ctx).getElementById(dom.getCursorId(ctx)),\n  getPressedTriggerEl: (ctx, hint = ctx.hint) => {\n    let btnEl = null;\n    if (hint === \"increment\") {\n      btnEl = dom.getIncrementTriggerEl(ctx);\n    }\n    if (hint === \"decrement\") {\n      btnEl = dom.getDecrementTriggerEl(ctx);\n    }\n    return btnEl;\n  },\n  setupVirtualCursor(ctx) {\n    if (isSafari()) return;\n    dom.createVirtualCursor(ctx);\n    return () => {\n      dom.getCursorEl(ctx)?.remove();\n    };\n  },\n  preventTextSelection(ctx) {\n    const doc = dom.getDoc(ctx);\n    const html = doc.documentElement;\n    const body = doc.body;\n    body.style.pointerEvents = \"none\";\n    html.style.userSelect = \"none\";\n    html.style.cursor = \"ew-resize\";\n    return () => {\n      body.style.pointerEvents = \"\";\n      html.style.userSelect = \"\";\n      html.style.cursor = \"\";\n      if (!html.style.length) {\n        html.removeAttribute(\"style\");\n      }\n      if (!body.style.length) {\n        body.removeAttribute(\"style\");\n      }\n    };\n  },\n  getMousemoveValue(ctx, event) {\n    const win = dom.getWin(ctx);\n    const x = roundToDpr(event.movementX, win.devicePixelRatio);\n    const y = roundToDpr(event.movementY, win.devicePixelRatio);\n    let hint = x > 0 ? \"increment\" : x < 0 ? \"decrement\" : null;\n    if (ctx.isRtl && hint === \"increment\") hint = \"decrement\";\n    if (ctx.isRtl && hint === \"decrement\") hint = \"increment\";\n    const point = {\n      x: ctx.scrubberCursorPoint.x + x,\n      y: ctx.scrubberCursorPoint.y + y\n    };\n    const width = win.innerWidth;\n    const half = roundToDpr(7.5, win.devicePixelRatio);\n    point.x = wrap(point.x + half, width) - half;\n    return {\n      hint,\n      point\n    };\n  },\n  createVirtualCursor(ctx) {\n    const doc = dom.getDoc(ctx);\n    const el = doc.createElement(\"div\");\n    el.className = \"scrubber--cursor\";\n    el.id = dom.getCursorId(ctx);\n    Object.assign(el.style, {\n      width: \"15px\",\n      height: \"15px\",\n      position: \"fixed\",\n      pointerEvents: \"none\",\n      left: \"0px\",\n      top: \"0px\",\n      zIndex: MAX_Z_INDEX,\n      transform: ctx.scrubberCursorPoint ? `translate3d(${ctx.scrubberCursorPoint.x}px, ${ctx.scrubberCursorPoint.y}px, 0px)` : void 0,\n      willChange: \"transform\"\n    });\n    el.innerHTML = `\n        <svg width=\"46\" height=\"15\" style=\"left: -15.5px; position: absolute; top: 0; filter: drop-shadow(rgba(0, 0, 0, 0.4) 0px 1px 1.1px);\">\n          <g transform=\"translate(2 3)\">\n            <path fill-rule=\"evenodd\" d=\"M 15 4.5L 15 2L 11.5 5.5L 15 9L 15 6.5L 31 6.5L 31 9L 34.5 5.5L 31 2L 31 4.5Z\" style=\"stroke-width: 2px; stroke: white;\"></path>\n            <path fill-rule=\"evenodd\" d=\"M 15 4.5L 15 2L 11.5 5.5L 15 9L 15 6.5L 31 6.5L 31 9L 34.5 5.5L 31 2L 31 4.5Z\"></path>\n          </g>\n        </svg>`;\n    doc.body.appendChild(el);\n  }\n});\n\n// src/number-input.connect.ts\nfunction connect(state, send, normalize) {\n  const focused = state.hasTag(\"focus\");\n  const disabled = state.context.isDisabled;\n  const readOnly = state.context.readOnly;\n  const empty = state.context.isValueEmpty;\n  const invalid = state.context.isOutOfRange || !!state.context.invalid;\n  const isIncrementDisabled = disabled || !state.context.canIncrement || readOnly;\n  const isDecrementDisabled = disabled || !state.context.canDecrement || readOnly;\n  const translations = state.context.translations;\n  return {\n    focused,\n    invalid,\n    empty,\n    value: state.context.formattedValue,\n    valueAsNumber: state.context.valueAsNumber,\n    setValue(value) {\n      send({\n        type: \"VALUE.SET\",\n        value\n      });\n    },\n    clearValue() {\n      send(\"VALUE.CLEAR\");\n    },\n    increment() {\n      send(\"VALUE.INCREMENT\");\n    },\n    decrement() {\n      send(\"VALUE.DECREMENT\");\n    },\n    setToMax() {\n      send({\n        type: \"VALUE.SET\",\n        value: state.context.max\n      });\n    },\n    setToMin() {\n      send({\n        type: \"VALUE.SET\",\n        value: state.context.min\n      });\n    },\n    focus() {\n      dom.getInputEl(state.context)?.focus();\n    },\n    getRootProps() {\n      return normalize.element({\n        id: dom.getRootId(state.context),\n        ...parts.root.attrs,\n        dir: state.context.dir,\n        \"data-disabled\": dataAttr(disabled),\n        \"data-focus\": dataAttr(focused),\n        \"data-invalid\": dataAttr(invalid)\n      });\n    },\n    getLabelProps() {\n      return normalize.label({\n        ...parts.label.attrs,\n        dir: state.context.dir,\n        \"data-disabled\": dataAttr(disabled),\n        \"data-focus\": dataAttr(focused),\n        \"data-invalid\": dataAttr(invalid),\n        id: dom.getLabelId(state.context),\n        htmlFor: dom.getInputId(state.context)\n      });\n    },\n    getControlProps() {\n      return normalize.element({\n        ...parts.control.attrs,\n        dir: state.context.dir,\n        role: \"group\",\n        \"aria-disabled\": disabled,\n        \"data-focus\": dataAttr(focused),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-invalid\": dataAttr(invalid),\n        \"aria-invalid\": ariaAttr(state.context.invalid)\n      });\n    },\n    getValueTextProps() {\n      return normalize.element({\n        ...parts.valueText.attrs,\n        dir: state.context.dir,\n        \"data-disabled\": dataAttr(disabled),\n        \"data-invalid\": dataAttr(invalid),\n        \"data-focus\": dataAttr(focused)\n      });\n    },\n    getInputProps() {\n      return normalize.input({\n        ...parts.input.attrs,\n        dir: state.context.dir,\n        name: state.context.name,\n        form: state.context.form,\n        id: dom.getInputId(state.context),\n        role: \"spinbutton\",\n        defaultValue: state.context.formattedValue,\n        pattern: state.context.pattern,\n        inputMode: state.context.inputMode,\n        \"aria-invalid\": ariaAttr(invalid),\n        \"data-invalid\": dataAttr(invalid),\n        disabled,\n        \"data-disabled\": dataAttr(disabled),\n        readOnly: state.context.readOnly,\n        required: state.context.required,\n        autoComplete: \"off\",\n        autoCorrect: \"off\",\n        spellCheck: \"false\",\n        type: \"text\",\n        \"aria-roledescription\": \"numberfield\",\n        \"aria-valuemin\": state.context.min,\n        \"aria-valuemax\": state.context.max,\n        \"aria-valuenow\": Number.isNaN(state.context.valueAsNumber) ? void 0 : state.context.valueAsNumber,\n        \"aria-valuetext\": state.context.valueText,\n        onFocus() {\n          send(\"INPUT.FOCUS\");\n        },\n        onBlur() {\n          send(\"INPUT.BLUR\");\n        },\n        onInput(event) {\n          send({\n            type: \"INPUT.CHANGE\",\n            target: event.currentTarget,\n            hint: \"set\"\n          });\n        },\n        onBeforeInput(event) {\n          try {\n            const {\n              selectionStart,\n              selectionEnd,\n              value\n            } = event.currentTarget;\n            const nextValue = value.slice(0, selectionStart) + (event.data ?? \"\") + value.slice(selectionEnd);\n            const isValid = state.context.parser.isValidPartialNumber(nextValue);\n            if (!isValid) {\n              event.preventDefault();\n            }\n          } catch {}\n        },\n        onKeyDown(event) {\n          if (event.defaultPrevented) return;\n          if (readOnly) return;\n          if (isComposingEvent(event)) return;\n          const step = getEventStep(event) * state.context.step;\n          const keyMap = {\n            ArrowUp() {\n              send({\n                type: \"INPUT.ARROW_UP\",\n                step\n              });\n              event.preventDefault();\n            },\n            ArrowDown() {\n              send({\n                type: \"INPUT.ARROW_DOWN\",\n                step\n              });\n              event.preventDefault();\n            },\n            Home() {\n              if (isModifierKey(event)) return;\n              send(\"INPUT.HOME\");\n              event.preventDefault();\n            },\n            End() {\n              if (isModifierKey(event)) return;\n              send(\"INPUT.END\");\n              event.preventDefault();\n            },\n            Enter() {\n              send(\"INPUT.ENTER\");\n            }\n          };\n          const exec = keyMap[event.key];\n          exec?.(event);\n        }\n      });\n    },\n    getDecrementTriggerProps() {\n      return normalize.button({\n        ...parts.decrementTrigger.attrs,\n        dir: state.context.dir,\n        id: dom.getDecrementTriggerId(state.context),\n        disabled: isDecrementDisabled,\n        \"data-disabled\": dataAttr(isDecrementDisabled),\n        \"aria-label\": translations.decrementLabel,\n        type: \"button\",\n        tabIndex: -1,\n        \"aria-controls\": dom.getInputId(state.context),\n        onPointerDown(event) {\n          if (isDecrementDisabled || !isLeftClick(event)) return;\n          send({\n            type: \"TRIGGER.PRESS_DOWN\",\n            hint: \"decrement\",\n            pointerType: event.pointerType\n          });\n          if (event.pointerType === \"mouse\") {\n            event.preventDefault();\n          }\n          if (event.pointerType === \"touch\") {\n            event.currentTarget?.focus({\n              preventScroll: true\n            });\n          }\n        },\n        onPointerUp(event) {\n          send({\n            type: \"TRIGGER.PRESS_UP\",\n            hint: \"decrement\",\n            pointerType: event.pointerType\n          });\n        },\n        onPointerLeave() {\n          if (isDecrementDisabled) return;\n          send({\n            type: \"TRIGGER.PRESS_UP\",\n            hint: \"decrement\"\n          });\n        }\n      });\n    },\n    getIncrementTriggerProps() {\n      return normalize.button({\n        ...parts.incrementTrigger.attrs,\n        dir: state.context.dir,\n        id: dom.getIncrementTriggerId(state.context),\n        disabled: isIncrementDisabled,\n        \"data-disabled\": dataAttr(isIncrementDisabled),\n        \"aria-label\": translations.incrementLabel,\n        type: \"button\",\n        tabIndex: -1,\n        \"aria-controls\": dom.getInputId(state.context),\n        onPointerDown(event) {\n          if (isIncrementDisabled || !isLeftClick(event)) return;\n          send({\n            type: \"TRIGGER.PRESS_DOWN\",\n            hint: \"increment\",\n            pointerType: event.pointerType\n          });\n          if (event.pointerType === \"mouse\") {\n            event.preventDefault();\n          }\n          if (event.pointerType === \"touch\") {\n            event.currentTarget?.focus({\n              preventScroll: true\n            });\n          }\n        },\n        onPointerUp(event) {\n          send({\n            type: \"TRIGGER.PRESS_UP\",\n            hint: \"increment\",\n            pointerType: event.pointerType\n          });\n        },\n        onPointerLeave(event) {\n          send({\n            type: \"TRIGGER.PRESS_UP\",\n            hint: \"increment\",\n            pointerType: event.pointerType\n          });\n        }\n      });\n    },\n    getScrubberProps() {\n      return normalize.element({\n        ...parts.scrubber.attrs,\n        dir: state.context.dir,\n        \"data-disabled\": dataAttr(disabled),\n        id: dom.getScrubberId(state.context),\n        role: \"presentation\",\n        onMouseDown(event) {\n          if (disabled) return;\n          const point = getEventPoint(event);\n          const win = getWindow(event.currentTarget);\n          const dpr = win.devicePixelRatio;\n          point.x = point.x - roundToDpr(7.5, dpr);\n          point.y = point.y - roundToDpr(7.5, dpr);\n          send({\n            type: \"SCRUBBER.PRESS_DOWN\",\n            point\n          });\n          event.preventDefault();\n        },\n        style: {\n          cursor: disabled ? void 0 : \"ew-resize\"\n        }\n      });\n    }\n  };\n}\n\n// src/cursor.ts\nfunction recordCursor(inputEl) {\n  if (inputEl.ownerDocument.activeElement !== inputEl) return;\n  try {\n    const {\n      selectionStart: start,\n      selectionEnd: end,\n      value\n    } = inputEl;\n    const beforeTxt = value.substring(0, start);\n    const afterTxt = value.substring(end);\n    return {\n      start,\n      end,\n      value,\n      beforeTxt,\n      afterTxt\n    };\n  } catch {}\n}\nfunction restoreCursor(inputEl, selection) {\n  if (inputEl.ownerDocument.activeElement !== inputEl) return;\n  if (!selection) {\n    inputEl.setSelectionRange(inputEl.value.length, inputEl.value.length);\n    return;\n  }\n  try {\n    const {\n      value\n    } = inputEl;\n    const {\n      beforeTxt = \"\",\n      afterTxt = \"\",\n      start\n    } = selection;\n    let startPos = value.length;\n    if (value.endsWith(afterTxt)) {\n      startPos = value.length - afterTxt.length;\n    } else if (value.startsWith(beforeTxt)) {\n      startPos = beforeTxt.length;\n    } else if (start != null) {\n      const beforeLastChar = beforeTxt[start - 1];\n      const newIndex = value.indexOf(beforeLastChar, start - 1);\n      if (newIndex !== -1) {\n        startPos = newIndex + 1;\n      }\n    }\n    inputEl.setSelectionRange(startPos, startPos);\n  } catch {}\n}\nvar createFormatter = (locale, options = {}) => {\n  return ref(new Intl.NumberFormat(locale, options));\n};\nvar createParser = (locale, options = {}) => {\n  return ref(new NumberParser(locale, options));\n};\nvar parseValue = (ctx, value) => {\n  if (!ctx.formatOptions) return parseFloat(value);\n  return ctx.parser.parse(String(value));\n};\nvar formatValue = (ctx, value) => {\n  if (Number.isNaN(value)) return \"\";\n  if (!ctx.formatOptions) return value.toString();\n  return ctx.formatter.format(value);\n};\n\n// src/number-input.machine.ts\nvar {\n  not,\n  and\n} = guards;\nfunction machine(userContext) {\n  const ctx = compact(userContext);\n  return createMachine({\n    id: \"number-input\",\n    initial: \"idle\",\n    context: {\n      dir: \"ltr\",\n      locale: \"en-US\",\n      focusInputOnChange: true,\n      clampValueOnBlur: true,\n      allowOverflow: false,\n      inputMode: \"decimal\",\n      pattern: \"[0-9]*(.[0-9]+)?\",\n      value: \"\",\n      step: 1,\n      min: Number.MIN_SAFE_INTEGER,\n      max: Number.MAX_SAFE_INTEGER,\n      invalid: false,\n      spinOnPress: true,\n      disabled: false,\n      readOnly: false,\n      ...ctx,\n      hint: null,\n      scrubberCursorPoint: null,\n      fieldsetDisabled: false,\n      formatter: createFormatter(ctx.locale || \"en-US\", ctx.formatOptions),\n      parser: createParser(ctx.locale || \"en-US\", ctx.formatOptions),\n      translations: {\n        incrementLabel: \"increment value\",\n        decrementLabel: \"decrease value\",\n        ...ctx.translations\n      }\n    },\n    computed: {\n      isRtl: ctx2 => ctx2.dir === \"rtl\",\n      valueAsNumber: ctx2 => parseValue(ctx2, ctx2.value),\n      formattedValue: ctx2 => formatValue(ctx2, ctx2.valueAsNumber),\n      isAtMin: ctx2 => isValueAtMin(ctx2.valueAsNumber, ctx2.min),\n      isAtMax: ctx2 => isValueAtMax(ctx2.valueAsNumber, ctx2.max),\n      isOutOfRange: ctx2 => !isValueWithinRange(ctx2.valueAsNumber, ctx2.min, ctx2.max),\n      isValueEmpty: ctx2 => ctx2.value === \"\",\n      isDisabled: ctx2 => !!ctx2.disabled || ctx2.fieldsetDisabled,\n      canIncrement: ctx2 => ctx2.allowOverflow || !ctx2.isAtMax,\n      canDecrement: ctx2 => ctx2.allowOverflow || !ctx2.isAtMin,\n      valueText: ctx2 => ctx2.translations.valueText?.(ctx2.value)\n    },\n    watch: {\n      formatOptions: [\"setFormatterAndParser\", \"syncInputElement\"],\n      locale: [\"setFormatterAndParser\", \"syncInputElement\"],\n      value: [\"syncInputElement\"],\n      isOutOfRange: [\"invokeOnInvalid\"],\n      scrubberCursorPoint: [\"setVirtualCursorPosition\"]\n    },\n    activities: [\"trackFormControl\"],\n    on: {\n      \"VALUE.SET\": {\n        actions: [\"setRawValue\", \"setHintToSet\"]\n      },\n      \"VALUE.CLEAR\": {\n        actions: [\"clearValue\"]\n      },\n      \"VALUE.INCREMENT\": {\n        actions: [\"increment\"]\n      },\n      \"VALUE.DECREMENT\": {\n        actions: [\"decrement\"]\n      }\n    },\n    states: {\n      idle: {\n        on: {\n          \"TRIGGER.PRESS_DOWN\": [{\n            guard: \"isTouchPointer\",\n            target: \"before:spin\",\n            actions: [\"setHint\"]\n          }, {\n            target: \"before:spin\",\n            actions: [\"focusInput\", \"invokeOnFocus\", \"setHint\"]\n          }],\n          \"SCRUBBER.PRESS_DOWN\": {\n            target: \"scrubbing\",\n            actions: [\"focusInput\", \"invokeOnFocus\", \"setHint\", \"setCursorPoint\"]\n          },\n          \"INPUT.FOCUS\": {\n            target: \"focused\",\n            actions: [\"focusInput\", \"invokeOnFocus\"]\n          }\n        }\n      },\n      focused: {\n        tags: \"focus\",\n        activities: \"attachWheelListener\",\n        on: {\n          \"TRIGGER.PRESS_DOWN\": [{\n            guard: \"isTouchPointer\",\n            target: \"before:spin\",\n            actions: [\"setHint\"]\n          }, {\n            target: \"before:spin\",\n            actions: [\"focusInput\", \"setHint\"]\n          }],\n          \"SCRUBBER.PRESS_DOWN\": {\n            target: \"scrubbing\",\n            actions: [\"focusInput\", \"setHint\", \"setCursorPoint\"]\n          },\n          \"INPUT.ARROW_UP\": {\n            actions: \"increment\"\n          },\n          \"INPUT.ARROW_DOWN\": {\n            actions: \"decrement\"\n          },\n          \"INPUT.HOME\": {\n            actions: \"decrementToMin\"\n          },\n          \"INPUT.END\": {\n            actions: \"incrementToMax\"\n          },\n          \"INPUT.CHANGE\": {\n            actions: [\"setValue\", \"setHint\"]\n          },\n          \"INPUT.BLUR\": [{\n            guard: and(\"clampValueOnBlur\", not(\"isInRange\")),\n            target: \"idle\",\n            actions: [\"setClampedValue\", \"clearHint\", \"invokeOnBlur\"]\n          }, {\n            target: \"idle\",\n            actions: [\"setFormattedValue\", \"clearHint\", \"invokeOnBlur\"]\n          }],\n          \"INPUT.ENTER\": {\n            actions: [\"setFormattedValue\", \"clearHint\", \"invokeOnBlur\"]\n          }\n        }\n      },\n      \"before:spin\": {\n        tags: \"focus\",\n        activities: \"trackButtonDisabled\",\n        entry: choose([{\n          guard: \"isIncrementHint\",\n          actions: \"increment\"\n        }, {\n          guard: \"isDecrementHint\",\n          actions: \"decrement\"\n        }]),\n        after: {\n          CHANGE_DELAY: {\n            target: \"spinning\",\n            guard: and(\"isInRange\", \"spinOnPress\")\n          }\n        },\n        on: {\n          \"TRIGGER.PRESS_UP\": [{\n            guard: \"isTouchPointer\",\n            target: \"focused\",\n            actions: \"clearHint\"\n          }, {\n            target: \"focused\",\n            actions: [\"focusInput\", \"clearHint\"]\n          }]\n        }\n      },\n      spinning: {\n        tags: \"focus\",\n        activities: \"trackButtonDisabled\",\n        every: [{\n          delay: \"CHANGE_INTERVAL\",\n          guard: and(not(\"isAtMin\"), \"isIncrementHint\"),\n          actions: \"increment\"\n        }, {\n          delay: \"CHANGE_INTERVAL\",\n          guard: and(not(\"isAtMax\"), \"isDecrementHint\"),\n          actions: \"decrement\"\n        }],\n        on: {\n          \"TRIGGER.PRESS_UP\": {\n            target: \"focused\",\n            actions: [\"focusInput\", \"clearHint\"]\n          }\n        }\n      },\n      scrubbing: {\n        tags: \"focus\",\n        activities: [\"activatePointerLock\", \"trackMousemove\", \"setupVirtualCursor\", \"preventTextSelection\"],\n        on: {\n          \"SCRUBBER.POINTER_UP\": {\n            target: \"focused\",\n            actions: [\"focusInput\", \"clearCursorPoint\"]\n          },\n          \"SCRUBBER.POINTER_MOVE\": [{\n            guard: \"isIncrementHint\",\n            actions: [\"increment\", \"setCursorPoint\"]\n          }, {\n            guard: \"isDecrementHint\",\n            actions: [\"decrement\", \"setCursorPoint\"]\n          }]\n        }\n      }\n    }\n  }, {\n    delays: {\n      CHANGE_INTERVAL: 50,\n      CHANGE_DELAY: 300\n    },\n    guards: {\n      clampValueOnBlur: ctx2 => ctx2.clampValueOnBlur,\n      isAtMin: ctx2 => ctx2.isAtMin,\n      spinOnPress: ctx2 => !!ctx2.spinOnPress,\n      isAtMax: ctx2 => ctx2.isAtMax,\n      isInRange: ctx2 => !ctx2.isOutOfRange,\n      isDecrementHint: (ctx2, evt) => (evt.hint ?? ctx2.hint) === \"decrement\",\n      isIncrementHint: (ctx2, evt) => (evt.hint ?? ctx2.hint) === \"increment\",\n      isTouchPointer: (_ctx, evt) => evt.pointerType === \"touch\"\n    },\n    activities: {\n      trackFormControl(ctx2, _evt, {\n        initialContext\n      }) {\n        const inputEl = dom.getInputEl(ctx2);\n        return trackFormControl(inputEl, {\n          onFieldsetDisabledChange(disabled) {\n            ctx2.fieldsetDisabled = disabled;\n          },\n          onFormReset() {\n            set.value(ctx2, initialContext.value);\n          }\n        });\n      },\n      setupVirtualCursor(ctx2) {\n        return dom.setupVirtualCursor(ctx2);\n      },\n      preventTextSelection(ctx2) {\n        return dom.preventTextSelection(ctx2);\n      },\n      trackButtonDisabled(ctx2, _evt, {\n        send\n      }) {\n        const btn = dom.getPressedTriggerEl(ctx2, ctx2.hint);\n        return observeAttributes(btn, {\n          attributes: [\"disabled\"],\n          callback() {\n            send({\n              type: \"TRIGGER.PRESS_UP\",\n              src: \"attr\"\n            });\n          }\n        });\n      },\n      attachWheelListener(ctx2, _evt, {\n        send\n      }) {\n        const inputEl = dom.getInputEl(ctx2);\n        if (!inputEl || !dom.isActiveElement(ctx2, inputEl) || !ctx2.allowMouseWheel) return;\n        function onWheel(event) {\n          event.preventDefault();\n          const dir = Math.sign(event.deltaY) * -1;\n          if (dir === 1) {\n            send(\"VALUE.INCREMENT\");\n          } else if (dir === -1) {\n            send(\"VALUE.DECREMENT\");\n          }\n        }\n        return addDomEvent(inputEl, \"wheel\", onWheel, {\n          passive: false\n        });\n      },\n      activatePointerLock(ctx2) {\n        if (isSafari()) return;\n        return requestPointerLock(dom.getDoc(ctx2));\n      },\n      trackMousemove(ctx2, _evt, {\n        send\n      }) {\n        const doc = dom.getDoc(ctx2);\n        function onMousemove(event) {\n          if (!ctx2.scrubberCursorPoint) return;\n          const value = dom.getMousemoveValue(ctx2, event);\n          if (!value.hint) return;\n          send({\n            type: \"SCRUBBER.POINTER_MOVE\",\n            hint: value.hint,\n            point: value.point\n          });\n        }\n        function onMouseup() {\n          send(\"SCRUBBER.POINTER_UP\");\n        }\n        return callAll(addDomEvent(doc, \"mousemove\", onMousemove, false), addDomEvent(doc, \"mouseup\", onMouseup, false));\n      }\n    },\n    actions: {\n      focusInput(ctx2) {\n        if (!ctx2.focusInputOnChange) return;\n        const inputEl = dom.getInputEl(ctx2);\n        if (dom.isActiveElement(ctx2, inputEl)) return;\n        raf(() => inputEl?.focus({\n          preventScroll: true\n        }));\n      },\n      increment(ctx2, evt) {\n        const nextValue = incrementValue(ctx2.valueAsNumber, evt.step ?? ctx2.step);\n        const value = formatValue(ctx2, clampValue(nextValue, ctx2.min, ctx2.max));\n        set.value(ctx2, value);\n      },\n      decrement(ctx2, evt) {\n        const nextValue = decrementValue(ctx2.valueAsNumber, evt.step ?? ctx2.step);\n        const value = formatValue(ctx2, clampValue(nextValue, ctx2.min, ctx2.max));\n        set.value(ctx2, value);\n      },\n      setClampedValue(ctx2) {\n        const nextValue = clampValue(ctx2.valueAsNumber, ctx2.min, ctx2.max);\n        set.value(ctx2, formatValue(ctx2, nextValue));\n      },\n      setRawValue(ctx2, evt) {\n        const parsedValue = parseValue(ctx2, evt.value);\n        const value = formatValue(ctx2, clampValue(parsedValue, ctx2.min, ctx2.max));\n        set.value(ctx2, value);\n      },\n      setValue(ctx2, evt) {\n        const value = evt.target?.value ?? evt.value;\n        set.value(ctx2, value);\n      },\n      clearValue(ctx2) {\n        set.value(ctx2, \"\");\n      },\n      incrementToMax(ctx2) {\n        const value = formatValue(ctx2, ctx2.max);\n        set.value(ctx2, value);\n      },\n      decrementToMin(ctx2) {\n        const value = formatValue(ctx2, ctx2.min);\n        set.value(ctx2, value);\n      },\n      setHint(ctx2, evt) {\n        ctx2.hint = evt.hint;\n      },\n      clearHint(ctx2) {\n        ctx2.hint = null;\n      },\n      setHintToSet(ctx2) {\n        ctx2.hint = \"set\";\n      },\n      invokeOnFocus(ctx2) {\n        ctx2.onFocusChange?.({\n          focused: true,\n          value: ctx2.formattedValue,\n          valueAsNumber: ctx2.valueAsNumber\n        });\n      },\n      invokeOnBlur(ctx2) {\n        ctx2.onFocusChange?.({\n          focused: false,\n          value: ctx2.formattedValue,\n          valueAsNumber: ctx2.valueAsNumber\n        });\n      },\n      invokeOnInvalid(ctx2) {\n        if (!ctx2.isOutOfRange) return;\n        const reason = ctx2.valueAsNumber > ctx2.max ? \"rangeOverflow\" : \"rangeUnderflow\";\n        ctx2.onValueInvalid?.({\n          reason,\n          value: ctx2.formattedValue,\n          valueAsNumber: ctx2.valueAsNumber\n        });\n      },\n      syncInputElement(ctx2, evt) {\n        const value = evt.type.endsWith(\"CHANGE\") ? ctx2.value : ctx2.formattedValue;\n        sync.input(ctx2, value);\n      },\n      setFormattedValue(ctx2) {\n        set.value(ctx2, ctx2.formattedValue);\n      },\n      setCursorPoint(ctx2, evt) {\n        ctx2.scrubberCursorPoint = evt.point;\n      },\n      clearCursorPoint(ctx2) {\n        ctx2.scrubberCursorPoint = null;\n      },\n      setVirtualCursorPosition(ctx2) {\n        const cursorEl = dom.getCursorEl(ctx2);\n        if (!cursorEl || !ctx2.scrubberCursorPoint) return;\n        const {\n          x,\n          y\n        } = ctx2.scrubberCursorPoint;\n        cursorEl.style.transform = `translate3d(${x}px, ${y}px, 0px)`;\n      },\n      setFormatterAndParser(ctx2) {\n        if (!ctx2.locale) return;\n        ctx2.formatter = createFormatter(ctx2.locale, ctx2.formatOptions);\n        ctx2.parser = createParser(ctx2.locale, ctx2.formatOptions);\n      }\n    },\n    compareFns: {\n      formatOptions: (a, b) => isEqual(a, b),\n      scrubberCursorPoint: (a, b) => isEqual(a, b)\n    }\n  });\n}\nvar sync = {\n  input(ctx, value) {\n    const inputEl = dom.getInputEl(ctx);\n    if (!inputEl) return;\n    const sel = recordCursor(inputEl);\n    raf(() => {\n      setElementValue(inputEl, value);\n      restoreCursor(inputEl, sel);\n    });\n  }\n};\nvar invoke = {\n  onChange: ctx => {\n    ctx.onValueChange?.({\n      value: ctx.value,\n      valueAsNumber: ctx.valueAsNumber\n    });\n  }\n};\nvar set = {\n  value: (ctx, value) => {\n    if (isEqual(ctx.value, value)) return;\n    ctx.value = value;\n    invoke.onChange(ctx);\n  }\n};\nexport { anatomy, connect, machine };","map":{"version":3,"names":["createAnatomy","createScope","isSafari","MAX_Z_INDEX","dataAttr","ariaAttr","isComposingEvent","getEventStep","isLeftClick","getEventPoint","getWindow","trackFormControl","observeAttributes","addDomEvent","requestPointerLock","raf","setElementValue","isModifierKey","roundToDpr","wrap","compact","isValueAtMin","isValueAtMax","isValueWithinRange","callAll","incrementValue","clampValue","decrementValue","isEqual","createMachine","choose","ref","guards","NumberParser","anatomy","parts","build","dom","getRootId","ctx","ids","root","id","getInputId","input","getIncrementTriggerId","incrementTrigger","getDecrementTriggerId","decrementTrigger","getScrubberId","scrubber","getCursorId","getLabelId","label","getInputEl","getById","getIncrementTriggerEl","getDecrementTriggerEl","getScrubberEl","getCursorEl","getDoc","getElementById","getPressedTriggerEl","hint","btnEl","setupVirtualCursor","createVirtualCursor","remove","preventTextSelection","doc","html","documentElement","body","style","pointerEvents","userSelect","cursor","length","removeAttribute","getMousemoveValue","event","win","getWin","x","movementX","devicePixelRatio","y","movementY","isRtl","point","scrubberCursorPoint","width","innerWidth","half","el","createElement","className","Object","assign","height","position","left","top","zIndex","transform","willChange","innerHTML","appendChild","connect","state","send","normalize","focused","hasTag","disabled","context","isDisabled","readOnly","empty","isValueEmpty","invalid","isOutOfRange","isIncrementDisabled","canIncrement","isDecrementDisabled","canDecrement","translations","value","formattedValue","valueAsNumber","setValue","type","clearValue","increment","decrement","setToMax","max","setToMin","min","focus","getRootProps","element","attrs","dir","getLabelProps","htmlFor","getControlProps","control","role","getValueTextProps","valueText","getInputProps","name","form","defaultValue","pattern","inputMode","required","autoComplete","autoCorrect","spellCheck","Number","isNaN","onFocus","onBlur","onInput","target","currentTarget","onBeforeInput","selectionStart","selectionEnd","nextValue","slice","data","isValid","parser","isValidPartialNumber","preventDefault","onKeyDown","defaultPrevented","step","keyMap","ArrowUp","ArrowDown","Home","End","Enter","exec","key","getDecrementTriggerProps","button","decrementLabel","tabIndex","onPointerDown","pointerType","preventScroll","onPointerUp","onPointerLeave","getIncrementTriggerProps","incrementLabel","getScrubberProps","onMouseDown","dpr","recordCursor","inputEl","ownerDocument","activeElement","start","end","beforeTxt","substring","afterTxt","restoreCursor","selection","setSelectionRange","startPos","endsWith","startsWith","beforeLastChar","newIndex","indexOf","createFormatter","locale","options","Intl","NumberFormat","createParser","parseValue","formatOptions","parseFloat","parse","String","formatValue","toString","formatter","format","not","and","machine","userContext","initial","focusInputOnChange","clampValueOnBlur","allowOverflow","MIN_SAFE_INTEGER","MAX_SAFE_INTEGER","spinOnPress","fieldsetDisabled","computed","ctx2","isAtMin","isAtMax","watch","activities","on","actions","states","idle","guard","tags","entry","after","CHANGE_DELAY","spinning","every","delay","scrubbing","delays","CHANGE_INTERVAL","isInRange","isDecrementHint","evt","isIncrementHint","isTouchPointer","_ctx","_evt","initialContext","onFieldsetDisabledChange","onFormReset","set","trackButtonDisabled","btn","attributes","callback","src","attachWheelListener","isActiveElement","allowMouseWheel","onWheel","Math","sign","deltaY","passive","activatePointerLock","trackMousemove","onMousemove","onMouseup","focusInput","setClampedValue","setRawValue","parsedValue","incrementToMax","decrementToMin","setHint","clearHint","setHintToSet","invokeOnFocus","onFocusChange","invokeOnBlur","invokeOnInvalid","reason","onValueInvalid","syncInputElement","sync","setFormattedValue","setCursorPoint","clearCursorPoint","setVirtualCursorPosition","cursorEl","setFormatterAndParser","compareFns","a","b","sel","invoke","onChange","onValueChange"],"sources":["/Users/macbook/developer/2025/2026/node_modules/@zag-js/number-input/dist/index.mjs"],"sourcesContent":["import { createAnatomy } from '@zag-js/anatomy';\nimport { createScope, isSafari, MAX_Z_INDEX, dataAttr, ariaAttr, isComposingEvent, getEventStep, isLeftClick, getEventPoint, getWindow, trackFormControl, observeAttributes, addDomEvent, requestPointerLock, raf, setElementValue, isModifierKey } from '@zag-js/dom-query';\nimport { roundToDpr, wrap, compact, isValueAtMin, isValueAtMax, isValueWithinRange, callAll, incrementValue, clampValue, decrementValue, isEqual } from '@zag-js/utils';\nimport { createMachine, choose, ref, guards } from '@zag-js/core';\nimport { NumberParser } from '@internationalized/number';\n\n// src/number-input.anatomy.ts\nvar anatomy = createAnatomy(\"numberInput\").parts(\n  \"root\",\n  \"label\",\n  \"input\",\n  \"control\",\n  \"valueText\",\n  \"incrementTrigger\",\n  \"decrementTrigger\",\n  \"scrubber\"\n);\nvar parts = anatomy.build();\nvar dom = createScope({\n  getRootId: (ctx) => ctx.ids?.root ?? `number-input:${ctx.id}`,\n  getInputId: (ctx) => ctx.ids?.input ?? `number-input:${ctx.id}:input`,\n  getIncrementTriggerId: (ctx) => ctx.ids?.incrementTrigger ?? `number-input:${ctx.id}:inc`,\n  getDecrementTriggerId: (ctx) => ctx.ids?.decrementTrigger ?? `number-input:${ctx.id}:dec`,\n  getScrubberId: (ctx) => ctx.ids?.scrubber ?? `number-input:${ctx.id}:scrubber`,\n  getCursorId: (ctx) => `number-input:${ctx.id}:cursor`,\n  getLabelId: (ctx) => ctx.ids?.label ?? `number-input:${ctx.id}:label`,\n  getInputEl: (ctx) => dom.getById(ctx, dom.getInputId(ctx)),\n  getIncrementTriggerEl: (ctx) => dom.getById(ctx, dom.getIncrementTriggerId(ctx)),\n  getDecrementTriggerEl: (ctx) => dom.getById(ctx, dom.getDecrementTriggerId(ctx)),\n  getScrubberEl: (ctx) => dom.getById(ctx, dom.getScrubberId(ctx)),\n  getCursorEl: (ctx) => dom.getDoc(ctx).getElementById(dom.getCursorId(ctx)),\n  getPressedTriggerEl: (ctx, hint = ctx.hint) => {\n    let btnEl = null;\n    if (hint === \"increment\") {\n      btnEl = dom.getIncrementTriggerEl(ctx);\n    }\n    if (hint === \"decrement\") {\n      btnEl = dom.getDecrementTriggerEl(ctx);\n    }\n    return btnEl;\n  },\n  setupVirtualCursor(ctx) {\n    if (isSafari()) return;\n    dom.createVirtualCursor(ctx);\n    return () => {\n      dom.getCursorEl(ctx)?.remove();\n    };\n  },\n  preventTextSelection(ctx) {\n    const doc = dom.getDoc(ctx);\n    const html = doc.documentElement;\n    const body = doc.body;\n    body.style.pointerEvents = \"none\";\n    html.style.userSelect = \"none\";\n    html.style.cursor = \"ew-resize\";\n    return () => {\n      body.style.pointerEvents = \"\";\n      html.style.userSelect = \"\";\n      html.style.cursor = \"\";\n      if (!html.style.length) {\n        html.removeAttribute(\"style\");\n      }\n      if (!body.style.length) {\n        body.removeAttribute(\"style\");\n      }\n    };\n  },\n  getMousemoveValue(ctx, event) {\n    const win = dom.getWin(ctx);\n    const x = roundToDpr(event.movementX, win.devicePixelRatio);\n    const y = roundToDpr(event.movementY, win.devicePixelRatio);\n    let hint = x > 0 ? \"increment\" : x < 0 ? \"decrement\" : null;\n    if (ctx.isRtl && hint === \"increment\") hint = \"decrement\";\n    if (ctx.isRtl && hint === \"decrement\") hint = \"increment\";\n    const point = {\n      x: ctx.scrubberCursorPoint.x + x,\n      y: ctx.scrubberCursorPoint.y + y\n    };\n    const width = win.innerWidth;\n    const half = roundToDpr(7.5, win.devicePixelRatio);\n    point.x = wrap(point.x + half, width) - half;\n    return { hint, point };\n  },\n  createVirtualCursor(ctx) {\n    const doc = dom.getDoc(ctx);\n    const el = doc.createElement(\"div\");\n    el.className = \"scrubber--cursor\";\n    el.id = dom.getCursorId(ctx);\n    Object.assign(el.style, {\n      width: \"15px\",\n      height: \"15px\",\n      position: \"fixed\",\n      pointerEvents: \"none\",\n      left: \"0px\",\n      top: \"0px\",\n      zIndex: MAX_Z_INDEX,\n      transform: ctx.scrubberCursorPoint ? `translate3d(${ctx.scrubberCursorPoint.x}px, ${ctx.scrubberCursorPoint.y}px, 0px)` : void 0,\n      willChange: \"transform\"\n    });\n    el.innerHTML = `\n        <svg width=\"46\" height=\"15\" style=\"left: -15.5px; position: absolute; top: 0; filter: drop-shadow(rgba(0, 0, 0, 0.4) 0px 1px 1.1px);\">\n          <g transform=\"translate(2 3)\">\n            <path fill-rule=\"evenodd\" d=\"M 15 4.5L 15 2L 11.5 5.5L 15 9L 15 6.5L 31 6.5L 31 9L 34.5 5.5L 31 2L 31 4.5Z\" style=\"stroke-width: 2px; stroke: white;\"></path>\n            <path fill-rule=\"evenodd\" d=\"M 15 4.5L 15 2L 11.5 5.5L 15 9L 15 6.5L 31 6.5L 31 9L 34.5 5.5L 31 2L 31 4.5Z\"></path>\n          </g>\n        </svg>`;\n    doc.body.appendChild(el);\n  }\n});\n\n// src/number-input.connect.ts\nfunction connect(state, send, normalize) {\n  const focused = state.hasTag(\"focus\");\n  const disabled = state.context.isDisabled;\n  const readOnly = state.context.readOnly;\n  const empty = state.context.isValueEmpty;\n  const invalid = state.context.isOutOfRange || !!state.context.invalid;\n  const isIncrementDisabled = disabled || !state.context.canIncrement || readOnly;\n  const isDecrementDisabled = disabled || !state.context.canDecrement || readOnly;\n  const translations = state.context.translations;\n  return {\n    focused,\n    invalid,\n    empty,\n    value: state.context.formattedValue,\n    valueAsNumber: state.context.valueAsNumber,\n    setValue(value) {\n      send({ type: \"VALUE.SET\", value });\n    },\n    clearValue() {\n      send(\"VALUE.CLEAR\");\n    },\n    increment() {\n      send(\"VALUE.INCREMENT\");\n    },\n    decrement() {\n      send(\"VALUE.DECREMENT\");\n    },\n    setToMax() {\n      send({ type: \"VALUE.SET\", value: state.context.max });\n    },\n    setToMin() {\n      send({ type: \"VALUE.SET\", value: state.context.min });\n    },\n    focus() {\n      dom.getInputEl(state.context)?.focus();\n    },\n    getRootProps() {\n      return normalize.element({\n        id: dom.getRootId(state.context),\n        ...parts.root.attrs,\n        dir: state.context.dir,\n        \"data-disabled\": dataAttr(disabled),\n        \"data-focus\": dataAttr(focused),\n        \"data-invalid\": dataAttr(invalid)\n      });\n    },\n    getLabelProps() {\n      return normalize.label({\n        ...parts.label.attrs,\n        dir: state.context.dir,\n        \"data-disabled\": dataAttr(disabled),\n        \"data-focus\": dataAttr(focused),\n        \"data-invalid\": dataAttr(invalid),\n        id: dom.getLabelId(state.context),\n        htmlFor: dom.getInputId(state.context)\n      });\n    },\n    getControlProps() {\n      return normalize.element({\n        ...parts.control.attrs,\n        dir: state.context.dir,\n        role: \"group\",\n        \"aria-disabled\": disabled,\n        \"data-focus\": dataAttr(focused),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-invalid\": dataAttr(invalid),\n        \"aria-invalid\": ariaAttr(state.context.invalid)\n      });\n    },\n    getValueTextProps() {\n      return normalize.element({\n        ...parts.valueText.attrs,\n        dir: state.context.dir,\n        \"data-disabled\": dataAttr(disabled),\n        \"data-invalid\": dataAttr(invalid),\n        \"data-focus\": dataAttr(focused)\n      });\n    },\n    getInputProps() {\n      return normalize.input({\n        ...parts.input.attrs,\n        dir: state.context.dir,\n        name: state.context.name,\n        form: state.context.form,\n        id: dom.getInputId(state.context),\n        role: \"spinbutton\",\n        defaultValue: state.context.formattedValue,\n        pattern: state.context.pattern,\n        inputMode: state.context.inputMode,\n        \"aria-invalid\": ariaAttr(invalid),\n        \"data-invalid\": dataAttr(invalid),\n        disabled,\n        \"data-disabled\": dataAttr(disabled),\n        readOnly: state.context.readOnly,\n        required: state.context.required,\n        autoComplete: \"off\",\n        autoCorrect: \"off\",\n        spellCheck: \"false\",\n        type: \"text\",\n        \"aria-roledescription\": \"numberfield\",\n        \"aria-valuemin\": state.context.min,\n        \"aria-valuemax\": state.context.max,\n        \"aria-valuenow\": Number.isNaN(state.context.valueAsNumber) ? void 0 : state.context.valueAsNumber,\n        \"aria-valuetext\": state.context.valueText,\n        onFocus() {\n          send(\"INPUT.FOCUS\");\n        },\n        onBlur() {\n          send(\"INPUT.BLUR\");\n        },\n        onInput(event) {\n          send({ type: \"INPUT.CHANGE\", target: event.currentTarget, hint: \"set\" });\n        },\n        onBeforeInput(event) {\n          try {\n            const { selectionStart, selectionEnd, value } = event.currentTarget;\n            const nextValue = value.slice(0, selectionStart) + (event.data ?? \"\") + value.slice(selectionEnd);\n            const isValid = state.context.parser.isValidPartialNumber(nextValue);\n            if (!isValid) {\n              event.preventDefault();\n            }\n          } catch {\n          }\n        },\n        onKeyDown(event) {\n          if (event.defaultPrevented) return;\n          if (readOnly) return;\n          if (isComposingEvent(event)) return;\n          const step = getEventStep(event) * state.context.step;\n          const keyMap = {\n            ArrowUp() {\n              send({ type: \"INPUT.ARROW_UP\", step });\n              event.preventDefault();\n            },\n            ArrowDown() {\n              send({ type: \"INPUT.ARROW_DOWN\", step });\n              event.preventDefault();\n            },\n            Home() {\n              if (isModifierKey(event)) return;\n              send(\"INPUT.HOME\");\n              event.preventDefault();\n            },\n            End() {\n              if (isModifierKey(event)) return;\n              send(\"INPUT.END\");\n              event.preventDefault();\n            },\n            Enter() {\n              send(\"INPUT.ENTER\");\n            }\n          };\n          const exec = keyMap[event.key];\n          exec?.(event);\n        }\n      });\n    },\n    getDecrementTriggerProps() {\n      return normalize.button({\n        ...parts.decrementTrigger.attrs,\n        dir: state.context.dir,\n        id: dom.getDecrementTriggerId(state.context),\n        disabled: isDecrementDisabled,\n        \"data-disabled\": dataAttr(isDecrementDisabled),\n        \"aria-label\": translations.decrementLabel,\n        type: \"button\",\n        tabIndex: -1,\n        \"aria-controls\": dom.getInputId(state.context),\n        onPointerDown(event) {\n          if (isDecrementDisabled || !isLeftClick(event)) return;\n          send({ type: \"TRIGGER.PRESS_DOWN\", hint: \"decrement\", pointerType: event.pointerType });\n          if (event.pointerType === \"mouse\") {\n            event.preventDefault();\n          }\n          if (event.pointerType === \"touch\") {\n            event.currentTarget?.focus({ preventScroll: true });\n          }\n        },\n        onPointerUp(event) {\n          send({ type: \"TRIGGER.PRESS_UP\", hint: \"decrement\", pointerType: event.pointerType });\n        },\n        onPointerLeave() {\n          if (isDecrementDisabled) return;\n          send({ type: \"TRIGGER.PRESS_UP\", hint: \"decrement\" });\n        }\n      });\n    },\n    getIncrementTriggerProps() {\n      return normalize.button({\n        ...parts.incrementTrigger.attrs,\n        dir: state.context.dir,\n        id: dom.getIncrementTriggerId(state.context),\n        disabled: isIncrementDisabled,\n        \"data-disabled\": dataAttr(isIncrementDisabled),\n        \"aria-label\": translations.incrementLabel,\n        type: \"button\",\n        tabIndex: -1,\n        \"aria-controls\": dom.getInputId(state.context),\n        onPointerDown(event) {\n          if (isIncrementDisabled || !isLeftClick(event)) return;\n          send({ type: \"TRIGGER.PRESS_DOWN\", hint: \"increment\", pointerType: event.pointerType });\n          if (event.pointerType === \"mouse\") {\n            event.preventDefault();\n          }\n          if (event.pointerType === \"touch\") {\n            event.currentTarget?.focus({ preventScroll: true });\n          }\n        },\n        onPointerUp(event) {\n          send({ type: \"TRIGGER.PRESS_UP\", hint: \"increment\", pointerType: event.pointerType });\n        },\n        onPointerLeave(event) {\n          send({ type: \"TRIGGER.PRESS_UP\", hint: \"increment\", pointerType: event.pointerType });\n        }\n      });\n    },\n    getScrubberProps() {\n      return normalize.element({\n        ...parts.scrubber.attrs,\n        dir: state.context.dir,\n        \"data-disabled\": dataAttr(disabled),\n        id: dom.getScrubberId(state.context),\n        role: \"presentation\",\n        onMouseDown(event) {\n          if (disabled) return;\n          const point = getEventPoint(event);\n          const win = getWindow(event.currentTarget);\n          const dpr = win.devicePixelRatio;\n          point.x = point.x - roundToDpr(7.5, dpr);\n          point.y = point.y - roundToDpr(7.5, dpr);\n          send({ type: \"SCRUBBER.PRESS_DOWN\", point });\n          event.preventDefault();\n        },\n        style: {\n          cursor: disabled ? void 0 : \"ew-resize\"\n        }\n      });\n    }\n  };\n}\n\n// src/cursor.ts\nfunction recordCursor(inputEl) {\n  if (inputEl.ownerDocument.activeElement !== inputEl) return;\n  try {\n    const { selectionStart: start, selectionEnd: end, value } = inputEl;\n    const beforeTxt = value.substring(0, start);\n    const afterTxt = value.substring(end);\n    return {\n      start,\n      end,\n      value,\n      beforeTxt,\n      afterTxt\n    };\n  } catch {\n  }\n}\nfunction restoreCursor(inputEl, selection) {\n  if (inputEl.ownerDocument.activeElement !== inputEl) return;\n  if (!selection) {\n    inputEl.setSelectionRange(inputEl.value.length, inputEl.value.length);\n    return;\n  }\n  try {\n    const { value } = inputEl;\n    const { beforeTxt = \"\", afterTxt = \"\", start } = selection;\n    let startPos = value.length;\n    if (value.endsWith(afterTxt)) {\n      startPos = value.length - afterTxt.length;\n    } else if (value.startsWith(beforeTxt)) {\n      startPos = beforeTxt.length;\n    } else if (start != null) {\n      const beforeLastChar = beforeTxt[start - 1];\n      const newIndex = value.indexOf(beforeLastChar, start - 1);\n      if (newIndex !== -1) {\n        startPos = newIndex + 1;\n      }\n    }\n    inputEl.setSelectionRange(startPos, startPos);\n  } catch {\n  }\n}\nvar createFormatter = (locale, options = {}) => {\n  return ref(new Intl.NumberFormat(locale, options));\n};\nvar createParser = (locale, options = {}) => {\n  return ref(new NumberParser(locale, options));\n};\nvar parseValue = (ctx, value) => {\n  if (!ctx.formatOptions) return parseFloat(value);\n  return ctx.parser.parse(String(value));\n};\nvar formatValue = (ctx, value) => {\n  if (Number.isNaN(value)) return \"\";\n  if (!ctx.formatOptions) return value.toString();\n  return ctx.formatter.format(value);\n};\n\n// src/number-input.machine.ts\nvar { not, and } = guards;\nfunction machine(userContext) {\n  const ctx = compact(userContext);\n  return createMachine(\n    {\n      id: \"number-input\",\n      initial: \"idle\",\n      context: {\n        dir: \"ltr\",\n        locale: \"en-US\",\n        focusInputOnChange: true,\n        clampValueOnBlur: true,\n        allowOverflow: false,\n        inputMode: \"decimal\",\n        pattern: \"[0-9]*(.[0-9]+)?\",\n        value: \"\",\n        step: 1,\n        min: Number.MIN_SAFE_INTEGER,\n        max: Number.MAX_SAFE_INTEGER,\n        invalid: false,\n        spinOnPress: true,\n        disabled: false,\n        readOnly: false,\n        ...ctx,\n        hint: null,\n        scrubberCursorPoint: null,\n        fieldsetDisabled: false,\n        formatter: createFormatter(ctx.locale || \"en-US\", ctx.formatOptions),\n        parser: createParser(ctx.locale || \"en-US\", ctx.formatOptions),\n        translations: {\n          incrementLabel: \"increment value\",\n          decrementLabel: \"decrease value\",\n          ...ctx.translations\n        }\n      },\n      computed: {\n        isRtl: (ctx2) => ctx2.dir === \"rtl\",\n        valueAsNumber: (ctx2) => parseValue(ctx2, ctx2.value),\n        formattedValue: (ctx2) => formatValue(ctx2, ctx2.valueAsNumber),\n        isAtMin: (ctx2) => isValueAtMin(ctx2.valueAsNumber, ctx2.min),\n        isAtMax: (ctx2) => isValueAtMax(ctx2.valueAsNumber, ctx2.max),\n        isOutOfRange: (ctx2) => !isValueWithinRange(ctx2.valueAsNumber, ctx2.min, ctx2.max),\n        isValueEmpty: (ctx2) => ctx2.value === \"\",\n        isDisabled: (ctx2) => !!ctx2.disabled || ctx2.fieldsetDisabled,\n        canIncrement: (ctx2) => ctx2.allowOverflow || !ctx2.isAtMax,\n        canDecrement: (ctx2) => ctx2.allowOverflow || !ctx2.isAtMin,\n        valueText: (ctx2) => ctx2.translations.valueText?.(ctx2.value)\n      },\n      watch: {\n        formatOptions: [\"setFormatterAndParser\", \"syncInputElement\"],\n        locale: [\"setFormatterAndParser\", \"syncInputElement\"],\n        value: [\"syncInputElement\"],\n        isOutOfRange: [\"invokeOnInvalid\"],\n        scrubberCursorPoint: [\"setVirtualCursorPosition\"]\n      },\n      activities: [\"trackFormControl\"],\n      on: {\n        \"VALUE.SET\": {\n          actions: [\"setRawValue\", \"setHintToSet\"]\n        },\n        \"VALUE.CLEAR\": {\n          actions: [\"clearValue\"]\n        },\n        \"VALUE.INCREMENT\": {\n          actions: [\"increment\"]\n        },\n        \"VALUE.DECREMENT\": {\n          actions: [\"decrement\"]\n        }\n      },\n      states: {\n        idle: {\n          on: {\n            \"TRIGGER.PRESS_DOWN\": [\n              { guard: \"isTouchPointer\", target: \"before:spin\", actions: [\"setHint\"] },\n              {\n                target: \"before:spin\",\n                actions: [\"focusInput\", \"invokeOnFocus\", \"setHint\"]\n              }\n            ],\n            \"SCRUBBER.PRESS_DOWN\": {\n              target: \"scrubbing\",\n              actions: [\"focusInput\", \"invokeOnFocus\", \"setHint\", \"setCursorPoint\"]\n            },\n            \"INPUT.FOCUS\": {\n              target: \"focused\",\n              actions: [\"focusInput\", \"invokeOnFocus\"]\n            }\n          }\n        },\n        focused: {\n          tags: \"focus\",\n          activities: \"attachWheelListener\",\n          on: {\n            \"TRIGGER.PRESS_DOWN\": [\n              { guard: \"isTouchPointer\", target: \"before:spin\", actions: [\"setHint\"] },\n              { target: \"before:spin\", actions: [\"focusInput\", \"setHint\"] }\n            ],\n            \"SCRUBBER.PRESS_DOWN\": {\n              target: \"scrubbing\",\n              actions: [\"focusInput\", \"setHint\", \"setCursorPoint\"]\n            },\n            \"INPUT.ARROW_UP\": {\n              actions: \"increment\"\n            },\n            \"INPUT.ARROW_DOWN\": {\n              actions: \"decrement\"\n            },\n            \"INPUT.HOME\": {\n              actions: \"decrementToMin\"\n            },\n            \"INPUT.END\": {\n              actions: \"incrementToMax\"\n            },\n            \"INPUT.CHANGE\": {\n              actions: [\"setValue\", \"setHint\"]\n            },\n            \"INPUT.BLUR\": [\n              {\n                guard: and(\"clampValueOnBlur\", not(\"isInRange\")),\n                target: \"idle\",\n                actions: [\"setClampedValue\", \"clearHint\", \"invokeOnBlur\"]\n              },\n              {\n                target: \"idle\",\n                actions: [\"setFormattedValue\", \"clearHint\", \"invokeOnBlur\"]\n              }\n            ],\n            \"INPUT.ENTER\": {\n              actions: [\"setFormattedValue\", \"clearHint\", \"invokeOnBlur\"]\n            }\n          }\n        },\n        \"before:spin\": {\n          tags: \"focus\",\n          activities: \"trackButtonDisabled\",\n          entry: choose([\n            { guard: \"isIncrementHint\", actions: \"increment\" },\n            { guard: \"isDecrementHint\", actions: \"decrement\" }\n          ]),\n          after: {\n            CHANGE_DELAY: {\n              target: \"spinning\",\n              guard: and(\"isInRange\", \"spinOnPress\")\n            }\n          },\n          on: {\n            \"TRIGGER.PRESS_UP\": [\n              { guard: \"isTouchPointer\", target: \"focused\", actions: \"clearHint\" },\n              { target: \"focused\", actions: [\"focusInput\", \"clearHint\"] }\n            ]\n          }\n        },\n        spinning: {\n          tags: \"focus\",\n          activities: \"trackButtonDisabled\",\n          every: [\n            {\n              delay: \"CHANGE_INTERVAL\",\n              guard: and(not(\"isAtMin\"), \"isIncrementHint\"),\n              actions: \"increment\"\n            },\n            {\n              delay: \"CHANGE_INTERVAL\",\n              guard: and(not(\"isAtMax\"), \"isDecrementHint\"),\n              actions: \"decrement\"\n            }\n          ],\n          on: {\n            \"TRIGGER.PRESS_UP\": {\n              target: \"focused\",\n              actions: [\"focusInput\", \"clearHint\"]\n            }\n          }\n        },\n        scrubbing: {\n          tags: \"focus\",\n          activities: [\"activatePointerLock\", \"trackMousemove\", \"setupVirtualCursor\", \"preventTextSelection\"],\n          on: {\n            \"SCRUBBER.POINTER_UP\": {\n              target: \"focused\",\n              actions: [\"focusInput\", \"clearCursorPoint\"]\n            },\n            \"SCRUBBER.POINTER_MOVE\": [\n              {\n                guard: \"isIncrementHint\",\n                actions: [\"increment\", \"setCursorPoint\"]\n              },\n              {\n                guard: \"isDecrementHint\",\n                actions: [\"decrement\", \"setCursorPoint\"]\n              }\n            ]\n          }\n        }\n      }\n    },\n    {\n      delays: {\n        CHANGE_INTERVAL: 50,\n        CHANGE_DELAY: 300\n      },\n      guards: {\n        clampValueOnBlur: (ctx2) => ctx2.clampValueOnBlur,\n        isAtMin: (ctx2) => ctx2.isAtMin,\n        spinOnPress: (ctx2) => !!ctx2.spinOnPress,\n        isAtMax: (ctx2) => ctx2.isAtMax,\n        isInRange: (ctx2) => !ctx2.isOutOfRange,\n        isDecrementHint: (ctx2, evt) => (evt.hint ?? ctx2.hint) === \"decrement\",\n        isIncrementHint: (ctx2, evt) => (evt.hint ?? ctx2.hint) === \"increment\",\n        isTouchPointer: (_ctx, evt) => evt.pointerType === \"touch\"\n      },\n      activities: {\n        trackFormControl(ctx2, _evt, { initialContext }) {\n          const inputEl = dom.getInputEl(ctx2);\n          return trackFormControl(inputEl, {\n            onFieldsetDisabledChange(disabled) {\n              ctx2.fieldsetDisabled = disabled;\n            },\n            onFormReset() {\n              set.value(ctx2, initialContext.value);\n            }\n          });\n        },\n        setupVirtualCursor(ctx2) {\n          return dom.setupVirtualCursor(ctx2);\n        },\n        preventTextSelection(ctx2) {\n          return dom.preventTextSelection(ctx2);\n        },\n        trackButtonDisabled(ctx2, _evt, { send }) {\n          const btn = dom.getPressedTriggerEl(ctx2, ctx2.hint);\n          return observeAttributes(btn, {\n            attributes: [\"disabled\"],\n            callback() {\n              send({ type: \"TRIGGER.PRESS_UP\", src: \"attr\" });\n            }\n          });\n        },\n        attachWheelListener(ctx2, _evt, { send }) {\n          const inputEl = dom.getInputEl(ctx2);\n          if (!inputEl || !dom.isActiveElement(ctx2, inputEl) || !ctx2.allowMouseWheel) return;\n          function onWheel(event) {\n            event.preventDefault();\n            const dir = Math.sign(event.deltaY) * -1;\n            if (dir === 1) {\n              send(\"VALUE.INCREMENT\");\n            } else if (dir === -1) {\n              send(\"VALUE.DECREMENT\");\n            }\n          }\n          return addDomEvent(inputEl, \"wheel\", onWheel, { passive: false });\n        },\n        activatePointerLock(ctx2) {\n          if (isSafari()) return;\n          return requestPointerLock(dom.getDoc(ctx2));\n        },\n        trackMousemove(ctx2, _evt, { send }) {\n          const doc = dom.getDoc(ctx2);\n          function onMousemove(event) {\n            if (!ctx2.scrubberCursorPoint) return;\n            const value = dom.getMousemoveValue(ctx2, event);\n            if (!value.hint) return;\n            send({\n              type: \"SCRUBBER.POINTER_MOVE\",\n              hint: value.hint,\n              point: value.point\n            });\n          }\n          function onMouseup() {\n            send(\"SCRUBBER.POINTER_UP\");\n          }\n          return callAll(\n            addDomEvent(doc, \"mousemove\", onMousemove, false),\n            addDomEvent(doc, \"mouseup\", onMouseup, false)\n          );\n        }\n      },\n      actions: {\n        focusInput(ctx2) {\n          if (!ctx2.focusInputOnChange) return;\n          const inputEl = dom.getInputEl(ctx2);\n          if (dom.isActiveElement(ctx2, inputEl)) return;\n          raf(() => inputEl?.focus({ preventScroll: true }));\n        },\n        increment(ctx2, evt) {\n          const nextValue = incrementValue(ctx2.valueAsNumber, evt.step ?? ctx2.step);\n          const value = formatValue(ctx2, clampValue(nextValue, ctx2.min, ctx2.max));\n          set.value(ctx2, value);\n        },\n        decrement(ctx2, evt) {\n          const nextValue = decrementValue(ctx2.valueAsNumber, evt.step ?? ctx2.step);\n          const value = formatValue(ctx2, clampValue(nextValue, ctx2.min, ctx2.max));\n          set.value(ctx2, value);\n        },\n        setClampedValue(ctx2) {\n          const nextValue = clampValue(ctx2.valueAsNumber, ctx2.min, ctx2.max);\n          set.value(ctx2, formatValue(ctx2, nextValue));\n        },\n        setRawValue(ctx2, evt) {\n          const parsedValue = parseValue(ctx2, evt.value);\n          const value = formatValue(ctx2, clampValue(parsedValue, ctx2.min, ctx2.max));\n          set.value(ctx2, value);\n        },\n        setValue(ctx2, evt) {\n          const value = evt.target?.value ?? evt.value;\n          set.value(ctx2, value);\n        },\n        clearValue(ctx2) {\n          set.value(ctx2, \"\");\n        },\n        incrementToMax(ctx2) {\n          const value = formatValue(ctx2, ctx2.max);\n          set.value(ctx2, value);\n        },\n        decrementToMin(ctx2) {\n          const value = formatValue(ctx2, ctx2.min);\n          set.value(ctx2, value);\n        },\n        setHint(ctx2, evt) {\n          ctx2.hint = evt.hint;\n        },\n        clearHint(ctx2) {\n          ctx2.hint = null;\n        },\n        setHintToSet(ctx2) {\n          ctx2.hint = \"set\";\n        },\n        invokeOnFocus(ctx2) {\n          ctx2.onFocusChange?.({\n            focused: true,\n            value: ctx2.formattedValue,\n            valueAsNumber: ctx2.valueAsNumber\n          });\n        },\n        invokeOnBlur(ctx2) {\n          ctx2.onFocusChange?.({\n            focused: false,\n            value: ctx2.formattedValue,\n            valueAsNumber: ctx2.valueAsNumber\n          });\n        },\n        invokeOnInvalid(ctx2) {\n          if (!ctx2.isOutOfRange) return;\n          const reason = ctx2.valueAsNumber > ctx2.max ? \"rangeOverflow\" : \"rangeUnderflow\";\n          ctx2.onValueInvalid?.({\n            reason,\n            value: ctx2.formattedValue,\n            valueAsNumber: ctx2.valueAsNumber\n          });\n        },\n        syncInputElement(ctx2, evt) {\n          const value = evt.type.endsWith(\"CHANGE\") ? ctx2.value : ctx2.formattedValue;\n          sync.input(ctx2, value);\n        },\n        setFormattedValue(ctx2) {\n          set.value(ctx2, ctx2.formattedValue);\n        },\n        setCursorPoint(ctx2, evt) {\n          ctx2.scrubberCursorPoint = evt.point;\n        },\n        clearCursorPoint(ctx2) {\n          ctx2.scrubberCursorPoint = null;\n        },\n        setVirtualCursorPosition(ctx2) {\n          const cursorEl = dom.getCursorEl(ctx2);\n          if (!cursorEl || !ctx2.scrubberCursorPoint) return;\n          const { x, y } = ctx2.scrubberCursorPoint;\n          cursorEl.style.transform = `translate3d(${x}px, ${y}px, 0px)`;\n        },\n        setFormatterAndParser(ctx2) {\n          if (!ctx2.locale) return;\n          ctx2.formatter = createFormatter(ctx2.locale, ctx2.formatOptions);\n          ctx2.parser = createParser(ctx2.locale, ctx2.formatOptions);\n        }\n      },\n      compareFns: {\n        formatOptions: (a, b) => isEqual(a, b),\n        scrubberCursorPoint: (a, b) => isEqual(a, b)\n      }\n    }\n  );\n}\nvar sync = {\n  input(ctx, value) {\n    const inputEl = dom.getInputEl(ctx);\n    if (!inputEl) return;\n    const sel = recordCursor(inputEl);\n    raf(() => {\n      setElementValue(inputEl, value);\n      restoreCursor(inputEl, sel);\n    });\n  }\n};\nvar invoke = {\n  onChange: (ctx) => {\n    ctx.onValueChange?.({\n      value: ctx.value,\n      valueAsNumber: ctx.valueAsNumber\n    });\n  }\n};\nvar set = {\n  value: (ctx, value) => {\n    if (isEqual(ctx.value, value)) return;\n    ctx.value = value;\n    invoke.onChange(ctx);\n  }\n};\n\nexport { anatomy, connect, machine };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}