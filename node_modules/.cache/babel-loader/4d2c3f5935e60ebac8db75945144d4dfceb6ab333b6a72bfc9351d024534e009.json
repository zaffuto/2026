{"ast":null,"code":"import { createAnatomy } from '@zag-js/anatomy';\nimport { createScope, dataAttr, isSelfTarget, contains, visuallyHiddenStyle, addDomEvent, raf, getEventTarget } from '@zag-js/dom-query';\nimport { formatBytes } from '@zag-js/i18n-utils';\nimport { createProps } from '@zag-js/types';\nimport { getAcceptAttrString, isFileEqual, isValidFileType, isValidFileSize } from '@zag-js/file-utils';\nimport { createMachine, ref } from '@zag-js/core';\nimport { createSplitProps, compact, callAll } from '@zag-js/utils';\n\n// src/file-upload.anatomy.ts\nvar anatomy = createAnatomy(\"file-upload\").parts(\"root\", \"dropzone\", \"item\", \"itemDeleteTrigger\", \"itemGroup\", \"itemName\", \"itemPreview\", \"itemPreviewImage\", \"itemSizeText\", \"label\", \"trigger\", \"clearTrigger\");\nvar parts = anatomy.build();\nvar dom = createScope({\n  getRootId: ctx => ctx.ids?.root ?? `file:${ctx.id}`,\n  getDropzoneId: ctx => ctx.ids?.dropzone ?? `file:${ctx.id}:dropzone`,\n  getHiddenInputId: ctx => ctx.ids?.hiddenInput ?? `file:${ctx.id}:input`,\n  getTriggerId: ctx => ctx.ids?.trigger ?? `file:${ctx.id}:trigger`,\n  getLabelId: ctx => ctx.ids?.label ?? `file:${ctx.id}:label`,\n  getItemId: (ctx, id) => ctx.ids?.item?.(id) ?? `file:${ctx.id}:item:${id}`,\n  getItemNameId: (ctx, id) => ctx.ids?.itemName?.(id) ?? `file:${ctx.id}:item-name:${id}`,\n  getItemSizeTextId: (ctx, id) => ctx.ids?.itemSizeText?.(id) ?? `file:${ctx.id}:item-size:${id}`,\n  getItemPreviewId: (ctx, id) => ctx.ids?.itemPreview?.(id) ?? `file:${ctx.id}:item-preview:${id}`,\n  getRootEl: ctx => dom.getById(ctx, dom.getRootId(ctx)),\n  getHiddenInputEl: ctx => dom.getById(ctx, dom.getHiddenInputId(ctx)),\n  getDropzoneEl: ctx => dom.getById(ctx, dom.getDropzoneId(ctx))\n});\nfunction isEventWithFiles(event) {\n  const target = getEventTarget(event);\n  if (!event.dataTransfer) return !!target && \"files\" in target;\n  return event.dataTransfer.types.some(type => {\n    return type === \"Files\" || type === \"application/x-moz-file\";\n  });\n}\nfunction isFilesWithinRange(ctx, incomingCount) {\n  if (!ctx.multiple && incomingCount > 1) return false;\n  if (!ctx.multiple && incomingCount + ctx.acceptedFiles.length === 2) return true;\n  if (incomingCount + ctx.acceptedFiles.length > ctx.maxFiles) return false;\n  return true;\n}\nfunction getFilesFromEvent(ctx, files) {\n  const acceptedFiles = [];\n  const rejectedFiles = [];\n  files.forEach(file => {\n    const [accepted, acceptError] = isValidFileType(file, ctx.acceptAttr);\n    const [sizeMatch, sizeError] = isValidFileSize(file, ctx.minFileSize, ctx.maxFileSize);\n    const validateErrors = ctx.validate?.(file, {\n      acceptedFiles: ctx.acceptedFiles,\n      rejectedFiles: ctx.rejectedFiles\n    });\n    const valid = validateErrors ? validateErrors.length === 0 : true;\n    if (accepted && sizeMatch && valid) {\n      acceptedFiles.push(file);\n    } else {\n      const errors = [acceptError, sizeError];\n      if (!valid) errors.push(...(validateErrors ?? []));\n      rejectedFiles.push({\n        file,\n        errors: errors.filter(Boolean)\n      });\n    }\n  });\n  if (!isFilesWithinRange(ctx, acceptedFiles.length)) {\n    acceptedFiles.forEach(file => {\n      rejectedFiles.push({\n        file,\n        errors: [\"TOO_MANY_FILES\"]\n      });\n    });\n    acceptedFiles.splice(0);\n  }\n  return {\n    acceptedFiles,\n    rejectedFiles\n  };\n}\n\n// src/file-upload.connect.ts\nfunction connect(state, send, normalize) {\n  const disabled = state.context.disabled;\n  const allowDrop = state.context.allowDrop;\n  const translations = state.context.translations;\n  const dragging = state.matches(\"dragging\");\n  const focused = state.matches(\"focused\") && !disabled;\n  return {\n    dragging,\n    focused,\n    disabled: !!disabled,\n    openFilePicker() {\n      if (disabled) return;\n      send(\"OPEN\");\n    },\n    deleteFile(file) {\n      send({\n        type: \"FILE.DELETE\",\n        file\n      });\n    },\n    acceptedFiles: state.context.acceptedFiles,\n    rejectedFiles: state.context.rejectedFiles,\n    setFiles(files) {\n      const count = files.length;\n      send({\n        type: \"FILES.SET\",\n        files,\n        count\n      });\n    },\n    clearRejectedFiles() {\n      send({\n        type: \"REJECTED_FILES.CLEAR\"\n      });\n    },\n    clearFiles() {\n      send({\n        type: \"FILES.CLEAR\"\n      });\n    },\n    getFileSize(file) {\n      return formatBytes(file.size, state.context.locale);\n    },\n    createFileUrl(file, cb) {\n      const win = dom.getWin(state.context);\n      const url = win.URL.createObjectURL(file);\n      cb(url);\n      return () => win.URL.revokeObjectURL(url);\n    },\n    setClipboardFiles(dt) {\n      if (disabled) return false;\n      const items = Array.from(dt?.items ?? []);\n      const files = items.reduce((acc, item) => {\n        if (item.kind !== \"file\") return acc;\n        const file = item.getAsFile();\n        if (!file) return acc;\n        return [...acc, file];\n      }, []);\n      if (!files.length) return false;\n      send({\n        type: \"FILES.SET\",\n        files\n      });\n      return true;\n    },\n    getRootProps() {\n      return normalize.element({\n        ...parts.root.attrs,\n        dir: state.context.dir,\n        id: dom.getRootId(state.context),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-dragging\": dataAttr(dragging)\n      });\n    },\n    getDropzoneProps(props2 = {}) {\n      return normalize.element({\n        ...parts.dropzone.attrs,\n        dir: state.context.dir,\n        id: dom.getDropzoneId(state.context),\n        tabIndex: disabled || props2.disableClick ? void 0 : 0,\n        role: props2.disableClick ? \"application\" : \"button\",\n        \"aria-label\": translations.dropzone,\n        \"aria-disabled\": disabled,\n        \"data-invalid\": dataAttr(state.context.invalid),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-dragging\": dataAttr(dragging),\n        onKeyDown(event) {\n          if (disabled) return;\n          if (event.defaultPrevented) return;\n          if (!isSelfTarget(event)) return;\n          if (props2.disableClick) return;\n          if (event.key !== \"Enter\" && event.key !== \" \") return;\n          send({\n            type: \"DROPZONE.CLICK\",\n            src: \"keydown\"\n          });\n        },\n        onClick(event) {\n          if (disabled) return;\n          if (event.defaultPrevented) return;\n          if (props2.disableClick) return;\n          if (!isSelfTarget(event)) return;\n          if (event.currentTarget.localName === \"label\") {\n            event.preventDefault();\n          }\n          send(\"DROPZONE.CLICK\");\n        },\n        onDragOver(event) {\n          if (disabled) return;\n          if (!allowDrop) return;\n          event.preventDefault();\n          event.stopPropagation();\n          try {\n            event.dataTransfer.dropEffect = \"copy\";\n          } catch {}\n          const hasFiles = isEventWithFiles(event);\n          if (!hasFiles) return;\n          const count = event.dataTransfer.items.length;\n          send({\n            type: \"DROPZONE.DRAG_OVER\",\n            count\n          });\n        },\n        onDragLeave(event) {\n          if (disabled) return;\n          if (!allowDrop) return;\n          if (contains(event.currentTarget, event.relatedTarget)) return;\n          send({\n            type: \"DROPZONE.DRAG_LEAVE\"\n          });\n        },\n        onDrop(event) {\n          if (disabled) return;\n          if (allowDrop) {\n            event.preventDefault();\n            event.stopPropagation();\n          }\n          const hasFiles = isEventWithFiles(event);\n          if (disabled || !hasFiles) return;\n          send({\n            type: \"DROPZONE.DROP\",\n            files: Array.from(event.dataTransfer.files)\n          });\n        },\n        onFocus() {\n          if (disabled) return;\n          send(\"DROPZONE.FOCUS\");\n        },\n        onBlur() {\n          if (disabled) return;\n          send(\"DROPZONE.BLUR\");\n        }\n      });\n    },\n    getTriggerProps() {\n      return normalize.button({\n        ...parts.trigger.attrs,\n        dir: state.context.dir,\n        id: dom.getTriggerId(state.context),\n        disabled,\n        \"data-disabled\": dataAttr(disabled),\n        \"data-invalid\": dataAttr(state.context.invalid),\n        type: \"button\",\n        onClick(event) {\n          if (disabled) return;\n          if (contains(dom.getDropzoneEl(state.context), event.currentTarget)) {\n            event.stopPropagation();\n          }\n          send(\"OPEN\");\n        }\n      });\n    },\n    getHiddenInputProps() {\n      return normalize.input({\n        id: dom.getHiddenInputId(state.context),\n        tabIndex: -1,\n        disabled,\n        type: \"file\",\n        required: state.context.required,\n        capture: state.context.capture,\n        name: state.context.name,\n        accept: state.context.acceptAttr,\n        webkitdirectory: state.context.directory ? \"\" : void 0,\n        multiple: state.context.multiple || state.context.maxFiles > 1,\n        onClick(event) {\n          event.stopPropagation();\n          event.currentTarget.value = \"\";\n        },\n        onInput(event) {\n          if (disabled) return;\n          const {\n            files\n          } = event.currentTarget;\n          send({\n            type: \"FILES.SET\",\n            files: files ? Array.from(files) : []\n          });\n        },\n        style: visuallyHiddenStyle\n      });\n    },\n    getItemGroupProps() {\n      return normalize.element({\n        ...parts.itemGroup.attrs,\n        dir: state.context.dir,\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemProps(props2) {\n      const {\n        file\n      } = props2;\n      return normalize.element({\n        ...parts.item.attrs,\n        dir: state.context.dir,\n        id: dom.getItemId(state.context, file.name),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemNameProps(props2) {\n      const {\n        file\n      } = props2;\n      return normalize.element({\n        ...parts.itemName.attrs,\n        dir: state.context.dir,\n        id: dom.getItemNameId(state.context, file.name),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemSizeTextProps(props2) {\n      const {\n        file\n      } = props2;\n      return normalize.element({\n        ...parts.itemSizeText.attrs,\n        dir: state.context.dir,\n        id: dom.getItemSizeTextId(state.context, file.name),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemPreviewProps(props2) {\n      const {\n        file\n      } = props2;\n      return normalize.element({\n        ...parts.itemPreview.attrs,\n        dir: state.context.dir,\n        id: dom.getItemPreviewId(state.context, file.name),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemPreviewImageProps(props2) {\n      const {\n        file,\n        url\n      } = props2;\n      const isImage = file.type.startsWith(\"image/\");\n      if (!isImage) {\n        throw new Error(\"Preview Image is only supported for image files\");\n      }\n      return normalize.img({\n        ...parts.itemPreviewImage.attrs,\n        alt: translations.itemPreview?.(file),\n        src: url,\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemDeleteTriggerProps(props2) {\n      const {\n        file\n      } = props2;\n      return normalize.button({\n        ...parts.itemDeleteTrigger.attrs,\n        dir: state.context.dir,\n        type: \"button\",\n        disabled,\n        \"data-disabled\": dataAttr(disabled),\n        \"aria-label\": translations.deleteFile?.(file),\n        onClick() {\n          if (disabled) return;\n          send({\n            type: \"FILE.DELETE\",\n            file\n          });\n        }\n      });\n    },\n    getLabelProps() {\n      return normalize.label({\n        ...parts.label.attrs,\n        dir: state.context.dir,\n        id: dom.getLabelId(state.context),\n        htmlFor: dom.getHiddenInputId(state.context),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getClearTriggerProps() {\n      return normalize.button({\n        ...parts.clearTrigger.attrs,\n        dir: state.context.dir,\n        type: \"button\",\n        disabled,\n        hidden: state.context.acceptedFiles.length === 0,\n        \"data-disabled\": dataAttr(disabled),\n        onClick(event) {\n          if (event.defaultPrevented) return;\n          if (disabled) return;\n          send({\n            type: \"FILES.CLEAR\"\n          });\n        }\n      });\n    }\n  };\n}\nfunction machine(userContext) {\n  const ctx = compact(userContext);\n  return createMachine({\n    id: \"fileupload\",\n    initial: \"idle\",\n    context: {\n      minFileSize: 0,\n      maxFileSize: Number.POSITIVE_INFINITY,\n      maxFiles: 1,\n      allowDrop: true,\n      accept: ctx.accept,\n      preventDocumentDrop: true,\n      ...ctx,\n      acceptedFiles: ref([]),\n      rejectedFiles: ref([]),\n      translations: {\n        dropzone: \"dropzone\",\n        itemPreview: file => `preview of ${file.name}`,\n        deleteFile: file => `delete file ${file.name}`,\n        ...ctx.translations\n      }\n    },\n    computed: {\n      acceptAttr: ctx2 => getAcceptAttrString(ctx2.accept),\n      multiple: ctx2 => ctx2.maxFiles > 1\n    },\n    watch: {\n      acceptedFiles: [\"syncInputElement\"]\n    },\n    on: {\n      \"FILES.SET\": {\n        actions: [\"setFilesFromEvent\"]\n      },\n      \"FILE.DELETE\": {\n        actions: [\"removeFile\"]\n      },\n      \"FILES.CLEAR\": {\n        actions: [\"clearFiles\"]\n      },\n      \"REJECTED_FILES.CLEAR\": {\n        actions: [\"clearRejectedFiles\"]\n      }\n    },\n    activities: [\"preventDocumentDrop\"],\n    states: {\n      idle: {\n        on: {\n          OPEN: {\n            actions: [\"openFilePicker\"]\n          },\n          \"DROPZONE.CLICK\": {\n            actions: [\"openFilePicker\"]\n          },\n          \"DROPZONE.FOCUS\": \"focused\",\n          \"DROPZONE.DRAG_OVER\": \"dragging\"\n        }\n      },\n      focused: {\n        on: {\n          \"DROPZONE.BLUR\": \"idle\",\n          OPEN: {\n            actions: [\"openFilePicker\"]\n          },\n          \"DROPZONE.CLICK\": {\n            actions: [\"openFilePicker\"]\n          },\n          \"DROPZONE.DRAG_OVER\": \"dragging\"\n        }\n      },\n      dragging: {\n        on: {\n          \"DROPZONE.DROP\": {\n            target: \"idle\",\n            actions: [\"setFilesFromEvent\"]\n          },\n          \"DROPZONE.DRAG_LEAVE\": \"idle\"\n        }\n      }\n    }\n  }, {\n    activities: {\n      preventDocumentDrop(ctx2) {\n        if (!ctx2.preventDocumentDrop) return;\n        if (!ctx2.allowDrop) return;\n        if (ctx2.disabled) return;\n        const doc = dom.getDoc(ctx2);\n        const onDragOver = event => {\n          event?.preventDefault();\n        };\n        const onDrop = event => {\n          if (contains(dom.getRootEl(ctx2), getEventTarget(event))) return;\n          event.preventDefault();\n        };\n        return callAll(addDomEvent(doc, \"dragover\", onDragOver, false), addDomEvent(doc, \"drop\", onDrop, false));\n      }\n    },\n    actions: {\n      syncInputElement(ctx2) {\n        queueMicrotask(() => {\n          const inputEl = dom.getHiddenInputEl(ctx2);\n          if (!inputEl) return;\n          const win = dom.getWin(ctx2);\n          const dataTransfer = new win.DataTransfer();\n          ctx2.acceptedFiles.forEach(v => {\n            dataTransfer.items.add(v);\n          });\n          inputEl.files = dataTransfer.files;\n          inputEl.dispatchEvent(new win.Event(\"change\", {\n            bubbles: true\n          }));\n        });\n      },\n      openFilePicker(ctx2) {\n        raf(() => {\n          dom.getHiddenInputEl(ctx2)?.click();\n        });\n      },\n      setFilesFromEvent(ctx2, evt) {\n        const result = getFilesFromEvent(ctx2, evt.files);\n        const {\n          acceptedFiles,\n          rejectedFiles\n        } = result;\n        if (ctx2.multiple) {\n          const files = ref([...ctx2.acceptedFiles, ...acceptedFiles]);\n          set.files(ctx2, files, rejectedFiles);\n          return;\n        }\n        if (acceptedFiles.length) {\n          const files = ref([acceptedFiles[0]]);\n          set.files(ctx2, files, rejectedFiles);\n        } else if (rejectedFiles.length) {\n          set.files(ctx2, ctx2.acceptedFiles, rejectedFiles);\n        }\n      },\n      removeFile(ctx2, evt) {\n        const files = Array.from(ctx2.acceptedFiles.filter(file => file !== evt.file));\n        const rejectedFiles = Array.from(ctx2.rejectedFiles.filter(item => item.file !== evt.file));\n        ctx2.acceptedFiles = ref(files);\n        ctx2.rejectedFiles = ref(rejectedFiles);\n        invoke.change(ctx2);\n      },\n      clearRejectedFiles(ctx2) {\n        ctx2.rejectedFiles = ref([]);\n        invoke.change(ctx2);\n      },\n      clearFiles(ctx2) {\n        ctx2.acceptedFiles = ref([]);\n        ctx2.rejectedFiles = ref([]);\n        invoke.change(ctx2);\n      }\n    },\n    compareFns: {\n      acceptedFiles: (a, b) => a.length === b.length && a.every((file, i) => isFileEqual(file, b[i]))\n    }\n  });\n}\nvar invoke = {\n  change: ctx => {\n    ctx.onFileChange?.({\n      acceptedFiles: ctx.acceptedFiles,\n      rejectedFiles: ctx.rejectedFiles\n    });\n  },\n  accept: ctx => {\n    ctx.onFileAccept?.({\n      files: ctx.acceptedFiles\n    });\n  },\n  reject: ctx => {\n    ctx.onFileReject?.({\n      files: ctx.rejectedFiles\n    });\n  }\n};\nvar set = {\n  files: (ctx, acceptedFiles, rejectedFiles) => {\n    ctx.acceptedFiles = ref(acceptedFiles);\n    invoke.accept(ctx);\n    if (rejectedFiles) {\n      ctx.rejectedFiles = ref(rejectedFiles);\n      invoke.reject(ctx);\n    }\n    invoke.change(ctx);\n  }\n};\nvar props = createProps()([\"accept\", \"allowDrop\", \"capture\", \"dir\", \"directory\", \"disabled\", \"getRootNode\", \"id\", \"ids\", \"locale\", \"maxFiles\", \"maxFileSize\", \"minFileSize\", \"name\", \"invalid\", \"onFileAccept\", \"onFileReject\", \"onFileChange\", \"preventDocumentDrop\", \"required\", \"translations\", \"validate\"]);\nvar splitProps = createSplitProps(props);\nvar itemProps = createProps()([\"file\"]);\nvar splitItemProps = createSplitProps(itemProps);\nexport { anatomy, connect, itemProps, machine, props, splitItemProps, splitProps };","map":{"version":3,"names":["createAnatomy","createScope","dataAttr","isSelfTarget","contains","visuallyHiddenStyle","addDomEvent","raf","getEventTarget","formatBytes","createProps","getAcceptAttrString","isFileEqual","isValidFileType","isValidFileSize","createMachine","ref","createSplitProps","compact","callAll","anatomy","parts","build","dom","getRootId","ctx","ids","root","id","getDropzoneId","dropzone","getHiddenInputId","hiddenInput","getTriggerId","trigger","getLabelId","label","getItemId","item","getItemNameId","itemName","getItemSizeTextId","itemSizeText","getItemPreviewId","itemPreview","getRootEl","getById","getHiddenInputEl","getDropzoneEl","isEventWithFiles","event","target","dataTransfer","types","some","type","isFilesWithinRange","incomingCount","multiple","acceptedFiles","length","maxFiles","getFilesFromEvent","files","rejectedFiles","forEach","file","accepted","acceptError","acceptAttr","sizeMatch","sizeError","minFileSize","maxFileSize","validateErrors","validate","valid","push","errors","filter","Boolean","splice","connect","state","send","normalize","disabled","context","allowDrop","translations","dragging","matches","focused","openFilePicker","deleteFile","setFiles","count","clearRejectedFiles","clearFiles","getFileSize","size","locale","createFileUrl","cb","win","getWin","url","URL","createObjectURL","revokeObjectURL","setClipboardFiles","dt","items","Array","from","reduce","acc","kind","getAsFile","getRootProps","element","attrs","dir","getDropzoneProps","props2","tabIndex","disableClick","role","invalid","onKeyDown","defaultPrevented","key","src","onClick","currentTarget","localName","preventDefault","onDragOver","stopPropagation","dropEffect","hasFiles","onDragLeave","relatedTarget","onDrop","onFocus","onBlur","getTriggerProps","button","getHiddenInputProps","input","required","capture","name","accept","webkitdirectory","directory","value","onInput","style","getItemGroupProps","itemGroup","getItemProps","getItemNameProps","getItemSizeTextProps","getItemPreviewProps","getItemPreviewImageProps","isImage","startsWith","Error","img","itemPreviewImage","alt","getItemDeleteTriggerProps","itemDeleteTrigger","getLabelProps","htmlFor","getClearTriggerProps","clearTrigger","hidden","machine","userContext","initial","Number","POSITIVE_INFINITY","preventDocumentDrop","computed","ctx2","watch","on","actions","activities","states","idle","OPEN","doc","getDoc","syncInputElement","queueMicrotask","inputEl","DataTransfer","v","add","dispatchEvent","Event","bubbles","click","setFilesFromEvent","evt","result","set","removeFile","invoke","change","compareFns","a","b","every","i","onFileChange","onFileAccept","reject","onFileReject","props","splitProps","itemProps","splitItemProps"],"sources":["/Users/macbook/developer/2025/2026/node_modules/@zag-js/file-upload/dist/index.mjs"],"sourcesContent":["import { createAnatomy } from '@zag-js/anatomy';\nimport { createScope, dataAttr, isSelfTarget, contains, visuallyHiddenStyle, addDomEvent, raf, getEventTarget } from '@zag-js/dom-query';\nimport { formatBytes } from '@zag-js/i18n-utils';\nimport { createProps } from '@zag-js/types';\nimport { getAcceptAttrString, isFileEqual, isValidFileType, isValidFileSize } from '@zag-js/file-utils';\nimport { createMachine, ref } from '@zag-js/core';\nimport { createSplitProps, compact, callAll } from '@zag-js/utils';\n\n// src/file-upload.anatomy.ts\nvar anatomy = createAnatomy(\"file-upload\").parts(\n  \"root\",\n  \"dropzone\",\n  \"item\",\n  \"itemDeleteTrigger\",\n  \"itemGroup\",\n  \"itemName\",\n  \"itemPreview\",\n  \"itemPreviewImage\",\n  \"itemSizeText\",\n  \"label\",\n  \"trigger\",\n  \"clearTrigger\"\n);\nvar parts = anatomy.build();\nvar dom = createScope({\n  getRootId: (ctx) => ctx.ids?.root ?? `file:${ctx.id}`,\n  getDropzoneId: (ctx) => ctx.ids?.dropzone ?? `file:${ctx.id}:dropzone`,\n  getHiddenInputId: (ctx) => ctx.ids?.hiddenInput ?? `file:${ctx.id}:input`,\n  getTriggerId: (ctx) => ctx.ids?.trigger ?? `file:${ctx.id}:trigger`,\n  getLabelId: (ctx) => ctx.ids?.label ?? `file:${ctx.id}:label`,\n  getItemId: (ctx, id) => ctx.ids?.item?.(id) ?? `file:${ctx.id}:item:${id}`,\n  getItemNameId: (ctx, id) => ctx.ids?.itemName?.(id) ?? `file:${ctx.id}:item-name:${id}`,\n  getItemSizeTextId: (ctx, id) => ctx.ids?.itemSizeText?.(id) ?? `file:${ctx.id}:item-size:${id}`,\n  getItemPreviewId: (ctx, id) => ctx.ids?.itemPreview?.(id) ?? `file:${ctx.id}:item-preview:${id}`,\n  getRootEl: (ctx) => dom.getById(ctx, dom.getRootId(ctx)),\n  getHiddenInputEl: (ctx) => dom.getById(ctx, dom.getHiddenInputId(ctx)),\n  getDropzoneEl: (ctx) => dom.getById(ctx, dom.getDropzoneId(ctx))\n});\nfunction isEventWithFiles(event) {\n  const target = getEventTarget(event);\n  if (!event.dataTransfer) return !!target && \"files\" in target;\n  return event.dataTransfer.types.some((type) => {\n    return type === \"Files\" || type === \"application/x-moz-file\";\n  });\n}\nfunction isFilesWithinRange(ctx, incomingCount) {\n  if (!ctx.multiple && incomingCount > 1) return false;\n  if (!ctx.multiple && incomingCount + ctx.acceptedFiles.length === 2) return true;\n  if (incomingCount + ctx.acceptedFiles.length > ctx.maxFiles) return false;\n  return true;\n}\nfunction getFilesFromEvent(ctx, files) {\n  const acceptedFiles = [];\n  const rejectedFiles = [];\n  files.forEach((file) => {\n    const [accepted, acceptError] = isValidFileType(file, ctx.acceptAttr);\n    const [sizeMatch, sizeError] = isValidFileSize(file, ctx.minFileSize, ctx.maxFileSize);\n    const validateErrors = ctx.validate?.(file, {\n      acceptedFiles: ctx.acceptedFiles,\n      rejectedFiles: ctx.rejectedFiles\n    });\n    const valid = validateErrors ? validateErrors.length === 0 : true;\n    if (accepted && sizeMatch && valid) {\n      acceptedFiles.push(file);\n    } else {\n      const errors = [acceptError, sizeError];\n      if (!valid) errors.push(...validateErrors ?? []);\n      rejectedFiles.push({ file, errors: errors.filter(Boolean) });\n    }\n  });\n  if (!isFilesWithinRange(ctx, acceptedFiles.length)) {\n    acceptedFiles.forEach((file) => {\n      rejectedFiles.push({ file, errors: [\"TOO_MANY_FILES\"] });\n    });\n    acceptedFiles.splice(0);\n  }\n  return {\n    acceptedFiles,\n    rejectedFiles\n  };\n}\n\n// src/file-upload.connect.ts\nfunction connect(state, send, normalize) {\n  const disabled = state.context.disabled;\n  const allowDrop = state.context.allowDrop;\n  const translations = state.context.translations;\n  const dragging = state.matches(\"dragging\");\n  const focused = state.matches(\"focused\") && !disabled;\n  return {\n    dragging,\n    focused,\n    disabled: !!disabled,\n    openFilePicker() {\n      if (disabled) return;\n      send(\"OPEN\");\n    },\n    deleteFile(file) {\n      send({ type: \"FILE.DELETE\", file });\n    },\n    acceptedFiles: state.context.acceptedFiles,\n    rejectedFiles: state.context.rejectedFiles,\n    setFiles(files) {\n      const count = files.length;\n      send({ type: \"FILES.SET\", files, count });\n    },\n    clearRejectedFiles() {\n      send({ type: \"REJECTED_FILES.CLEAR\" });\n    },\n    clearFiles() {\n      send({ type: \"FILES.CLEAR\" });\n    },\n    getFileSize(file) {\n      return formatBytes(file.size, state.context.locale);\n    },\n    createFileUrl(file, cb) {\n      const win = dom.getWin(state.context);\n      const url = win.URL.createObjectURL(file);\n      cb(url);\n      return () => win.URL.revokeObjectURL(url);\n    },\n    setClipboardFiles(dt) {\n      if (disabled) return false;\n      const items = Array.from(dt?.items ?? []);\n      const files = items.reduce((acc, item) => {\n        if (item.kind !== \"file\") return acc;\n        const file = item.getAsFile();\n        if (!file) return acc;\n        return [...acc, file];\n      }, []);\n      if (!files.length) return false;\n      send({ type: \"FILES.SET\", files });\n      return true;\n    },\n    getRootProps() {\n      return normalize.element({\n        ...parts.root.attrs,\n        dir: state.context.dir,\n        id: dom.getRootId(state.context),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-dragging\": dataAttr(dragging)\n      });\n    },\n    getDropzoneProps(props2 = {}) {\n      return normalize.element({\n        ...parts.dropzone.attrs,\n        dir: state.context.dir,\n        id: dom.getDropzoneId(state.context),\n        tabIndex: disabled || props2.disableClick ? void 0 : 0,\n        role: props2.disableClick ? \"application\" : \"button\",\n        \"aria-label\": translations.dropzone,\n        \"aria-disabled\": disabled,\n        \"data-invalid\": dataAttr(state.context.invalid),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-dragging\": dataAttr(dragging),\n        onKeyDown(event) {\n          if (disabled) return;\n          if (event.defaultPrevented) return;\n          if (!isSelfTarget(event)) return;\n          if (props2.disableClick) return;\n          if (event.key !== \"Enter\" && event.key !== \" \") return;\n          send({ type: \"DROPZONE.CLICK\", src: \"keydown\" });\n        },\n        onClick(event) {\n          if (disabled) return;\n          if (event.defaultPrevented) return;\n          if (props2.disableClick) return;\n          if (!isSelfTarget(event)) return;\n          if (event.currentTarget.localName === \"label\") {\n            event.preventDefault();\n          }\n          send(\"DROPZONE.CLICK\");\n        },\n        onDragOver(event) {\n          if (disabled) return;\n          if (!allowDrop) return;\n          event.preventDefault();\n          event.stopPropagation();\n          try {\n            event.dataTransfer.dropEffect = \"copy\";\n          } catch {\n          }\n          const hasFiles = isEventWithFiles(event);\n          if (!hasFiles) return;\n          const count = event.dataTransfer.items.length;\n          send({ type: \"DROPZONE.DRAG_OVER\", count });\n        },\n        onDragLeave(event) {\n          if (disabled) return;\n          if (!allowDrop) return;\n          if (contains(event.currentTarget, event.relatedTarget)) return;\n          send({ type: \"DROPZONE.DRAG_LEAVE\" });\n        },\n        onDrop(event) {\n          if (disabled) return;\n          if (allowDrop) {\n            event.preventDefault();\n            event.stopPropagation();\n          }\n          const hasFiles = isEventWithFiles(event);\n          if (disabled || !hasFiles) return;\n          send({ type: \"DROPZONE.DROP\", files: Array.from(event.dataTransfer.files) });\n        },\n        onFocus() {\n          if (disabled) return;\n          send(\"DROPZONE.FOCUS\");\n        },\n        onBlur() {\n          if (disabled) return;\n          send(\"DROPZONE.BLUR\");\n        }\n      });\n    },\n    getTriggerProps() {\n      return normalize.button({\n        ...parts.trigger.attrs,\n        dir: state.context.dir,\n        id: dom.getTriggerId(state.context),\n        disabled,\n        \"data-disabled\": dataAttr(disabled),\n        \"data-invalid\": dataAttr(state.context.invalid),\n        type: \"button\",\n        onClick(event) {\n          if (disabled) return;\n          if (contains(dom.getDropzoneEl(state.context), event.currentTarget)) {\n            event.stopPropagation();\n          }\n          send(\"OPEN\");\n        }\n      });\n    },\n    getHiddenInputProps() {\n      return normalize.input({\n        id: dom.getHiddenInputId(state.context),\n        tabIndex: -1,\n        disabled,\n        type: \"file\",\n        required: state.context.required,\n        capture: state.context.capture,\n        name: state.context.name,\n        accept: state.context.acceptAttr,\n        webkitdirectory: state.context.directory ? \"\" : void 0,\n        multiple: state.context.multiple || state.context.maxFiles > 1,\n        onClick(event) {\n          event.stopPropagation();\n          event.currentTarget.value = \"\";\n        },\n        onInput(event) {\n          if (disabled) return;\n          const { files } = event.currentTarget;\n          send({ type: \"FILES.SET\", files: files ? Array.from(files) : [] });\n        },\n        style: visuallyHiddenStyle\n      });\n    },\n    getItemGroupProps() {\n      return normalize.element({\n        ...parts.itemGroup.attrs,\n        dir: state.context.dir,\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemProps(props2) {\n      const { file } = props2;\n      return normalize.element({\n        ...parts.item.attrs,\n        dir: state.context.dir,\n        id: dom.getItemId(state.context, file.name),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemNameProps(props2) {\n      const { file } = props2;\n      return normalize.element({\n        ...parts.itemName.attrs,\n        dir: state.context.dir,\n        id: dom.getItemNameId(state.context, file.name),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemSizeTextProps(props2) {\n      const { file } = props2;\n      return normalize.element({\n        ...parts.itemSizeText.attrs,\n        dir: state.context.dir,\n        id: dom.getItemSizeTextId(state.context, file.name),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemPreviewProps(props2) {\n      const { file } = props2;\n      return normalize.element({\n        ...parts.itemPreview.attrs,\n        dir: state.context.dir,\n        id: dom.getItemPreviewId(state.context, file.name),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemPreviewImageProps(props2) {\n      const { file, url } = props2;\n      const isImage = file.type.startsWith(\"image/\");\n      if (!isImage) {\n        throw new Error(\"Preview Image is only supported for image files\");\n      }\n      return normalize.img({\n        ...parts.itemPreviewImage.attrs,\n        alt: translations.itemPreview?.(file),\n        src: url,\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemDeleteTriggerProps(props2) {\n      const { file } = props2;\n      return normalize.button({\n        ...parts.itemDeleteTrigger.attrs,\n        dir: state.context.dir,\n        type: \"button\",\n        disabled,\n        \"data-disabled\": dataAttr(disabled),\n        \"aria-label\": translations.deleteFile?.(file),\n        onClick() {\n          if (disabled) return;\n          send({ type: \"FILE.DELETE\", file });\n        }\n      });\n    },\n    getLabelProps() {\n      return normalize.label({\n        ...parts.label.attrs,\n        dir: state.context.dir,\n        id: dom.getLabelId(state.context),\n        htmlFor: dom.getHiddenInputId(state.context),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getClearTriggerProps() {\n      return normalize.button({\n        ...parts.clearTrigger.attrs,\n        dir: state.context.dir,\n        type: \"button\",\n        disabled,\n        hidden: state.context.acceptedFiles.length === 0,\n        \"data-disabled\": dataAttr(disabled),\n        onClick(event) {\n          if (event.defaultPrevented) return;\n          if (disabled) return;\n          send({ type: \"FILES.CLEAR\" });\n        }\n      });\n    }\n  };\n}\nfunction machine(userContext) {\n  const ctx = compact(userContext);\n  return createMachine(\n    {\n      id: \"fileupload\",\n      initial: \"idle\",\n      context: {\n        minFileSize: 0,\n        maxFileSize: Number.POSITIVE_INFINITY,\n        maxFiles: 1,\n        allowDrop: true,\n        accept: ctx.accept,\n        preventDocumentDrop: true,\n        ...ctx,\n        acceptedFiles: ref([]),\n        rejectedFiles: ref([]),\n        translations: {\n          dropzone: \"dropzone\",\n          itemPreview: (file) => `preview of ${file.name}`,\n          deleteFile: (file) => `delete file ${file.name}`,\n          ...ctx.translations\n        }\n      },\n      computed: {\n        acceptAttr: (ctx2) => getAcceptAttrString(ctx2.accept),\n        multiple: (ctx2) => ctx2.maxFiles > 1\n      },\n      watch: {\n        acceptedFiles: [\"syncInputElement\"]\n      },\n      on: {\n        \"FILES.SET\": {\n          actions: [\"setFilesFromEvent\"]\n        },\n        \"FILE.DELETE\": {\n          actions: [\"removeFile\"]\n        },\n        \"FILES.CLEAR\": {\n          actions: [\"clearFiles\"]\n        },\n        \"REJECTED_FILES.CLEAR\": {\n          actions: [\"clearRejectedFiles\"]\n        }\n      },\n      activities: [\"preventDocumentDrop\"],\n      states: {\n        idle: {\n          on: {\n            OPEN: {\n              actions: [\"openFilePicker\"]\n            },\n            \"DROPZONE.CLICK\": {\n              actions: [\"openFilePicker\"]\n            },\n            \"DROPZONE.FOCUS\": \"focused\",\n            \"DROPZONE.DRAG_OVER\": \"dragging\"\n          }\n        },\n        focused: {\n          on: {\n            \"DROPZONE.BLUR\": \"idle\",\n            OPEN: {\n              actions: [\"openFilePicker\"]\n            },\n            \"DROPZONE.CLICK\": {\n              actions: [\"openFilePicker\"]\n            },\n            \"DROPZONE.DRAG_OVER\": \"dragging\"\n          }\n        },\n        dragging: {\n          on: {\n            \"DROPZONE.DROP\": {\n              target: \"idle\",\n              actions: [\"setFilesFromEvent\"]\n            },\n            \"DROPZONE.DRAG_LEAVE\": \"idle\"\n          }\n        }\n      }\n    },\n    {\n      activities: {\n        preventDocumentDrop(ctx2) {\n          if (!ctx2.preventDocumentDrop) return;\n          if (!ctx2.allowDrop) return;\n          if (ctx2.disabled) return;\n          const doc = dom.getDoc(ctx2);\n          const onDragOver = (event) => {\n            event?.preventDefault();\n          };\n          const onDrop = (event) => {\n            if (contains(dom.getRootEl(ctx2), getEventTarget(event))) return;\n            event.preventDefault();\n          };\n          return callAll(addDomEvent(doc, \"dragover\", onDragOver, false), addDomEvent(doc, \"drop\", onDrop, false));\n        }\n      },\n      actions: {\n        syncInputElement(ctx2) {\n          queueMicrotask(() => {\n            const inputEl = dom.getHiddenInputEl(ctx2);\n            if (!inputEl) return;\n            const win = dom.getWin(ctx2);\n            const dataTransfer = new win.DataTransfer();\n            ctx2.acceptedFiles.forEach((v) => {\n              dataTransfer.items.add(v);\n            });\n            inputEl.files = dataTransfer.files;\n            inputEl.dispatchEvent(new win.Event(\"change\", { bubbles: true }));\n          });\n        },\n        openFilePicker(ctx2) {\n          raf(() => {\n            dom.getHiddenInputEl(ctx2)?.click();\n          });\n        },\n        setFilesFromEvent(ctx2, evt) {\n          const result = getFilesFromEvent(ctx2, evt.files);\n          const { acceptedFiles, rejectedFiles } = result;\n          if (ctx2.multiple) {\n            const files = ref([...ctx2.acceptedFiles, ...acceptedFiles]);\n            set.files(ctx2, files, rejectedFiles);\n            return;\n          }\n          if (acceptedFiles.length) {\n            const files = ref([acceptedFiles[0]]);\n            set.files(ctx2, files, rejectedFiles);\n          } else if (rejectedFiles.length) {\n            set.files(ctx2, ctx2.acceptedFiles, rejectedFiles);\n          }\n        },\n        removeFile(ctx2, evt) {\n          const files = Array.from(ctx2.acceptedFiles.filter((file) => file !== evt.file));\n          const rejectedFiles = Array.from(ctx2.rejectedFiles.filter((item) => item.file !== evt.file));\n          ctx2.acceptedFiles = ref(files);\n          ctx2.rejectedFiles = ref(rejectedFiles);\n          invoke.change(ctx2);\n        },\n        clearRejectedFiles(ctx2) {\n          ctx2.rejectedFiles = ref([]);\n          invoke.change(ctx2);\n        },\n        clearFiles(ctx2) {\n          ctx2.acceptedFiles = ref([]);\n          ctx2.rejectedFiles = ref([]);\n          invoke.change(ctx2);\n        }\n      },\n      compareFns: {\n        acceptedFiles: (a, b) => a.length === b.length && a.every((file, i) => isFileEqual(file, b[i]))\n      }\n    }\n  );\n}\nvar invoke = {\n  change: (ctx) => {\n    ctx.onFileChange?.({\n      acceptedFiles: ctx.acceptedFiles,\n      rejectedFiles: ctx.rejectedFiles\n    });\n  },\n  accept: (ctx) => {\n    ctx.onFileAccept?.({ files: ctx.acceptedFiles });\n  },\n  reject: (ctx) => {\n    ctx.onFileReject?.({ files: ctx.rejectedFiles });\n  }\n};\nvar set = {\n  files: (ctx, acceptedFiles, rejectedFiles) => {\n    ctx.acceptedFiles = ref(acceptedFiles);\n    invoke.accept(ctx);\n    if (rejectedFiles) {\n      ctx.rejectedFiles = ref(rejectedFiles);\n      invoke.reject(ctx);\n    }\n    invoke.change(ctx);\n  }\n};\nvar props = createProps()([\n  \"accept\",\n  \"allowDrop\",\n  \"capture\",\n  \"dir\",\n  \"directory\",\n  \"disabled\",\n  \"getRootNode\",\n  \"id\",\n  \"ids\",\n  \"locale\",\n  \"maxFiles\",\n  \"maxFileSize\",\n  \"minFileSize\",\n  \"name\",\n  \"invalid\",\n  \"onFileAccept\",\n  \"onFileReject\",\n  \"onFileChange\",\n  \"preventDocumentDrop\",\n  \"required\",\n  \"translations\",\n  \"validate\"\n]);\nvar splitProps = createSplitProps(props);\nvar itemProps = createProps()([\"file\"]);\nvar splitItemProps = createSplitProps(itemProps);\n\nexport { anatomy, connect, itemProps, machine, props, splitItemProps, splitProps };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}