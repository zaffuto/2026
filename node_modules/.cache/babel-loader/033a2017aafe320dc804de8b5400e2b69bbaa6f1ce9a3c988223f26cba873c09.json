{"ast":null,"code":"import { createMachine, subscribe, guards, ref, isMachine } from '@zag-js/core';\nimport { createScope, raf, queryAll, dataAttr, contains, addDomEvent, MAX_Z_INDEX } from '@zag-js/dom-query';\nimport { compact, warn, runIfFn, uuid } from '@zag-js/utils';\nimport { createAnatomy } from '@zag-js/anatomy';\nimport { trackDismissableBranch } from '@zag-js/dismissable';\n\n// src/toast-group.connect.ts\nvar anatomy = createAnatomy(\"toast\").parts(\"group\", \"root\", \"title\", \"description\", \"actionTrigger\", \"closeTrigger\");\nvar parts = anatomy.build();\nvar dom = createScope({\n  getRegionId: placement => `toast-group:${placement}`,\n  getRegionEl: (ctx, placement) => dom.getById(ctx, `toast-group:${placement}`),\n  getRootId: ctx => `toast:${ctx.id}`,\n  getRootEl: ctx => dom.getById(ctx, dom.getRootId(ctx)),\n  getTitleId: ctx => `toast:${ctx.id}:title`,\n  getDescriptionId: ctx => `toast:${ctx.id}:description`,\n  getCloseTriggerId: ctx => `toast${ctx.id}:close`\n});\nfunction getToastsByPlacement(toasts, placement) {\n  return toasts.filter(toast => toast.state.context.placement === placement);\n}\nvar defaultTimeouts = {\n  info: 5e3,\n  error: 5e3,\n  success: 2e3,\n  loading: Infinity,\n  DEFAULT: 5e3\n};\nfunction getToastDuration(duration, type) {\n  return duration ?? defaultTimeouts[type] ?? defaultTimeouts.DEFAULT;\n}\nfunction getGroupPlacementStyle(ctx, placement) {\n  const offset = ctx.offsets;\n  const computedOffset = typeof offset === \"string\" ? {\n    left: offset,\n    right: offset,\n    bottom: offset,\n    top: offset\n  } : offset;\n  const rtl = ctx.dir === \"rtl\";\n  const computedPlacement = placement.replace(\"-start\", rtl ? \"-right\" : \"-left\").replace(\"-end\", rtl ? \"-left\" : \"-right\");\n  const isRighty = computedPlacement.includes(\"right\");\n  const isLefty = computedPlacement.includes(\"left\");\n  const styles = {\n    position: \"fixed\",\n    pointerEvents: ctx.count > 0 ? void 0 : \"none\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    \"--gap\": `${ctx.gap}px`,\n    \"--first-height\": `${ctx.heights[0]?.height || 0}px`,\n    zIndex: MAX_Z_INDEX\n  };\n  let alignItems = \"center\";\n  if (isRighty) alignItems = \"flex-end\";\n  if (isLefty) alignItems = \"flex-start\";\n  styles.alignItems = alignItems;\n  if (computedPlacement.includes(\"top\")) {\n    const offset2 = computedOffset.top;\n    styles.top = `max(env(safe-area-inset-top, 0px), ${offset2})`;\n  }\n  if (computedPlacement.includes(\"bottom\")) {\n    const offset2 = computedOffset.bottom;\n    styles.bottom = `max(env(safe-area-inset-bottom, 0px), ${offset2})`;\n  }\n  if (!computedPlacement.includes(\"left\")) {\n    const offset2 = computedOffset.right;\n    styles.insetInlineEnd = `calc(env(safe-area-inset-right, 0px) + ${offset2})`;\n  }\n  if (!computedPlacement.includes(\"right\")) {\n    const offset2 = computedOffset.left;\n    styles.insetInlineStart = `calc(env(safe-area-inset-left, 0px) + ${offset2})`;\n  }\n  return styles;\n}\nfunction getPlacementStyle(ctx, visible) {\n  const [side] = ctx.placement.split(\"-\");\n  const sibling = !ctx.frontmost;\n  const overlap = !ctx.stacked;\n  const styles = {\n    position: \"absolute\",\n    pointerEvents: \"auto\",\n    \"--opacity\": \"0\",\n    \"--remove-delay\": `${ctx.removeDelay}ms`,\n    \"--duration\": `${ctx.type === \"loading\" ? Number.MAX_SAFE_INTEGER : ctx.duration}ms`,\n    \"--initial-height\": `${ctx.height}px`,\n    \"--offset\": `${ctx.offset}px`,\n    \"--index\": ctx.index,\n    \"--z-index\": ctx.zIndex,\n    \"--lift-amount\": \"calc(var(--lift) * var(--gap))\",\n    \"--y\": \"100%\",\n    \"--x\": \"0\"\n  };\n  const assign = overrides => Object.assign(styles, overrides);\n  if (side === \"top\") {\n    assign({\n      top: \"0\",\n      \"--sign\": \"-1\",\n      \"--y\": \"-100%\",\n      \"--lift\": \"1\"\n    });\n  } else if (side === \"bottom\") {\n    assign({\n      bottom: \"0\",\n      \"--sign\": \"1\",\n      \"--y\": \"100%\",\n      \"--lift\": \"-1\"\n    });\n  }\n  if (ctx.mounted) {\n    assign({\n      \"--y\": \"0\",\n      \"--opacity\": \"1\"\n    });\n    if (ctx.stacked) {\n      assign({\n        \"--y\": \"calc(var(--lift) * var(--offset))\",\n        \"--height\": \"var(--initial-height)\"\n      });\n    }\n  }\n  if (!visible) {\n    assign({\n      \"--opacity\": \"0\",\n      pointerEvents: \"none\"\n    });\n  }\n  if (sibling && overlap) {\n    assign({\n      \"--base-scale\": \"var(--index) * 0.05 + 1\",\n      \"--y\": \"calc(var(--lift-amount) * var(--index))\",\n      \"--scale\": \"calc(-1 * var(--base-scale))\",\n      \"--height\": \"var(--first-height)\"\n    });\n    if (!visible) {\n      assign({\n        \"--y\": \"calc(var(--sign) * 40%)\"\n      });\n    }\n  }\n  if (sibling && ctx.stacked && !visible) {\n    assign({\n      \"--y\": \"calc(var(--lift) * var(--offset) + var(--lift) * -100%)\"\n    });\n  }\n  if (ctx.frontmost && !visible) {\n    assign({\n      \"--y\": \"calc(var(--lift) * -100%)\"\n    });\n  }\n  return styles;\n}\nfunction getGhostBeforeStyle(ctx, visible) {\n  const styles = {\n    position: \"absolute\",\n    inset: \"0\",\n    scale: \"1 2\",\n    pointerEvents: visible ? \"none\" : \"auto\"\n  };\n  const assign = overrides => Object.assign(styles, overrides);\n  if (ctx.frontmost && !visible) {\n    assign({\n      height: \"calc(var(--initial-height) + 80%)\"\n    });\n  }\n  return styles;\n}\nfunction getGhostAfterStyle(_ctx, _visible) {\n  return {\n    position: \"absolute\",\n    left: \"0\",\n    height: \"calc(var(--gap) + 2px)\",\n    bottom: \"100%\",\n    width: \"100%\"\n  };\n}\n\n// src/toast-group.connect.ts\nfunction groupConnect(serviceOrState, send, normalize) {\n  function getState() {\n    const result = isMachine(serviceOrState) ? serviceOrState.getState() : serviceOrState;\n    return result;\n  }\n  function getToastsByPlacementImpl(placement) {\n    return getToastsByPlacement(getState().context.toasts, placement);\n  }\n  function isVisible(id) {\n    const toasts = getState().context.toasts;\n    if (!toasts.length) return false;\n    return !!toasts.find(toast => toast.id == id);\n  }\n  function create(options) {\n    const uid = `toast:${uuid()}`;\n    const id = options.id ? options.id : uid;\n    if (isVisible(id)) return id;\n    send({\n      type: \"ADD_TOAST\",\n      toast: {\n        ...options,\n        id\n      }\n    });\n    return id;\n  }\n  function update(id, options) {\n    if (!isVisible(id)) return id;\n    send({\n      type: \"UPDATE_TOAST\",\n      id,\n      toast: options\n    });\n    return id;\n  }\n  function upsert(options) {\n    const {\n      id\n    } = options;\n    const visible = id ? isVisible(id) : false;\n    if (visible && id != null) {\n      return update(id, options);\n    } else {\n      return create(options);\n    }\n  }\n  function dismiss(id) {\n    if (id == null) {\n      send(\"DISMISS_ALL\");\n    } else if (isVisible(id)) {\n      send({\n        type: \"DISMISS_TOAST\",\n        id\n      });\n    }\n  }\n  return {\n    getCount() {\n      return getState().context.count;\n    },\n    getPlacements() {\n      const toasts = getState().context.toasts;\n      const placements = toasts.map(toast => toast.state.context.placement);\n      return Array.from(new Set(placements));\n    },\n    getToastsByPlacement: getToastsByPlacementImpl,\n    isVisible,\n    create,\n    update,\n    upsert,\n    dismiss,\n    remove(id) {\n      if (id == null) {\n        send(\"REMOVE_ALL\");\n      } else if (isVisible(id)) {\n        send({\n          type: \"REMOVE_TOAST\",\n          id\n        });\n      }\n    },\n    dismissByPlacement(placement) {\n      const toasts = getToastsByPlacementImpl(placement);\n      toasts.forEach(toast => dismiss(toast.id));\n    },\n    loading(options) {\n      return upsert({\n        ...options,\n        type: \"loading\"\n      });\n    },\n    success(options) {\n      return upsert({\n        ...options,\n        type: \"success\"\n      });\n    },\n    error(options) {\n      return upsert({\n        ...options,\n        type: \"error\"\n      });\n    },\n    promise(promise, options, shared = {}) {\n      const id = upsert({\n        ...shared,\n        ...options.loading,\n        type: \"loading\"\n      });\n      runIfFn(promise).then(response => {\n        const successOptions = runIfFn(options.success, response);\n        upsert({\n          ...shared,\n          ...successOptions,\n          id,\n          type: \"success\"\n        });\n      }).catch(error => {\n        const errorOptions = runIfFn(options.error, error);\n        upsert({\n          ...shared,\n          ...errorOptions,\n          id,\n          type: \"error\"\n        });\n      }).finally(() => {\n        options.finally?.();\n      });\n      return id;\n    },\n    pause(id) {\n      if (id == null) {\n        send(\"PAUSE_ALL\");\n      } else if (isVisible(id)) {\n        send({\n          type: \"PAUSE_TOAST\",\n          id\n        });\n      }\n    },\n    resume(id) {\n      if (id == null) {\n        send(\"RESUME_ALL\");\n      } else if (isVisible(id)) {\n        send({\n          type: \"RESUME_TOAST\",\n          id\n        });\n      }\n    },\n    getGroupProps(options) {\n      const {\n        placement,\n        label = \"Notifications\"\n      } = options;\n      const state = getState();\n      const hotkeyLabel = state.context.hotkey.join(\"+\").replace(/Key/g, \"\").replace(/Digit/g, \"\");\n      const [side, align = \"center\"] = placement.split(\"-\");\n      return normalize.element({\n        ...parts.group.attrs,\n        dir: state.context.dir,\n        tabIndex: -1,\n        \"aria-label\": `${placement} ${label} ${hotkeyLabel}`,\n        id: dom.getRegionId(placement),\n        \"data-placement\": placement,\n        \"data-side\": side,\n        \"data-align\": align,\n        \"aria-live\": \"polite\",\n        role: \"region\",\n        style: getGroupPlacementStyle(state.context, placement),\n        onMouseMove() {\n          send({\n            type: \"REGION.POINTER_ENTER\",\n            placement\n          });\n        },\n        onMouseLeave() {\n          send({\n            type: \"REGION.POINTER_LEAVE\",\n            placement\n          });\n        },\n        onFocus(event) {\n          send({\n            type: \"REGION.FOCUS\",\n            target: event.relatedTarget\n          });\n        },\n        onBlur(event) {\n          if (state.context.isFocusWithin && !contains(event.currentTarget, event.relatedTarget)) {\n            send({\n              type: \"REGION.BLUR\"\n            });\n          }\n        }\n      });\n    },\n    subscribe(fn) {\n      const state = getState();\n      return subscribe(state.context.toasts, () => {\n        const toasts = getToastsByPlacementImpl(state.context.placement);\n        const contexts = toasts.map(toast => toast.getState().context);\n        fn(contexts);\n      });\n    }\n  };\n}\nvar {\n  not,\n  and,\n  or\n} = guards;\nfunction createToastMachine(options) {\n  const {\n    type = \"info\",\n    duration,\n    id = \"1\",\n    placement = \"bottom\",\n    removeDelay = 200,\n    ...restProps\n  } = options;\n  const ctx = compact(restProps);\n  const computedDuration = getToastDuration(duration, type);\n  return createMachine({\n    id,\n    context: {\n      id,\n      type,\n      remaining: computedDuration,\n      duration: computedDuration,\n      removeDelay,\n      createdAt: Date.now(),\n      placement,\n      ...ctx,\n      height: 0,\n      offset: 0,\n      frontmost: false,\n      mounted: false,\n      index: -1,\n      zIndex: 0\n    },\n    initial: type === \"loading\" ? \"visible:persist\" : \"visible\",\n    on: {\n      UPDATE: [{\n        guard: and(\"hasTypeChanged\", \"isChangingToLoading\"),\n        target: \"visible:persist\",\n        actions: [\"setContext\"]\n      }, {\n        guard: or(\"hasDurationChanged\", \"hasTypeChanged\"),\n        target: \"visible:updating\",\n        actions: [\"setContext\"]\n      }, {\n        actions: [\"setContext\"]\n      }],\n      MEASURE: {\n        actions: [\"measureHeight\"]\n      }\n    },\n    entry: [\"invokeOnVisible\"],\n    activities: [\"trackHeight\"],\n    states: {\n      \"visible:updating\": {\n        tags: [\"visible\", \"updating\"],\n        after: {\n          0: \"visible\"\n        }\n      },\n      \"visible:persist\": {\n        tags: [\"visible\", \"paused\"],\n        on: {\n          RESUME: {\n            guard: not(\"isLoadingType\"),\n            target: \"visible\",\n            actions: [\"setCreatedAt\"]\n          },\n          DISMISS: \"dismissing\"\n        }\n      },\n      visible: {\n        tags: [\"visible\"],\n        after: {\n          VISIBLE_DURATION: \"dismissing\"\n        },\n        on: {\n          DISMISS: \"dismissing\",\n          PAUSE: {\n            target: \"visible:persist\",\n            actions: \"setRemainingDuration\"\n          }\n        }\n      },\n      dismissing: {\n        entry: \"invokeOnDismiss\",\n        after: {\n          REMOVE_DELAY: {\n            target: \"unmounted\",\n            actions: \"notifyParentToRemove\"\n          }\n        }\n      },\n      unmounted: {\n        entry: \"invokeOnUnmount\",\n        type: \"final\"\n      }\n    }\n  }, {\n    activities: {\n      trackHeight(ctx2, _evt, {\n        self\n      }) {\n        let cleanup;\n        raf(() => {\n          const rootEl = dom.getRootEl(ctx2);\n          if (!rootEl) return;\n          ctx2.mounted = true;\n          const ghosts = queryAll(rootEl, \"[data-ghost]\");\n          warn(ghosts.length !== 2, \"[toast] No ghost element found in toast. Render the `ghostBefore` and `ghostAfter` elements\");\n          const syncHeight = () => {\n            const originalHeight = rootEl.style.height;\n            rootEl.style.height = \"auto\";\n            const newHeight = rootEl.getBoundingClientRect().height;\n            rootEl.style.height = originalHeight;\n            ctx2.height = newHeight;\n            self.sendParent({\n              type: \"UPDATE_HEIGHT\",\n              id: self.id,\n              height: newHeight,\n              placement: ctx2.placement\n            });\n          };\n          syncHeight();\n          const win = dom.getWin(ctx2);\n          const observer = new win.MutationObserver(syncHeight);\n          observer.observe(rootEl, {\n            childList: true,\n            subtree: true,\n            characterData: true\n          });\n          cleanup = () => observer.disconnect();\n        });\n        return () => cleanup?.();\n      }\n    },\n    guards: {\n      isChangingToLoading: (_, evt) => evt.toast?.type === \"loading\",\n      isLoadingType: ctx2 => ctx2.type === \"loading\",\n      hasTypeChanged: (ctx2, evt) => evt.toast?.type != null && evt.toast.type !== ctx2.type,\n      hasDurationChanged: (ctx2, evt) => evt.toast?.duration != null && evt.toast.duration !== ctx2.duration\n    },\n    delays: {\n      VISIBLE_DURATION: ctx2 => ctx2.remaining,\n      REMOVE_DELAY: ctx2 => ctx2.removeDelay\n    },\n    actions: {\n      measureHeight(ctx2, _evt, {\n        self\n      }) {\n        raf(() => {\n          const rootEl = dom.getRootEl(ctx2);\n          if (!rootEl) return;\n          ctx2.mounted = true;\n          const originalHeight = rootEl.style.height;\n          rootEl.style.height = \"auto\";\n          const newHeight = rootEl.getBoundingClientRect().height;\n          rootEl.style.height = originalHeight;\n          ctx2.height = newHeight;\n          self.sendParent({\n            type: \"UPDATE_HEIGHT\",\n            id: self.id,\n            height: newHeight,\n            placement: ctx2.placement\n          });\n        });\n      },\n      setRemainingDuration(ctx2) {\n        ctx2.remaining -= Date.now() - ctx2.createdAt;\n      },\n      setCreatedAt(ctx2) {\n        ctx2.createdAt = Date.now();\n      },\n      notifyParentToRemove(_ctx, _evt, {\n        self\n      }) {\n        self.sendParent({\n          type: \"REMOVE_TOAST\",\n          id: self.id\n        });\n      },\n      invokeOnDismiss(ctx2) {\n        ctx2.onStatusChange?.({\n          status: \"dismissing\"\n        });\n      },\n      invokeOnUnmount(ctx2) {\n        ctx2.onStatusChange?.({\n          status: \"unmounted\"\n        });\n      },\n      invokeOnVisible(ctx2) {\n        ctx2.onStatusChange?.({\n          status: \"visible\"\n        });\n      },\n      setContext(ctx2, evt) {\n        const duration2 = evt.toast?.duration;\n        const type2 = evt.toast?.type ?? ctx2.type;\n        const computedDuration2 = getToastDuration(duration2, type2);\n        Object.assign(ctx2, {\n          ...evt.toast,\n          duration: computedDuration2,\n          remaining: computedDuration2\n        });\n      }\n    }\n  });\n}\n\n// src/toast-group.machine.ts\nfunction groupMachine(userContext) {\n  const ctx = compact(userContext);\n  return createMachine({\n    id: \"toaster\",\n    initial: ctx.overlap ? \"overlap\" : \"stack\",\n    context: {\n      dir: \"ltr\",\n      max: Number.MAX_SAFE_INTEGER,\n      gap: 16,\n      pauseOnPageIdle: false,\n      hotkey: [\"altKey\", \"KeyT\"],\n      offsets: \"1rem\",\n      placement: \"bottom\",\n      removeDelay: 200,\n      ...ctx,\n      toasts: [],\n      lastFocusedEl: null,\n      isFocusWithin: false,\n      heights: []\n    },\n    computed: {\n      count: ctx2 => ctx2.toasts.length\n    },\n    activities: [\"trackDocumentVisibility\", \"trackHotKeyPress\"],\n    watch: {\n      toasts: [\"collapsedIfEmpty\", \"setDismissableBranch\"]\n    },\n    exit: [\"removeToasts\", \"clearDismissableBranch\", \"clearLastFocusedEl\"],\n    on: {\n      PAUSE_TOAST: {\n        actions: [\"pauseToast\"]\n      },\n      PAUSE_ALL: {\n        actions: [\"pauseToasts\"]\n      },\n      RESUME_TOAST: {\n        actions: [\"resumeToast\"]\n      },\n      RESUME_ALL: {\n        actions: [\"resumeToasts\"]\n      },\n      ADD_TOAST: {\n        guard: \"isWithinRange\",\n        actions: [\"createToast\", \"syncToastIndex\"]\n      },\n      UPDATE_TOAST: {\n        actions: [\"updateToast\"]\n      },\n      DISMISS_TOAST: {\n        actions: [\"dismissToast\"]\n      },\n      DISMISS_ALL: {\n        actions: [\"dismissToasts\"]\n      },\n      REMOVE_TOAST: {\n        actions: [\"removeToast\", \"syncToastIndex\", \"syncToastOffset\"]\n      },\n      REMOVE_ALL: {\n        actions: [\"removeToasts\"]\n      },\n      UPDATE_HEIGHT: {\n        actions: [\"syncHeights\", \"syncToastOffset\"]\n      },\n      \"DOC.HOTKEY\": {\n        actions: [\"focusRegionEl\"]\n      },\n      \"REGION.BLUR\": [{\n        guard: \"isOverlapping\",\n        target: \"overlap\",\n        actions: [\"resumeToasts\", \"restoreLastFocusedEl\"]\n      }, {\n        actions: [\"resumeToasts\", \"restoreLastFocusedEl\"]\n      }]\n    },\n    states: {\n      stack: {\n        entry: [\"expandToasts\"],\n        on: {\n          \"REGION.POINTER_LEAVE\": [{\n            guard: \"isOverlapping\",\n            target: \"overlap\",\n            actions: [\"resumeToasts\"]\n          }, {\n            actions: [\"resumeToasts\"]\n          }],\n          \"REGION.OVERLAP\": {\n            target: \"overlap\"\n          },\n          \"REGION.FOCUS\": {\n            actions: [\"setLastFocusedEl\", \"pauseToasts\"]\n          },\n          \"REGION.POINTER_ENTER\": {\n            actions: [\"pauseToasts\"]\n          }\n        }\n      },\n      overlap: {\n        entry: [\"collapseToasts\"],\n        on: {\n          \"REGION.STACK\": {\n            target: \"stack\"\n          },\n          \"REGION.POINTER_ENTER\": {\n            target: \"stack\",\n            actions: [\"pauseToasts\"]\n          },\n          \"REGION.FOCUS\": {\n            target: \"stack\",\n            actions: [\"setLastFocusedEl\", \"pauseToasts\"]\n          }\n        }\n      }\n    }\n  }, {\n    guards: {\n      isWithinRange: ctx2 => ctx2.toasts.length < ctx2.max,\n      isOverlapping: ctx2 => !!ctx2.overlap\n    },\n    activities: {\n      trackHotKeyPress(ctx2, _evt, {\n        send\n      }) {\n        const handleKeyDown = event => {\n          const isHotkeyPressed = ctx2.hotkey.every(key => event[key] || event.code === key);\n          if (!isHotkeyPressed) return;\n          send({\n            type: \"DOC.HOTKEY\"\n          });\n        };\n        return addDomEvent(document, \"keydown\", handleKeyDown, {\n          capture: true\n        });\n      },\n      trackDocumentVisibility(ctx2, _evt, {\n        send\n      }) {\n        if (!ctx2.pauseOnPageIdle) return;\n        const doc = dom.getDoc(ctx2);\n        return addDomEvent(doc, \"visibilitychange\", () => {\n          send(doc.visibilityState === \"hidden\" ? \"PAUSE_ALL\" : \"RESUME_ALL\");\n        });\n      }\n    },\n    actions: {\n      setDismissableBranch(ctx2) {\n        const currentToasts = getToastsByPlacement(ctx2.toasts, ctx2.placement);\n        const hasToasts = currentToasts.length > 0;\n        if (!hasToasts) {\n          ctx2._cleanup?.();\n          return;\n        }\n        if (hasToasts && ctx2._cleanup) {\n          return;\n        }\n        const groupEl = () => dom.getRegionEl(ctx2, ctx2.placement);\n        ctx2._cleanup = trackDismissableBranch(groupEl, {\n          defer: true\n        });\n      },\n      clearDismissableBranch(ctx2) {\n        ctx2._cleanup?.();\n      },\n      focusRegionEl(ctx2) {\n        queueMicrotask(() => {\n          dom.getRegionEl(ctx2, ctx2.placement)?.focus();\n        });\n      },\n      expandToasts(ctx2) {\n        each(ctx2, toast => {\n          toast.state.context.stacked = true;\n        });\n      },\n      collapseToasts(ctx2) {\n        each(ctx2, toast => {\n          toast.state.context.stacked = false;\n        });\n      },\n      collapsedIfEmpty(ctx2, _evt, {\n        send\n      }) {\n        if (!ctx2.overlap || ctx2.toasts.length > 1) return;\n        send(\"REGION.OVERLAP\");\n      },\n      pauseToast(_ctx, evt, {\n        self\n      }) {\n        self.sendChild(\"PAUSE\", evt.id);\n      },\n      pauseToasts(ctx2) {\n        ctx2.toasts.forEach(toast => toast.send(\"PAUSE\"));\n      },\n      resumeToast(_ctx, evt, {\n        self\n      }) {\n        self.sendChild(\"RESUME\", evt.id);\n      },\n      resumeToasts(ctx2) {\n        ctx2.toasts.forEach(toast => toast.send(\"RESUME\"));\n      },\n      measureToasts(ctx2) {\n        ctx2.toasts.forEach(toast => toast.send(\"MEASURE\"));\n      },\n      createToast(ctx2, evt, {\n        self,\n        getState\n      }) {\n        const options = {\n          placement: ctx2.placement,\n          duration: ctx2.duration,\n          removeDelay: ctx2.removeDelay,\n          ...evt.toast,\n          dir: ctx2.dir,\n          getRootNode: ctx2.getRootNode,\n          stacked: getState().matches(\"stack\")\n        };\n        const toast = createToastMachine(options);\n        const actor = self.spawn(toast);\n        ctx2.toasts = [actor, ...ctx2.toasts];\n      },\n      updateToast(_ctx, evt, {\n        self\n      }) {\n        self.sendChild({\n          type: \"UPDATE\",\n          toast: evt.toast\n        }, evt.id);\n      },\n      dismissToast(_ctx, evt, {\n        self\n      }) {\n        self.sendChild(\"DISMISS\", evt.id);\n      },\n      dismissToasts(ctx2) {\n        ctx2.toasts.forEach(toast => toast.send(\"DISMISS\"));\n      },\n      removeToast(ctx2, evt, {\n        self\n      }) {\n        self.stopChild(evt.id);\n        ctx2.toasts = ctx2.toasts.filter(toast => toast.id !== evt.id);\n        ctx2.heights = ctx2.heights.filter(height => height.id !== evt.id);\n      },\n      removeToasts(ctx2, _evt, {\n        self\n      }) {\n        ctx2.toasts.forEach(toast => self.stopChild(toast.id));\n        ctx2.toasts = [];\n        ctx2.heights = [];\n      },\n      syncHeights(ctx2, evt) {\n        const existing = ctx2.heights.find(height => height.id === evt.id);\n        if (existing) {\n          existing.height = evt.height;\n          existing.placement = evt.placement;\n        } else {\n          const newHeight = {\n            id: evt.id,\n            height: evt.height,\n            placement: evt.placement\n          };\n          ctx2.heights = [newHeight, ...ctx2.heights];\n        }\n      },\n      syncToastIndex(ctx2) {\n        each(ctx2, (toast, index, toasts) => {\n          toast.state.context.index = index;\n          toast.state.context.frontmost = index === 0;\n          toast.state.context.zIndex = toasts.length - index;\n        });\n      },\n      syncToastOffset(ctx2, evt) {\n        const placement = evt.placement ?? ctx2.placement;\n        each({\n          ...ctx2,\n          placement\n        }, toast => {\n          const heightIndex = Math.max(ctx2.heights.findIndex(height => height.id === toast.id), 0);\n          const toastsHeightBefore = ctx2.heights.reduce((prev, curr, reducerIndex) => {\n            if (reducerIndex >= heightIndex) return prev;\n            return prev + curr.height;\n          }, 0);\n          toast.state.context.offset = heightIndex * ctx2.gap + toastsHeightBefore;\n        });\n      },\n      setLastFocusedEl(ctx2, evt) {\n        if (ctx2.isFocusWithin || !evt.target) return;\n        ctx2.isFocusWithin = true;\n        ctx2.lastFocusedEl = ref(evt.target);\n      },\n      restoreLastFocusedEl(ctx2) {\n        ctx2.isFocusWithin = false;\n        if (!ctx2.lastFocusedEl) return;\n        ctx2.lastFocusedEl.focus({\n          preventScroll: true\n        });\n        ctx2.lastFocusedEl = null;\n      },\n      clearLastFocusedEl(ctx2) {\n        if (!ctx2.lastFocusedEl) return;\n        ctx2.lastFocusedEl.focus({\n          preventScroll: true\n        });\n        ctx2.lastFocusedEl = null;\n        ctx2.isFocusWithin = false;\n      }\n    }\n  });\n}\nfunction each(ctx, fn) {\n  const currentToasts = getToastsByPlacement(ctx.toasts, ctx.placement);\n  currentToasts.forEach(fn);\n}\nfunction connect(state, send, normalize) {\n  const visible = state.hasTag(\"visible\");\n  const paused = state.hasTag(\"paused\");\n  const placement = state.context.placement;\n  const type = state.context.type;\n  const [side, align = \"center\"] = placement.split(\"-\");\n  return {\n    type,\n    title: state.context.title,\n    description: state.context.description,\n    placement,\n    visible,\n    paused,\n    pause() {\n      send(\"PAUSE\");\n    },\n    resume() {\n      send(\"RESUME\");\n    },\n    dismiss() {\n      send(\"DISMISS\");\n    },\n    getRootProps() {\n      return normalize.element({\n        ...parts.root.attrs,\n        dir: state.context.dir,\n        id: dom.getRootId(state.context),\n        \"data-state\": visible ? \"open\" : \"closed\",\n        \"data-type\": type,\n        \"data-placement\": placement,\n        \"data-align\": align,\n        \"data-side\": side,\n        \"data-mounted\": dataAttr(state.context.mounted),\n        \"data-paused\": dataAttr(paused),\n        \"data-first\": dataAttr(state.context.frontmost),\n        \"data-sibling\": dataAttr(!state.context.frontmost),\n        \"data-stack\": dataAttr(state.context.stacked),\n        \"data-overlap\": dataAttr(!state.context.stacked),\n        role: \"status\",\n        \"aria-atomic\": \"true\",\n        \"aria-describedby\": state.context.description ? dom.getDescriptionId(state.context) : void 0,\n        \"aria-labelledby\": state.context.title ? dom.getTitleId(state.context) : void 0,\n        tabIndex: 0,\n        style: getPlacementStyle(state.context, visible),\n        onKeyDown(event) {\n          if (event.defaultPrevented) return;\n          if (event.key == \"Escape\") {\n            send(\"DISMISS\");\n            event.preventDefault();\n          }\n        }\n      });\n    },\n    /* Leave a ghost div to avoid setting hover to false when transitioning out */\n    getGhostBeforeProps() {\n      return normalize.element({\n        \"data-ghost\": \"before\",\n        style: getGhostBeforeStyle(state.context, visible)\n      });\n    },\n    /* Needed to avoid setting hover to false when in between toasts */\n    getGhostAfterProps() {\n      return normalize.element({\n        \"data-ghost\": \"after\",\n        style: getGhostAfterStyle()\n      });\n    },\n    getTitleProps() {\n      return normalize.element({\n        ...parts.title.attrs,\n        id: dom.getTitleId(state.context)\n      });\n    },\n    getDescriptionProps() {\n      return normalize.element({\n        ...parts.description.attrs,\n        id: dom.getDescriptionId(state.context)\n      });\n    },\n    getActionTriggerProps() {\n      return normalize.button({\n        ...parts.actionTrigger.attrs,\n        type: \"button\",\n        onClick(event) {\n          if (event.defaultPrevented) return;\n          state.context.action?.onClick?.();\n          send(\"DISMISS\");\n        }\n      });\n    },\n    getCloseTriggerProps() {\n      return normalize.button({\n        id: dom.getCloseTriggerId(state.context),\n        ...parts.closeTrigger.attrs,\n        type: \"button\",\n        \"aria-label\": \"Dismiss notification\",\n        onClick(event) {\n          if (event.defaultPrevented) return;\n          send(\"DISMISS\");\n        }\n      });\n    }\n  };\n}\n\n// src/index.ts\nvar group = {\n  connect: groupConnect,\n  machine: groupMachine\n};\nexport { anatomy, connect, createToastMachine as createMachine, group };","map":{"version":3,"names":["createMachine","subscribe","guards","ref","isMachine","createScope","raf","queryAll","dataAttr","contains","addDomEvent","MAX_Z_INDEX","compact","warn","runIfFn","uuid","createAnatomy","trackDismissableBranch","anatomy","parts","build","dom","getRegionId","placement","getRegionEl","ctx","getById","getRootId","id","getRootEl","getTitleId","getDescriptionId","getCloseTriggerId","getToastsByPlacement","toasts","filter","toast","state","context","defaultTimeouts","info","error","success","loading","Infinity","DEFAULT","getToastDuration","duration","type","getGroupPlacementStyle","offset","offsets","computedOffset","left","right","bottom","top","rtl","dir","computedPlacement","replace","isRighty","includes","isLefty","styles","position","pointerEvents","count","display","flexDirection","gap","heights","height","zIndex","alignItems","offset2","insetInlineEnd","insetInlineStart","getPlacementStyle","visible","side","split","sibling","frontmost","overlap","stacked","removeDelay","Number","MAX_SAFE_INTEGER","index","assign","overrides","Object","mounted","getGhostBeforeStyle","inset","scale","getGhostAfterStyle","_ctx","_visible","width","groupConnect","serviceOrState","send","normalize","getState","result","getToastsByPlacementImpl","isVisible","length","find","create","options","uid","update","upsert","dismiss","getCount","getPlacements","placements","map","Array","from","Set","remove","dismissByPlacement","forEach","promise","shared","then","response","successOptions","catch","errorOptions","finally","pause","resume","getGroupProps","label","hotkeyLabel","hotkey","join","align","element","group","attrs","tabIndex","role","style","onMouseMove","onMouseLeave","onFocus","event","target","relatedTarget","onBlur","isFocusWithin","currentTarget","fn","contexts","not","and","or","createToastMachine","restProps","computedDuration","remaining","createdAt","Date","now","initial","on","UPDATE","guard","actions","MEASURE","entry","activities","states","tags","after","RESUME","DISMISS","VISIBLE_DURATION","PAUSE","dismissing","REMOVE_DELAY","unmounted","trackHeight","ctx2","_evt","self","cleanup","rootEl","ghosts","syncHeight","originalHeight","newHeight","getBoundingClientRect","sendParent","win","getWin","observer","MutationObserver","observe","childList","subtree","characterData","disconnect","isChangingToLoading","_","evt","isLoadingType","hasTypeChanged","hasDurationChanged","delays","measureHeight","setRemainingDuration","setCreatedAt","notifyParentToRemove","invokeOnDismiss","onStatusChange","status","invokeOnUnmount","invokeOnVisible","setContext","duration2","type2","computedDuration2","groupMachine","userContext","max","pauseOnPageIdle","lastFocusedEl","computed","watch","exit","PAUSE_TOAST","PAUSE_ALL","RESUME_TOAST","RESUME_ALL","ADD_TOAST","UPDATE_TOAST","DISMISS_TOAST","DISMISS_ALL","REMOVE_TOAST","REMOVE_ALL","UPDATE_HEIGHT","stack","isWithinRange","isOverlapping","trackHotKeyPress","handleKeyDown","isHotkeyPressed","every","key","code","document","capture","trackDocumentVisibility","doc","getDoc","visibilityState","setDismissableBranch","currentToasts","hasToasts","_cleanup","groupEl","defer","clearDismissableBranch","focusRegionEl","queueMicrotask","focus","expandToasts","each","collapseToasts","collapsedIfEmpty","pauseToast","sendChild","pauseToasts","resumeToast","resumeToasts","measureToasts","createToast","getRootNode","matches","actor","spawn","updateToast","dismissToast","dismissToasts","removeToast","stopChild","removeToasts","syncHeights","existing","syncToastIndex","syncToastOffset","heightIndex","Math","findIndex","toastsHeightBefore","reduce","prev","curr","reducerIndex","setLastFocusedEl","restoreLastFocusedEl","preventScroll","clearLastFocusedEl","connect","hasTag","paused","title","description","getRootProps","root","onKeyDown","defaultPrevented","preventDefault","getGhostBeforeProps","getGhostAfterProps","getTitleProps","getDescriptionProps","getActionTriggerProps","button","actionTrigger","onClick","action","getCloseTriggerProps","closeTrigger","machine"],"sources":["/Users/macbook/developer/2025/2026/node_modules/@zag-js/toast/dist/index.mjs"],"sourcesContent":["import { createMachine, subscribe, guards, ref, isMachine } from '@zag-js/core';\nimport { createScope, raf, queryAll, dataAttr, contains, addDomEvent, MAX_Z_INDEX } from '@zag-js/dom-query';\nimport { compact, warn, runIfFn, uuid } from '@zag-js/utils';\nimport { createAnatomy } from '@zag-js/anatomy';\nimport { trackDismissableBranch } from '@zag-js/dismissable';\n\n// src/toast-group.connect.ts\nvar anatomy = createAnatomy(\"toast\").parts(\n  \"group\",\n  \"root\",\n  \"title\",\n  \"description\",\n  \"actionTrigger\",\n  \"closeTrigger\"\n);\nvar parts = anatomy.build();\nvar dom = createScope({\n  getRegionId: (placement) => `toast-group:${placement}`,\n  getRegionEl: (ctx, placement) => dom.getById(ctx, `toast-group:${placement}`),\n  getRootId: (ctx) => `toast:${ctx.id}`,\n  getRootEl: (ctx) => dom.getById(ctx, dom.getRootId(ctx)),\n  getTitleId: (ctx) => `toast:${ctx.id}:title`,\n  getDescriptionId: (ctx) => `toast:${ctx.id}:description`,\n  getCloseTriggerId: (ctx) => `toast${ctx.id}:close`\n});\nfunction getToastsByPlacement(toasts, placement) {\n  return toasts.filter((toast) => toast.state.context.placement === placement);\n}\nvar defaultTimeouts = {\n  info: 5e3,\n  error: 5e3,\n  success: 2e3,\n  loading: Infinity,\n  DEFAULT: 5e3\n};\nfunction getToastDuration(duration, type) {\n  return duration ?? defaultTimeouts[type] ?? defaultTimeouts.DEFAULT;\n}\nfunction getGroupPlacementStyle(ctx, placement) {\n  const offset = ctx.offsets;\n  const computedOffset = typeof offset === \"string\" ? { left: offset, right: offset, bottom: offset, top: offset } : offset;\n  const rtl = ctx.dir === \"rtl\";\n  const computedPlacement = placement.replace(\"-start\", rtl ? \"-right\" : \"-left\").replace(\"-end\", rtl ? \"-left\" : \"-right\");\n  const isRighty = computedPlacement.includes(\"right\");\n  const isLefty = computedPlacement.includes(\"left\");\n  const styles = {\n    position: \"fixed\",\n    pointerEvents: ctx.count > 0 ? void 0 : \"none\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    \"--gap\": `${ctx.gap}px`,\n    \"--first-height\": `${ctx.heights[0]?.height || 0}px`,\n    zIndex: MAX_Z_INDEX\n  };\n  let alignItems = \"center\";\n  if (isRighty) alignItems = \"flex-end\";\n  if (isLefty) alignItems = \"flex-start\";\n  styles.alignItems = alignItems;\n  if (computedPlacement.includes(\"top\")) {\n    const offset2 = computedOffset.top;\n    styles.top = `max(env(safe-area-inset-top, 0px), ${offset2})`;\n  }\n  if (computedPlacement.includes(\"bottom\")) {\n    const offset2 = computedOffset.bottom;\n    styles.bottom = `max(env(safe-area-inset-bottom, 0px), ${offset2})`;\n  }\n  if (!computedPlacement.includes(\"left\")) {\n    const offset2 = computedOffset.right;\n    styles.insetInlineEnd = `calc(env(safe-area-inset-right, 0px) + ${offset2})`;\n  }\n  if (!computedPlacement.includes(\"right\")) {\n    const offset2 = computedOffset.left;\n    styles.insetInlineStart = `calc(env(safe-area-inset-left, 0px) + ${offset2})`;\n  }\n  return styles;\n}\nfunction getPlacementStyle(ctx, visible) {\n  const [side] = ctx.placement.split(\"-\");\n  const sibling = !ctx.frontmost;\n  const overlap = !ctx.stacked;\n  const styles = {\n    position: \"absolute\",\n    pointerEvents: \"auto\",\n    \"--opacity\": \"0\",\n    \"--remove-delay\": `${ctx.removeDelay}ms`,\n    \"--duration\": `${ctx.type === \"loading\" ? Number.MAX_SAFE_INTEGER : ctx.duration}ms`,\n    \"--initial-height\": `${ctx.height}px`,\n    \"--offset\": `${ctx.offset}px`,\n    \"--index\": ctx.index,\n    \"--z-index\": ctx.zIndex,\n    \"--lift-amount\": \"calc(var(--lift) * var(--gap))\",\n    \"--y\": \"100%\",\n    \"--x\": \"0\"\n  };\n  const assign = (overrides) => Object.assign(styles, overrides);\n  if (side === \"top\") {\n    assign({\n      top: \"0\",\n      \"--sign\": \"-1\",\n      \"--y\": \"-100%\",\n      \"--lift\": \"1\"\n    });\n  } else if (side === \"bottom\") {\n    assign({\n      bottom: \"0\",\n      \"--sign\": \"1\",\n      \"--y\": \"100%\",\n      \"--lift\": \"-1\"\n    });\n  }\n  if (ctx.mounted) {\n    assign({\n      \"--y\": \"0\",\n      \"--opacity\": \"1\"\n    });\n    if (ctx.stacked) {\n      assign({\n        \"--y\": \"calc(var(--lift) * var(--offset))\",\n        \"--height\": \"var(--initial-height)\"\n      });\n    }\n  }\n  if (!visible) {\n    assign({\n      \"--opacity\": \"0\",\n      pointerEvents: \"none\"\n    });\n  }\n  if (sibling && overlap) {\n    assign({\n      \"--base-scale\": \"var(--index) * 0.05 + 1\",\n      \"--y\": \"calc(var(--lift-amount) * var(--index))\",\n      \"--scale\": \"calc(-1 * var(--base-scale))\",\n      \"--height\": \"var(--first-height)\"\n    });\n    if (!visible) {\n      assign({\n        \"--y\": \"calc(var(--sign) * 40%)\"\n      });\n    }\n  }\n  if (sibling && ctx.stacked && !visible) {\n    assign({\n      \"--y\": \"calc(var(--lift) * var(--offset) + var(--lift) * -100%)\"\n    });\n  }\n  if (ctx.frontmost && !visible) {\n    assign({\n      \"--y\": \"calc(var(--lift) * -100%)\"\n    });\n  }\n  return styles;\n}\nfunction getGhostBeforeStyle(ctx, visible) {\n  const styles = {\n    position: \"absolute\",\n    inset: \"0\",\n    scale: \"1 2\",\n    pointerEvents: visible ? \"none\" : \"auto\"\n  };\n  const assign = (overrides) => Object.assign(styles, overrides);\n  if (ctx.frontmost && !visible) {\n    assign({\n      height: \"calc(var(--initial-height) + 80%)\"\n    });\n  }\n  return styles;\n}\nfunction getGhostAfterStyle(_ctx, _visible) {\n  return {\n    position: \"absolute\",\n    left: \"0\",\n    height: \"calc(var(--gap) + 2px)\",\n    bottom: \"100%\",\n    width: \"100%\"\n  };\n}\n\n// src/toast-group.connect.ts\nfunction groupConnect(serviceOrState, send, normalize) {\n  function getState() {\n    const result = isMachine(serviceOrState) ? serviceOrState.getState() : serviceOrState;\n    return result;\n  }\n  function getToastsByPlacementImpl(placement) {\n    return getToastsByPlacement(getState().context.toasts, placement);\n  }\n  function isVisible(id) {\n    const toasts = getState().context.toasts;\n    if (!toasts.length) return false;\n    return !!toasts.find((toast) => toast.id == id);\n  }\n  function create(options) {\n    const uid = `toast:${uuid()}`;\n    const id = options.id ? options.id : uid;\n    if (isVisible(id)) return id;\n    send({ type: \"ADD_TOAST\", toast: { ...options, id } });\n    return id;\n  }\n  function update(id, options) {\n    if (!isVisible(id)) return id;\n    send({ type: \"UPDATE_TOAST\", id, toast: options });\n    return id;\n  }\n  function upsert(options) {\n    const { id } = options;\n    const visible = id ? isVisible(id) : false;\n    if (visible && id != null) {\n      return update(id, options);\n    } else {\n      return create(options);\n    }\n  }\n  function dismiss(id) {\n    if (id == null) {\n      send(\"DISMISS_ALL\");\n    } else if (isVisible(id)) {\n      send({ type: \"DISMISS_TOAST\", id });\n    }\n  }\n  return {\n    getCount() {\n      return getState().context.count;\n    },\n    getPlacements() {\n      const toasts = getState().context.toasts;\n      const placements = toasts.map((toast) => toast.state.context.placement);\n      return Array.from(new Set(placements));\n    },\n    getToastsByPlacement: getToastsByPlacementImpl,\n    isVisible,\n    create,\n    update,\n    upsert,\n    dismiss,\n    remove(id) {\n      if (id == null) {\n        send(\"REMOVE_ALL\");\n      } else if (isVisible(id)) {\n        send({ type: \"REMOVE_TOAST\", id });\n      }\n    },\n    dismissByPlacement(placement) {\n      const toasts = getToastsByPlacementImpl(placement);\n      toasts.forEach((toast) => dismiss(toast.id));\n    },\n    loading(options) {\n      return upsert({ ...options, type: \"loading\" });\n    },\n    success(options) {\n      return upsert({ ...options, type: \"success\" });\n    },\n    error(options) {\n      return upsert({ ...options, type: \"error\" });\n    },\n    promise(promise, options, shared = {}) {\n      const id = upsert({ ...shared, ...options.loading, type: \"loading\" });\n      runIfFn(promise).then((response) => {\n        const successOptions = runIfFn(options.success, response);\n        upsert({ ...shared, ...successOptions, id, type: \"success\" });\n      }).catch((error) => {\n        const errorOptions = runIfFn(options.error, error);\n        upsert({ ...shared, ...errorOptions, id, type: \"error\" });\n      }).finally(() => {\n        options.finally?.();\n      });\n      return id;\n    },\n    pause(id) {\n      if (id == null) {\n        send(\"PAUSE_ALL\");\n      } else if (isVisible(id)) {\n        send({ type: \"PAUSE_TOAST\", id });\n      }\n    },\n    resume(id) {\n      if (id == null) {\n        send(\"RESUME_ALL\");\n      } else if (isVisible(id)) {\n        send({ type: \"RESUME_TOAST\", id });\n      }\n    },\n    getGroupProps(options) {\n      const { placement, label = \"Notifications\" } = options;\n      const state = getState();\n      const hotkeyLabel = state.context.hotkey.join(\"+\").replace(/Key/g, \"\").replace(/Digit/g, \"\");\n      const [side, align = \"center\"] = placement.split(\"-\");\n      return normalize.element({\n        ...parts.group.attrs,\n        dir: state.context.dir,\n        tabIndex: -1,\n        \"aria-label\": `${placement} ${label} ${hotkeyLabel}`,\n        id: dom.getRegionId(placement),\n        \"data-placement\": placement,\n        \"data-side\": side,\n        \"data-align\": align,\n        \"aria-live\": \"polite\",\n        role: \"region\",\n        style: getGroupPlacementStyle(state.context, placement),\n        onMouseMove() {\n          send({ type: \"REGION.POINTER_ENTER\", placement });\n        },\n        onMouseLeave() {\n          send({ type: \"REGION.POINTER_LEAVE\", placement });\n        },\n        onFocus(event) {\n          send({ type: \"REGION.FOCUS\", target: event.relatedTarget });\n        },\n        onBlur(event) {\n          if (state.context.isFocusWithin && !contains(event.currentTarget, event.relatedTarget)) {\n            send({ type: \"REGION.BLUR\" });\n          }\n        }\n      });\n    },\n    subscribe(fn) {\n      const state = getState();\n      return subscribe(state.context.toasts, () => {\n        const toasts = getToastsByPlacementImpl(state.context.placement);\n        const contexts = toasts.map((toast) => toast.getState().context);\n        fn(contexts);\n      });\n    }\n  };\n}\nvar { not, and, or } = guards;\nfunction createToastMachine(options) {\n  const { type = \"info\", duration, id = \"1\", placement = \"bottom\", removeDelay = 200, ...restProps } = options;\n  const ctx = compact(restProps);\n  const computedDuration = getToastDuration(duration, type);\n  return createMachine(\n    {\n      id,\n      context: {\n        id,\n        type,\n        remaining: computedDuration,\n        duration: computedDuration,\n        removeDelay,\n        createdAt: Date.now(),\n        placement,\n        ...ctx,\n        height: 0,\n        offset: 0,\n        frontmost: false,\n        mounted: false,\n        index: -1,\n        zIndex: 0\n      },\n      initial: type === \"loading\" ? \"visible:persist\" : \"visible\",\n      on: {\n        UPDATE: [\n          {\n            guard: and(\"hasTypeChanged\", \"isChangingToLoading\"),\n            target: \"visible:persist\",\n            actions: [\"setContext\"]\n          },\n          {\n            guard: or(\"hasDurationChanged\", \"hasTypeChanged\"),\n            target: \"visible:updating\",\n            actions: [\"setContext\"]\n          },\n          {\n            actions: [\"setContext\"]\n          }\n        ],\n        MEASURE: {\n          actions: [\"measureHeight\"]\n        }\n      },\n      entry: [\"invokeOnVisible\"],\n      activities: [\"trackHeight\"],\n      states: {\n        \"visible:updating\": {\n          tags: [\"visible\", \"updating\"],\n          after: {\n            0: \"visible\"\n          }\n        },\n        \"visible:persist\": {\n          tags: [\"visible\", \"paused\"],\n          on: {\n            RESUME: {\n              guard: not(\"isLoadingType\"),\n              target: \"visible\",\n              actions: [\"setCreatedAt\"]\n            },\n            DISMISS: \"dismissing\"\n          }\n        },\n        visible: {\n          tags: [\"visible\"],\n          after: {\n            VISIBLE_DURATION: \"dismissing\"\n          },\n          on: {\n            DISMISS: \"dismissing\",\n            PAUSE: {\n              target: \"visible:persist\",\n              actions: \"setRemainingDuration\"\n            }\n          }\n        },\n        dismissing: {\n          entry: \"invokeOnDismiss\",\n          after: {\n            REMOVE_DELAY: {\n              target: \"unmounted\",\n              actions: \"notifyParentToRemove\"\n            }\n          }\n        },\n        unmounted: {\n          entry: \"invokeOnUnmount\",\n          type: \"final\"\n        }\n      }\n    },\n    {\n      activities: {\n        trackHeight(ctx2, _evt, { self }) {\n          let cleanup;\n          raf(() => {\n            const rootEl = dom.getRootEl(ctx2);\n            if (!rootEl) return;\n            ctx2.mounted = true;\n            const ghosts = queryAll(rootEl, \"[data-ghost]\");\n            warn(\n              ghosts.length !== 2,\n              \"[toast] No ghost element found in toast. Render the `ghostBefore` and `ghostAfter` elements\"\n            );\n            const syncHeight = () => {\n              const originalHeight = rootEl.style.height;\n              rootEl.style.height = \"auto\";\n              const newHeight = rootEl.getBoundingClientRect().height;\n              rootEl.style.height = originalHeight;\n              ctx2.height = newHeight;\n              self.sendParent({ type: \"UPDATE_HEIGHT\", id: self.id, height: newHeight, placement: ctx2.placement });\n            };\n            syncHeight();\n            const win = dom.getWin(ctx2);\n            const observer = new win.MutationObserver(syncHeight);\n            observer.observe(rootEl, { childList: true, subtree: true, characterData: true });\n            cleanup = () => observer.disconnect();\n          });\n          return () => cleanup?.();\n        }\n      },\n      guards: {\n        isChangingToLoading: (_, evt) => evt.toast?.type === \"loading\",\n        isLoadingType: (ctx2) => ctx2.type === \"loading\",\n        hasTypeChanged: (ctx2, evt) => evt.toast?.type != null && evt.toast.type !== ctx2.type,\n        hasDurationChanged: (ctx2, evt) => evt.toast?.duration != null && evt.toast.duration !== ctx2.duration\n      },\n      delays: {\n        VISIBLE_DURATION: (ctx2) => ctx2.remaining,\n        REMOVE_DELAY: (ctx2) => ctx2.removeDelay\n      },\n      actions: {\n        measureHeight(ctx2, _evt, { self }) {\n          raf(() => {\n            const rootEl = dom.getRootEl(ctx2);\n            if (!rootEl) return;\n            ctx2.mounted = true;\n            const originalHeight = rootEl.style.height;\n            rootEl.style.height = \"auto\";\n            const newHeight = rootEl.getBoundingClientRect().height;\n            rootEl.style.height = originalHeight;\n            ctx2.height = newHeight;\n            self.sendParent({ type: \"UPDATE_HEIGHT\", id: self.id, height: newHeight, placement: ctx2.placement });\n          });\n        },\n        setRemainingDuration(ctx2) {\n          ctx2.remaining -= Date.now() - ctx2.createdAt;\n        },\n        setCreatedAt(ctx2) {\n          ctx2.createdAt = Date.now();\n        },\n        notifyParentToRemove(_ctx, _evt, { self }) {\n          self.sendParent({ type: \"REMOVE_TOAST\", id: self.id });\n        },\n        invokeOnDismiss(ctx2) {\n          ctx2.onStatusChange?.({ status: \"dismissing\" });\n        },\n        invokeOnUnmount(ctx2) {\n          ctx2.onStatusChange?.({ status: \"unmounted\" });\n        },\n        invokeOnVisible(ctx2) {\n          ctx2.onStatusChange?.({ status: \"visible\" });\n        },\n        setContext(ctx2, evt) {\n          const duration2 = evt.toast?.duration;\n          const type2 = evt.toast?.type ?? ctx2.type;\n          const computedDuration2 = getToastDuration(duration2, type2);\n          Object.assign(ctx2, {\n            ...evt.toast,\n            duration: computedDuration2,\n            remaining: computedDuration2\n          });\n        }\n      }\n    }\n  );\n}\n\n// src/toast-group.machine.ts\nfunction groupMachine(userContext) {\n  const ctx = compact(userContext);\n  return createMachine(\n    {\n      id: \"toaster\",\n      initial: ctx.overlap ? \"overlap\" : \"stack\",\n      context: {\n        dir: \"ltr\",\n        max: Number.MAX_SAFE_INTEGER,\n        gap: 16,\n        pauseOnPageIdle: false,\n        hotkey: [\"altKey\", \"KeyT\"],\n        offsets: \"1rem\",\n        placement: \"bottom\",\n        removeDelay: 200,\n        ...ctx,\n        toasts: [],\n        lastFocusedEl: null,\n        isFocusWithin: false,\n        heights: []\n      },\n      computed: {\n        count: (ctx2) => ctx2.toasts.length\n      },\n      activities: [\"trackDocumentVisibility\", \"trackHotKeyPress\"],\n      watch: {\n        toasts: [\"collapsedIfEmpty\", \"setDismissableBranch\"]\n      },\n      exit: [\"removeToasts\", \"clearDismissableBranch\", \"clearLastFocusedEl\"],\n      on: {\n        PAUSE_TOAST: {\n          actions: [\"pauseToast\"]\n        },\n        PAUSE_ALL: {\n          actions: [\"pauseToasts\"]\n        },\n        RESUME_TOAST: {\n          actions: [\"resumeToast\"]\n        },\n        RESUME_ALL: {\n          actions: [\"resumeToasts\"]\n        },\n        ADD_TOAST: {\n          guard: \"isWithinRange\",\n          actions: [\"createToast\", \"syncToastIndex\"]\n        },\n        UPDATE_TOAST: {\n          actions: [\"updateToast\"]\n        },\n        DISMISS_TOAST: {\n          actions: [\"dismissToast\"]\n        },\n        DISMISS_ALL: {\n          actions: [\"dismissToasts\"]\n        },\n        REMOVE_TOAST: {\n          actions: [\"removeToast\", \"syncToastIndex\", \"syncToastOffset\"]\n        },\n        REMOVE_ALL: {\n          actions: [\"removeToasts\"]\n        },\n        UPDATE_HEIGHT: {\n          actions: [\"syncHeights\", \"syncToastOffset\"]\n        },\n        \"DOC.HOTKEY\": {\n          actions: [\"focusRegionEl\"]\n        },\n        \"REGION.BLUR\": [\n          {\n            guard: \"isOverlapping\",\n            target: \"overlap\",\n            actions: [\"resumeToasts\", \"restoreLastFocusedEl\"]\n          },\n          {\n            actions: [\"resumeToasts\", \"restoreLastFocusedEl\"]\n          }\n        ]\n      },\n      states: {\n        stack: {\n          entry: [\"expandToasts\"],\n          on: {\n            \"REGION.POINTER_LEAVE\": [\n              {\n                guard: \"isOverlapping\",\n                target: \"overlap\",\n                actions: [\"resumeToasts\"]\n              },\n              {\n                actions: [\"resumeToasts\"]\n              }\n            ],\n            \"REGION.OVERLAP\": {\n              target: \"overlap\"\n            },\n            \"REGION.FOCUS\": {\n              actions: [\"setLastFocusedEl\", \"pauseToasts\"]\n            },\n            \"REGION.POINTER_ENTER\": {\n              actions: [\"pauseToasts\"]\n            }\n          }\n        },\n        overlap: {\n          entry: [\"collapseToasts\"],\n          on: {\n            \"REGION.STACK\": {\n              target: \"stack\"\n            },\n            \"REGION.POINTER_ENTER\": {\n              target: \"stack\",\n              actions: [\"pauseToasts\"]\n            },\n            \"REGION.FOCUS\": {\n              target: \"stack\",\n              actions: [\"setLastFocusedEl\", \"pauseToasts\"]\n            }\n          }\n        }\n      }\n    },\n    {\n      guards: {\n        isWithinRange: (ctx2) => ctx2.toasts.length < ctx2.max,\n        isOverlapping: (ctx2) => !!ctx2.overlap\n      },\n      activities: {\n        trackHotKeyPress(ctx2, _evt, { send }) {\n          const handleKeyDown = (event) => {\n            const isHotkeyPressed = ctx2.hotkey.every((key) => event[key] || event.code === key);\n            if (!isHotkeyPressed) return;\n            send({ type: \"DOC.HOTKEY\" });\n          };\n          return addDomEvent(document, \"keydown\", handleKeyDown, { capture: true });\n        },\n        trackDocumentVisibility(ctx2, _evt, { send }) {\n          if (!ctx2.pauseOnPageIdle) return;\n          const doc = dom.getDoc(ctx2);\n          return addDomEvent(doc, \"visibilitychange\", () => {\n            send(doc.visibilityState === \"hidden\" ? \"PAUSE_ALL\" : \"RESUME_ALL\");\n          });\n        }\n      },\n      actions: {\n        setDismissableBranch(ctx2) {\n          const currentToasts = getToastsByPlacement(ctx2.toasts, ctx2.placement);\n          const hasToasts = currentToasts.length > 0;\n          if (!hasToasts) {\n            ctx2._cleanup?.();\n            return;\n          }\n          if (hasToasts && ctx2._cleanup) {\n            return;\n          }\n          const groupEl = () => dom.getRegionEl(ctx2, ctx2.placement);\n          ctx2._cleanup = trackDismissableBranch(groupEl, { defer: true });\n        },\n        clearDismissableBranch(ctx2) {\n          ctx2._cleanup?.();\n        },\n        focusRegionEl(ctx2) {\n          queueMicrotask(() => {\n            dom.getRegionEl(ctx2, ctx2.placement)?.focus();\n          });\n        },\n        expandToasts(ctx2) {\n          each(ctx2, (toast) => {\n            toast.state.context.stacked = true;\n          });\n        },\n        collapseToasts(ctx2) {\n          each(ctx2, (toast) => {\n            toast.state.context.stacked = false;\n          });\n        },\n        collapsedIfEmpty(ctx2, _evt, { send }) {\n          if (!ctx2.overlap || ctx2.toasts.length > 1) return;\n          send(\"REGION.OVERLAP\");\n        },\n        pauseToast(_ctx, evt, { self }) {\n          self.sendChild(\"PAUSE\", evt.id);\n        },\n        pauseToasts(ctx2) {\n          ctx2.toasts.forEach((toast) => toast.send(\"PAUSE\"));\n        },\n        resumeToast(_ctx, evt, { self }) {\n          self.sendChild(\"RESUME\", evt.id);\n        },\n        resumeToasts(ctx2) {\n          ctx2.toasts.forEach((toast) => toast.send(\"RESUME\"));\n        },\n        measureToasts(ctx2) {\n          ctx2.toasts.forEach((toast) => toast.send(\"MEASURE\"));\n        },\n        createToast(ctx2, evt, { self, getState }) {\n          const options = {\n            placement: ctx2.placement,\n            duration: ctx2.duration,\n            removeDelay: ctx2.removeDelay,\n            ...evt.toast,\n            dir: ctx2.dir,\n            getRootNode: ctx2.getRootNode,\n            stacked: getState().matches(\"stack\")\n          };\n          const toast = createToastMachine(options);\n          const actor = self.spawn(toast);\n          ctx2.toasts = [actor, ...ctx2.toasts];\n        },\n        updateToast(_ctx, evt, { self }) {\n          self.sendChild({ type: \"UPDATE\", toast: evt.toast }, evt.id);\n        },\n        dismissToast(_ctx, evt, { self }) {\n          self.sendChild(\"DISMISS\", evt.id);\n        },\n        dismissToasts(ctx2) {\n          ctx2.toasts.forEach((toast) => toast.send(\"DISMISS\"));\n        },\n        removeToast(ctx2, evt, { self }) {\n          self.stopChild(evt.id);\n          ctx2.toasts = ctx2.toasts.filter((toast) => toast.id !== evt.id);\n          ctx2.heights = ctx2.heights.filter((height) => height.id !== evt.id);\n        },\n        removeToasts(ctx2, _evt, { self }) {\n          ctx2.toasts.forEach((toast) => self.stopChild(toast.id));\n          ctx2.toasts = [];\n          ctx2.heights = [];\n        },\n        syncHeights(ctx2, evt) {\n          const existing = ctx2.heights.find((height) => height.id === evt.id);\n          if (existing) {\n            existing.height = evt.height;\n            existing.placement = evt.placement;\n          } else {\n            const newHeight = { id: evt.id, height: evt.height, placement: evt.placement };\n            ctx2.heights = [newHeight, ...ctx2.heights];\n          }\n        },\n        syncToastIndex(ctx2) {\n          each(ctx2, (toast, index, toasts) => {\n            toast.state.context.index = index;\n            toast.state.context.frontmost = index === 0;\n            toast.state.context.zIndex = toasts.length - index;\n          });\n        },\n        syncToastOffset(ctx2, evt) {\n          const placement = evt.placement ?? ctx2.placement;\n          each({ ...ctx2, placement }, (toast) => {\n            const heightIndex = Math.max(\n              ctx2.heights.findIndex((height) => height.id === toast.id),\n              0\n            );\n            const toastsHeightBefore = ctx2.heights.reduce((prev, curr, reducerIndex) => {\n              if (reducerIndex >= heightIndex) return prev;\n              return prev + curr.height;\n            }, 0);\n            toast.state.context.offset = heightIndex * ctx2.gap + toastsHeightBefore;\n          });\n        },\n        setLastFocusedEl(ctx2, evt) {\n          if (ctx2.isFocusWithin || !evt.target) return;\n          ctx2.isFocusWithin = true;\n          ctx2.lastFocusedEl = ref(evt.target);\n        },\n        restoreLastFocusedEl(ctx2) {\n          ctx2.isFocusWithin = false;\n          if (!ctx2.lastFocusedEl) return;\n          ctx2.lastFocusedEl.focus({ preventScroll: true });\n          ctx2.lastFocusedEl = null;\n        },\n        clearLastFocusedEl(ctx2) {\n          if (!ctx2.lastFocusedEl) return;\n          ctx2.lastFocusedEl.focus({ preventScroll: true });\n          ctx2.lastFocusedEl = null;\n          ctx2.isFocusWithin = false;\n        }\n      }\n    }\n  );\n}\nfunction each(ctx, fn) {\n  const currentToasts = getToastsByPlacement(ctx.toasts, ctx.placement);\n  currentToasts.forEach(fn);\n}\nfunction connect(state, send, normalize) {\n  const visible = state.hasTag(\"visible\");\n  const paused = state.hasTag(\"paused\");\n  const placement = state.context.placement;\n  const type = state.context.type;\n  const [side, align = \"center\"] = placement.split(\"-\");\n  return {\n    type,\n    title: state.context.title,\n    description: state.context.description,\n    placement,\n    visible,\n    paused,\n    pause() {\n      send(\"PAUSE\");\n    },\n    resume() {\n      send(\"RESUME\");\n    },\n    dismiss() {\n      send(\"DISMISS\");\n    },\n    getRootProps() {\n      return normalize.element({\n        ...parts.root.attrs,\n        dir: state.context.dir,\n        id: dom.getRootId(state.context),\n        \"data-state\": visible ? \"open\" : \"closed\",\n        \"data-type\": type,\n        \"data-placement\": placement,\n        \"data-align\": align,\n        \"data-side\": side,\n        \"data-mounted\": dataAttr(state.context.mounted),\n        \"data-paused\": dataAttr(paused),\n        \"data-first\": dataAttr(state.context.frontmost),\n        \"data-sibling\": dataAttr(!state.context.frontmost),\n        \"data-stack\": dataAttr(state.context.stacked),\n        \"data-overlap\": dataAttr(!state.context.stacked),\n        role: \"status\",\n        \"aria-atomic\": \"true\",\n        \"aria-describedby\": state.context.description ? dom.getDescriptionId(state.context) : void 0,\n        \"aria-labelledby\": state.context.title ? dom.getTitleId(state.context) : void 0,\n        tabIndex: 0,\n        style: getPlacementStyle(state.context, visible),\n        onKeyDown(event) {\n          if (event.defaultPrevented) return;\n          if (event.key == \"Escape\") {\n            send(\"DISMISS\");\n            event.preventDefault();\n          }\n        }\n      });\n    },\n    /* Leave a ghost div to avoid setting hover to false when transitioning out */\n    getGhostBeforeProps() {\n      return normalize.element({\n        \"data-ghost\": \"before\",\n        style: getGhostBeforeStyle(state.context, visible)\n      });\n    },\n    /* Needed to avoid setting hover to false when in between toasts */\n    getGhostAfterProps() {\n      return normalize.element({\n        \"data-ghost\": \"after\",\n        style: getGhostAfterStyle()\n      });\n    },\n    getTitleProps() {\n      return normalize.element({\n        ...parts.title.attrs,\n        id: dom.getTitleId(state.context)\n      });\n    },\n    getDescriptionProps() {\n      return normalize.element({\n        ...parts.description.attrs,\n        id: dom.getDescriptionId(state.context)\n      });\n    },\n    getActionTriggerProps() {\n      return normalize.button({\n        ...parts.actionTrigger.attrs,\n        type: \"button\",\n        onClick(event) {\n          if (event.defaultPrevented) return;\n          state.context.action?.onClick?.();\n          send(\"DISMISS\");\n        }\n      });\n    },\n    getCloseTriggerProps() {\n      return normalize.button({\n        id: dom.getCloseTriggerId(state.context),\n        ...parts.closeTrigger.attrs,\n        type: \"button\",\n        \"aria-label\": \"Dismiss notification\",\n        onClick(event) {\n          if (event.defaultPrevented) return;\n          send(\"DISMISS\");\n        }\n      });\n    }\n  };\n}\n\n// src/index.ts\nvar group = {\n  connect: groupConnect,\n  machine: groupMachine\n};\n\nexport { anatomy, connect, createToastMachine as createMachine, group };\n"],"mappings":"AAAA,SAASA,aAAa,EAAEC,SAAS,EAAEC,MAAM,EAAEC,GAAG,EAAEC,SAAS,QAAQ,cAAc;AAC/E,SAASC,WAAW,EAAEC,GAAG,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,WAAW,EAAEC,WAAW,QAAQ,mBAAmB;AAC5G,SAASC,OAAO,EAAEC,IAAI,EAAEC,OAAO,EAAEC,IAAI,QAAQ,eAAe;AAC5D,SAASC,aAAa,QAAQ,iBAAiB;AAC/C,SAASC,sBAAsB,QAAQ,qBAAqB;;AAE5D;AACA,IAAIC,OAAO,GAAGF,aAAa,CAAC,OAAO,CAAC,CAACG,KAAK,CACxC,OAAO,EACP,MAAM,EACN,OAAO,EACP,aAAa,EACb,eAAe,EACf,cACF,CAAC;AACD,IAAIA,KAAK,GAAGD,OAAO,CAACE,KAAK,CAAC,CAAC;AAC3B,IAAIC,GAAG,GAAGhB,WAAW,CAAC;EACpBiB,WAAW,EAAGC,SAAS,IAAK,eAAeA,SAAS,EAAE;EACtDC,WAAW,EAAEA,CAACC,GAAG,EAAEF,SAAS,KAAKF,GAAG,CAACK,OAAO,CAACD,GAAG,EAAE,eAAeF,SAAS,EAAE,CAAC;EAC7EI,SAAS,EAAGF,GAAG,IAAK,SAASA,GAAG,CAACG,EAAE,EAAE;EACrCC,SAAS,EAAGJ,GAAG,IAAKJ,GAAG,CAACK,OAAO,CAACD,GAAG,EAAEJ,GAAG,CAACM,SAAS,CAACF,GAAG,CAAC,CAAC;EACxDK,UAAU,EAAGL,GAAG,IAAK,SAASA,GAAG,CAACG,EAAE,QAAQ;EAC5CG,gBAAgB,EAAGN,GAAG,IAAK,SAASA,GAAG,CAACG,EAAE,cAAc;EACxDI,iBAAiB,EAAGP,GAAG,IAAK,QAAQA,GAAG,CAACG,EAAE;AAC5C,CAAC,CAAC;AACF,SAASK,oBAAoBA,CAACC,MAAM,EAAEX,SAAS,EAAE;EAC/C,OAAOW,MAAM,CAACC,MAAM,CAAEC,KAAK,IAAKA,KAAK,CAACC,KAAK,CAACC,OAAO,CAACf,SAAS,KAAKA,SAAS,CAAC;AAC9E;AACA,IAAIgB,eAAe,GAAG;EACpBC,IAAI,EAAE,GAAG;EACTC,KAAK,EAAE,GAAG;EACVC,OAAO,EAAE,GAAG;EACZC,OAAO,EAAEC,QAAQ;EACjBC,OAAO,EAAE;AACX,CAAC;AACD,SAASC,gBAAgBA,CAACC,QAAQ,EAAEC,IAAI,EAAE;EACxC,OAAOD,QAAQ,IAAIR,eAAe,CAACS,IAAI,CAAC,IAAIT,eAAe,CAACM,OAAO;AACrE;AACA,SAASI,sBAAsBA,CAACxB,GAAG,EAAEF,SAAS,EAAE;EAC9C,MAAM2B,MAAM,GAAGzB,GAAG,CAAC0B,OAAO;EAC1B,MAAMC,cAAc,GAAG,OAAOF,MAAM,KAAK,QAAQ,GAAG;IAAEG,IAAI,EAAEH,MAAM;IAAEI,KAAK,EAAEJ,MAAM;IAAEK,MAAM,EAAEL,MAAM;IAAEM,GAAG,EAAEN;EAAO,CAAC,GAAGA,MAAM;EACzH,MAAMO,GAAG,GAAGhC,GAAG,CAACiC,GAAG,KAAK,KAAK;EAC7B,MAAMC,iBAAiB,GAAGpC,SAAS,CAACqC,OAAO,CAAC,QAAQ,EAAEH,GAAG,GAAG,QAAQ,GAAG,OAAO,CAAC,CAACG,OAAO,CAAC,MAAM,EAAEH,GAAG,GAAG,OAAO,GAAG,QAAQ,CAAC;EACzH,MAAMI,QAAQ,GAAGF,iBAAiB,CAACG,QAAQ,CAAC,OAAO,CAAC;EACpD,MAAMC,OAAO,GAAGJ,iBAAiB,CAACG,QAAQ,CAAC,MAAM,CAAC;EAClD,MAAME,MAAM,GAAG;IACbC,QAAQ,EAAE,OAAO;IACjBC,aAAa,EAAEzC,GAAG,CAAC0C,KAAK,GAAG,CAAC,GAAG,KAAK,CAAC,GAAG,MAAM;IAC9CC,OAAO,EAAE,MAAM;IACfC,aAAa,EAAE,QAAQ;IACvB,OAAO,EAAE,GAAG5C,GAAG,CAAC6C,GAAG,IAAI;IACvB,gBAAgB,EAAE,GAAG7C,GAAG,CAAC8C,OAAO,CAAC,CAAC,CAAC,EAAEC,MAAM,IAAI,CAAC,IAAI;IACpDC,MAAM,EAAE9D;EACV,CAAC;EACD,IAAI+D,UAAU,GAAG,QAAQ;EACzB,IAAIb,QAAQ,EAAEa,UAAU,GAAG,UAAU;EACrC,IAAIX,OAAO,EAAEW,UAAU,GAAG,YAAY;EACtCV,MAAM,CAACU,UAAU,GAAGA,UAAU;EAC9B,IAAIf,iBAAiB,CAACG,QAAQ,CAAC,KAAK,CAAC,EAAE;IACrC,MAAMa,OAAO,GAAGvB,cAAc,CAACI,GAAG;IAClCQ,MAAM,CAACR,GAAG,GAAG,sCAAsCmB,OAAO,GAAG;EAC/D;EACA,IAAIhB,iBAAiB,CAACG,QAAQ,CAAC,QAAQ,CAAC,EAAE;IACxC,MAAMa,OAAO,GAAGvB,cAAc,CAACG,MAAM;IACrCS,MAAM,CAACT,MAAM,GAAG,yCAAyCoB,OAAO,GAAG;EACrE;EACA,IAAI,CAAChB,iBAAiB,CAACG,QAAQ,CAAC,MAAM,CAAC,EAAE;IACvC,MAAMa,OAAO,GAAGvB,cAAc,CAACE,KAAK;IACpCU,MAAM,CAACY,cAAc,GAAG,0CAA0CD,OAAO,GAAG;EAC9E;EACA,IAAI,CAAChB,iBAAiB,CAACG,QAAQ,CAAC,OAAO,CAAC,EAAE;IACxC,MAAMa,OAAO,GAAGvB,cAAc,CAACC,IAAI;IACnCW,MAAM,CAACa,gBAAgB,GAAG,yCAAyCF,OAAO,GAAG;EAC/E;EACA,OAAOX,MAAM;AACf;AACA,SAASc,iBAAiBA,CAACrD,GAAG,EAAEsD,OAAO,EAAE;EACvC,MAAM,CAACC,IAAI,CAAC,GAAGvD,GAAG,CAACF,SAAS,CAAC0D,KAAK,CAAC,GAAG,CAAC;EACvC,MAAMC,OAAO,GAAG,CAACzD,GAAG,CAAC0D,SAAS;EAC9B,MAAMC,OAAO,GAAG,CAAC3D,GAAG,CAAC4D,OAAO;EAC5B,MAAMrB,MAAM,GAAG;IACbC,QAAQ,EAAE,UAAU;IACpBC,aAAa,EAAE,MAAM;IACrB,WAAW,EAAE,GAAG;IAChB,gBAAgB,EAAE,GAAGzC,GAAG,CAAC6D,WAAW,IAAI;IACxC,YAAY,EAAE,GAAG7D,GAAG,CAACuB,IAAI,KAAK,SAAS,GAAGuC,MAAM,CAACC,gBAAgB,GAAG/D,GAAG,CAACsB,QAAQ,IAAI;IACpF,kBAAkB,EAAE,GAAGtB,GAAG,CAAC+C,MAAM,IAAI;IACrC,UAAU,EAAE,GAAG/C,GAAG,CAACyB,MAAM,IAAI;IAC7B,SAAS,EAAEzB,GAAG,CAACgE,KAAK;IACpB,WAAW,EAAEhE,GAAG,CAACgD,MAAM;IACvB,eAAe,EAAE,gCAAgC;IACjD,KAAK,EAAE,MAAM;IACb,KAAK,EAAE;EACT,CAAC;EACD,MAAMiB,MAAM,GAAIC,SAAS,IAAKC,MAAM,CAACF,MAAM,CAAC1B,MAAM,EAAE2B,SAAS,CAAC;EAC9D,IAAIX,IAAI,KAAK,KAAK,EAAE;IAClBU,MAAM,CAAC;MACLlC,GAAG,EAAE,GAAG;MACR,QAAQ,EAAE,IAAI;MACd,KAAK,EAAE,OAAO;MACd,QAAQ,EAAE;IACZ,CAAC,CAAC;EACJ,CAAC,MAAM,IAAIwB,IAAI,KAAK,QAAQ,EAAE;IAC5BU,MAAM,CAAC;MACLnC,MAAM,EAAE,GAAG;MACX,QAAQ,EAAE,GAAG;MACb,KAAK,EAAE,MAAM;MACb,QAAQ,EAAE;IACZ,CAAC,CAAC;EACJ;EACA,IAAI9B,GAAG,CAACoE,OAAO,EAAE;IACfH,MAAM,CAAC;MACL,KAAK,EAAE,GAAG;MACV,WAAW,EAAE;IACf,CAAC,CAAC;IACF,IAAIjE,GAAG,CAAC4D,OAAO,EAAE;MACfK,MAAM,CAAC;QACL,KAAK,EAAE,mCAAmC;QAC1C,UAAU,EAAE;MACd,CAAC,CAAC;IACJ;EACF;EACA,IAAI,CAACX,OAAO,EAAE;IACZW,MAAM,CAAC;MACL,WAAW,EAAE,GAAG;MAChBxB,aAAa,EAAE;IACjB,CAAC,CAAC;EACJ;EACA,IAAIgB,OAAO,IAAIE,OAAO,EAAE;IACtBM,MAAM,CAAC;MACL,cAAc,EAAE,yBAAyB;MACzC,KAAK,EAAE,yCAAyC;MAChD,SAAS,EAAE,8BAA8B;MACzC,UAAU,EAAE;IACd,CAAC,CAAC;IACF,IAAI,CAACX,OAAO,EAAE;MACZW,MAAM,CAAC;QACL,KAAK,EAAE;MACT,CAAC,CAAC;IACJ;EACF;EACA,IAAIR,OAAO,IAAIzD,GAAG,CAAC4D,OAAO,IAAI,CAACN,OAAO,EAAE;IACtCW,MAAM,CAAC;MACL,KAAK,EAAE;IACT,CAAC,CAAC;EACJ;EACA,IAAIjE,GAAG,CAAC0D,SAAS,IAAI,CAACJ,OAAO,EAAE;IAC7BW,MAAM,CAAC;MACL,KAAK,EAAE;IACT,CAAC,CAAC;EACJ;EACA,OAAO1B,MAAM;AACf;AACA,SAAS8B,mBAAmBA,CAACrE,GAAG,EAAEsD,OAAO,EAAE;EACzC,MAAMf,MAAM,GAAG;IACbC,QAAQ,EAAE,UAAU;IACpB8B,KAAK,EAAE,GAAG;IACVC,KAAK,EAAE,KAAK;IACZ9B,aAAa,EAAEa,OAAO,GAAG,MAAM,GAAG;EACpC,CAAC;EACD,MAAMW,MAAM,GAAIC,SAAS,IAAKC,MAAM,CAACF,MAAM,CAAC1B,MAAM,EAAE2B,SAAS,CAAC;EAC9D,IAAIlE,GAAG,CAAC0D,SAAS,IAAI,CAACJ,OAAO,EAAE;IAC7BW,MAAM,CAAC;MACLlB,MAAM,EAAE;IACV,CAAC,CAAC;EACJ;EACA,OAAOR,MAAM;AACf;AACA,SAASiC,kBAAkBA,CAACC,IAAI,EAAEC,QAAQ,EAAE;EAC1C,OAAO;IACLlC,QAAQ,EAAE,UAAU;IACpBZ,IAAI,EAAE,GAAG;IACTmB,MAAM,EAAE,wBAAwB;IAChCjB,MAAM,EAAE,MAAM;IACd6C,KAAK,EAAE;EACT,CAAC;AACH;;AAEA;AACA,SAASC,YAAYA,CAACC,cAAc,EAAEC,IAAI,EAAEC,SAAS,EAAE;EACrD,SAASC,QAAQA,CAAA,EAAG;IAClB,MAAMC,MAAM,GAAGtG,SAAS,CAACkG,cAAc,CAAC,GAAGA,cAAc,CAACG,QAAQ,CAAC,CAAC,GAAGH,cAAc;IACrF,OAAOI,MAAM;EACf;EACA,SAASC,wBAAwBA,CAACpF,SAAS,EAAE;IAC3C,OAAOU,oBAAoB,CAACwE,QAAQ,CAAC,CAAC,CAACnE,OAAO,CAACJ,MAAM,EAAEX,SAAS,CAAC;EACnE;EACA,SAASqF,SAASA,CAAChF,EAAE,EAAE;IACrB,MAAMM,MAAM,GAAGuE,QAAQ,CAAC,CAAC,CAACnE,OAAO,CAACJ,MAAM;IACxC,IAAI,CAACA,MAAM,CAAC2E,MAAM,EAAE,OAAO,KAAK;IAChC,OAAO,CAAC,CAAC3E,MAAM,CAAC4E,IAAI,CAAE1E,KAAK,IAAKA,KAAK,CAACR,EAAE,IAAIA,EAAE,CAAC;EACjD;EACA,SAASmF,MAAMA,CAACC,OAAO,EAAE;IACvB,MAAMC,GAAG,GAAG,SAASlG,IAAI,CAAC,CAAC,EAAE;IAC7B,MAAMa,EAAE,GAAGoF,OAAO,CAACpF,EAAE,GAAGoF,OAAO,CAACpF,EAAE,GAAGqF,GAAG;IACxC,IAAIL,SAAS,CAAChF,EAAE,CAAC,EAAE,OAAOA,EAAE;IAC5B2E,IAAI,CAAC;MAAEvD,IAAI,EAAE,WAAW;MAAEZ,KAAK,EAAE;QAAE,GAAG4E,OAAO;QAAEpF;MAAG;IAAE,CAAC,CAAC;IACtD,OAAOA,EAAE;EACX;EACA,SAASsF,MAAMA,CAACtF,EAAE,EAAEoF,OAAO,EAAE;IAC3B,IAAI,CAACJ,SAAS,CAAChF,EAAE,CAAC,EAAE,OAAOA,EAAE;IAC7B2E,IAAI,CAAC;MAAEvD,IAAI,EAAE,cAAc;MAAEpB,EAAE;MAAEQ,KAAK,EAAE4E;IAAQ,CAAC,CAAC;IAClD,OAAOpF,EAAE;EACX;EACA,SAASuF,MAAMA,CAACH,OAAO,EAAE;IACvB,MAAM;MAAEpF;IAAG,CAAC,GAAGoF,OAAO;IACtB,MAAMjC,OAAO,GAAGnD,EAAE,GAAGgF,SAAS,CAAChF,EAAE,CAAC,GAAG,KAAK;IAC1C,IAAImD,OAAO,IAAInD,EAAE,IAAI,IAAI,EAAE;MACzB,OAAOsF,MAAM,CAACtF,EAAE,EAAEoF,OAAO,CAAC;IAC5B,CAAC,MAAM;MACL,OAAOD,MAAM,CAACC,OAAO,CAAC;IACxB;EACF;EACA,SAASI,OAAOA,CAACxF,EAAE,EAAE;IACnB,IAAIA,EAAE,IAAI,IAAI,EAAE;MACd2E,IAAI,CAAC,aAAa,CAAC;IACrB,CAAC,MAAM,IAAIK,SAAS,CAAChF,EAAE,CAAC,EAAE;MACxB2E,IAAI,CAAC;QAAEvD,IAAI,EAAE,eAAe;QAAEpB;MAAG,CAAC,CAAC;IACrC;EACF;EACA,OAAO;IACLyF,QAAQA,CAAA,EAAG;MACT,OAAOZ,QAAQ,CAAC,CAAC,CAACnE,OAAO,CAAC6B,KAAK;IACjC,CAAC;IACDmD,aAAaA,CAAA,EAAG;MACd,MAAMpF,MAAM,GAAGuE,QAAQ,CAAC,CAAC,CAACnE,OAAO,CAACJ,MAAM;MACxC,MAAMqF,UAAU,GAAGrF,MAAM,CAACsF,GAAG,CAAEpF,KAAK,IAAKA,KAAK,CAACC,KAAK,CAACC,OAAO,CAACf,SAAS,CAAC;MACvE,OAAOkG,KAAK,CAACC,IAAI,CAAC,IAAIC,GAAG,CAACJ,UAAU,CAAC,CAAC;IACxC,CAAC;IACDtF,oBAAoB,EAAE0E,wBAAwB;IAC9CC,SAAS;IACTG,MAAM;IACNG,MAAM;IACNC,MAAM;IACNC,OAAO;IACPQ,MAAMA,CAAChG,EAAE,EAAE;MACT,IAAIA,EAAE,IAAI,IAAI,EAAE;QACd2E,IAAI,CAAC,YAAY,CAAC;MACpB,CAAC,MAAM,IAAIK,SAAS,CAAChF,EAAE,CAAC,EAAE;QACxB2E,IAAI,CAAC;UAAEvD,IAAI,EAAE,cAAc;UAAEpB;QAAG,CAAC,CAAC;MACpC;IACF,CAAC;IACDiG,kBAAkBA,CAACtG,SAAS,EAAE;MAC5B,MAAMW,MAAM,GAAGyE,wBAAwB,CAACpF,SAAS,CAAC;MAClDW,MAAM,CAAC4F,OAAO,CAAE1F,KAAK,IAAKgF,OAAO,CAAChF,KAAK,CAACR,EAAE,CAAC,CAAC;IAC9C,CAAC;IACDe,OAAOA,CAACqE,OAAO,EAAE;MACf,OAAOG,MAAM,CAAC;QAAE,GAAGH,OAAO;QAAEhE,IAAI,EAAE;MAAU,CAAC,CAAC;IAChD,CAAC;IACDN,OAAOA,CAACsE,OAAO,EAAE;MACf,OAAOG,MAAM,CAAC;QAAE,GAAGH,OAAO;QAAEhE,IAAI,EAAE;MAAU,CAAC,CAAC;IAChD,CAAC;IACDP,KAAKA,CAACuE,OAAO,EAAE;MACb,OAAOG,MAAM,CAAC;QAAE,GAAGH,OAAO;QAAEhE,IAAI,EAAE;MAAQ,CAAC,CAAC;IAC9C,CAAC;IACD+E,OAAOA,CAACA,OAAO,EAAEf,OAAO,EAAEgB,MAAM,GAAG,CAAC,CAAC,EAAE;MACrC,MAAMpG,EAAE,GAAGuF,MAAM,CAAC;QAAE,GAAGa,MAAM;QAAE,GAAGhB,OAAO,CAACrE,OAAO;QAAEK,IAAI,EAAE;MAAU,CAAC,CAAC;MACrElC,OAAO,CAACiH,OAAO,CAAC,CAACE,IAAI,CAAEC,QAAQ,IAAK;QAClC,MAAMC,cAAc,GAAGrH,OAAO,CAACkG,OAAO,CAACtE,OAAO,EAAEwF,QAAQ,CAAC;QACzDf,MAAM,CAAC;UAAE,GAAGa,MAAM;UAAE,GAAGG,cAAc;UAAEvG,EAAE;UAAEoB,IAAI,EAAE;QAAU,CAAC,CAAC;MAC/D,CAAC,CAAC,CAACoF,KAAK,CAAE3F,KAAK,IAAK;QAClB,MAAM4F,YAAY,GAAGvH,OAAO,CAACkG,OAAO,CAACvE,KAAK,EAAEA,KAAK,CAAC;QAClD0E,MAAM,CAAC;UAAE,GAAGa,MAAM;UAAE,GAAGK,YAAY;UAAEzG,EAAE;UAAEoB,IAAI,EAAE;QAAQ,CAAC,CAAC;MAC3D,CAAC,CAAC,CAACsF,OAAO,CAAC,MAAM;QACftB,OAAO,CAACsB,OAAO,GAAG,CAAC;MACrB,CAAC,CAAC;MACF,OAAO1G,EAAE;IACX,CAAC;IACD2G,KAAKA,CAAC3G,EAAE,EAAE;MACR,IAAIA,EAAE,IAAI,IAAI,EAAE;QACd2E,IAAI,CAAC,WAAW,CAAC;MACnB,CAAC,MAAM,IAAIK,SAAS,CAAChF,EAAE,CAAC,EAAE;QACxB2E,IAAI,CAAC;UAAEvD,IAAI,EAAE,aAAa;UAAEpB;QAAG,CAAC,CAAC;MACnC;IACF,CAAC;IACD4G,MAAMA,CAAC5G,EAAE,EAAE;MACT,IAAIA,EAAE,IAAI,IAAI,EAAE;QACd2E,IAAI,CAAC,YAAY,CAAC;MACpB,CAAC,MAAM,IAAIK,SAAS,CAAChF,EAAE,CAAC,EAAE;QACxB2E,IAAI,CAAC;UAAEvD,IAAI,EAAE,cAAc;UAAEpB;QAAG,CAAC,CAAC;MACpC;IACF,CAAC;IACD6G,aAAaA,CAACzB,OAAO,EAAE;MACrB,MAAM;QAAEzF,SAAS;QAAEmH,KAAK,GAAG;MAAgB,CAAC,GAAG1B,OAAO;MACtD,MAAM3E,KAAK,GAAGoE,QAAQ,CAAC,CAAC;MACxB,MAAMkC,WAAW,GAAGtG,KAAK,CAACC,OAAO,CAACsG,MAAM,CAACC,IAAI,CAAC,GAAG,CAAC,CAACjF,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAACA,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC;MAC5F,MAAM,CAACoB,IAAI,EAAE8D,KAAK,GAAG,QAAQ,CAAC,GAAGvH,SAAS,CAAC0D,KAAK,CAAC,GAAG,CAAC;MACrD,OAAOuB,SAAS,CAACuC,OAAO,CAAC;QACvB,GAAG5H,KAAK,CAAC6H,KAAK,CAACC,KAAK;QACpBvF,GAAG,EAAErB,KAAK,CAACC,OAAO,CAACoB,GAAG;QACtBwF,QAAQ,EAAE,CAAC,CAAC;QACZ,YAAY,EAAE,GAAG3H,SAAS,IAAImH,KAAK,IAAIC,WAAW,EAAE;QACpD/G,EAAE,EAAEP,GAAG,CAACC,WAAW,CAACC,SAAS,CAAC;QAC9B,gBAAgB,EAAEA,SAAS;QAC3B,WAAW,EAAEyD,IAAI;QACjB,YAAY,EAAE8D,KAAK;QACnB,WAAW,EAAE,QAAQ;QACrBK,IAAI,EAAE,QAAQ;QACdC,KAAK,EAAEnG,sBAAsB,CAACZ,KAAK,CAACC,OAAO,EAAEf,SAAS,CAAC;QACvD8H,WAAWA,CAAA,EAAG;UACZ9C,IAAI,CAAC;YAAEvD,IAAI,EAAE,sBAAsB;YAAEzB;UAAU,CAAC,CAAC;QACnD,CAAC;QACD+H,YAAYA,CAAA,EAAG;UACb/C,IAAI,CAAC;YAAEvD,IAAI,EAAE,sBAAsB;YAAEzB;UAAU,CAAC,CAAC;QACnD,CAAC;QACDgI,OAAOA,CAACC,KAAK,EAAE;UACbjD,IAAI,CAAC;YAAEvD,IAAI,EAAE,cAAc;YAAEyG,MAAM,EAAED,KAAK,CAACE;UAAc,CAAC,CAAC;QAC7D,CAAC;QACDC,MAAMA,CAACH,KAAK,EAAE;UACZ,IAAInH,KAAK,CAACC,OAAO,CAACsH,aAAa,IAAI,CAACnJ,QAAQ,CAAC+I,KAAK,CAACK,aAAa,EAAEL,KAAK,CAACE,aAAa,CAAC,EAAE;YACtFnD,IAAI,CAAC;cAAEvD,IAAI,EAAE;YAAc,CAAC,CAAC;UAC/B;QACF;MACF,CAAC,CAAC;IACJ,CAAC;IACD/C,SAASA,CAAC6J,EAAE,EAAE;MACZ,MAAMzH,KAAK,GAAGoE,QAAQ,CAAC,CAAC;MACxB,OAAOxG,SAAS,CAACoC,KAAK,CAACC,OAAO,CAACJ,MAAM,EAAE,MAAM;QAC3C,MAAMA,MAAM,GAAGyE,wBAAwB,CAACtE,KAAK,CAACC,OAAO,CAACf,SAAS,CAAC;QAChE,MAAMwI,QAAQ,GAAG7H,MAAM,CAACsF,GAAG,CAAEpF,KAAK,IAAKA,KAAK,CAACqE,QAAQ,CAAC,CAAC,CAACnE,OAAO,CAAC;QAChEwH,EAAE,CAACC,QAAQ,CAAC;MACd,CAAC,CAAC;IACJ;EACF,CAAC;AACH;AACA,IAAI;EAAEC,GAAG;EAAEC,GAAG;EAAEC;AAAG,CAAC,GAAGhK,MAAM;AAC7B,SAASiK,kBAAkBA,CAACnD,OAAO,EAAE;EACnC,MAAM;IAAEhE,IAAI,GAAG,MAAM;IAAED,QAAQ;IAAEnB,EAAE,GAAG,GAAG;IAAEL,SAAS,GAAG,QAAQ;IAAE+D,WAAW,GAAG,GAAG;IAAE,GAAG8E;EAAU,CAAC,GAAGpD,OAAO;EAC5G,MAAMvF,GAAG,GAAGb,OAAO,CAACwJ,SAAS,CAAC;EAC9B,MAAMC,gBAAgB,GAAGvH,gBAAgB,CAACC,QAAQ,EAAEC,IAAI,CAAC;EACzD,OAAOhD,aAAa,CAClB;IACE4B,EAAE;IACFU,OAAO,EAAE;MACPV,EAAE;MACFoB,IAAI;MACJsH,SAAS,EAAED,gBAAgB;MAC3BtH,QAAQ,EAAEsH,gBAAgB;MAC1B/E,WAAW;MACXiF,SAAS,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC;MACrBlJ,SAAS;MACT,GAAGE,GAAG;MACN+C,MAAM,EAAE,CAAC;MACTtB,MAAM,EAAE,CAAC;MACTiC,SAAS,EAAE,KAAK;MAChBU,OAAO,EAAE,KAAK;MACdJ,KAAK,EAAE,CAAC,CAAC;MACThB,MAAM,EAAE;IACV,CAAC;IACDiG,OAAO,EAAE1H,IAAI,KAAK,SAAS,GAAG,iBAAiB,GAAG,SAAS;IAC3D2H,EAAE,EAAE;MACFC,MAAM,EAAE,CACN;QACEC,KAAK,EAAEZ,GAAG,CAAC,gBAAgB,EAAE,qBAAqB,CAAC;QACnDR,MAAM,EAAE,iBAAiB;QACzBqB,OAAO,EAAE,CAAC,YAAY;MACxB,CAAC,EACD;QACED,KAAK,EAAEX,EAAE,CAAC,oBAAoB,EAAE,gBAAgB,CAAC;QACjDT,MAAM,EAAE,kBAAkB;QAC1BqB,OAAO,EAAE,CAAC,YAAY;MACxB,CAAC,EACD;QACEA,OAAO,EAAE,CAAC,YAAY;MACxB,CAAC,CACF;MACDC,OAAO,EAAE;QACPD,OAAO,EAAE,CAAC,eAAe;MAC3B;IACF,CAAC;IACDE,KAAK,EAAE,CAAC,iBAAiB,CAAC;IAC1BC,UAAU,EAAE,CAAC,aAAa,CAAC;IAC3BC,MAAM,EAAE;MACN,kBAAkB,EAAE;QAClBC,IAAI,EAAE,CAAC,SAAS,EAAE,UAAU,CAAC;QAC7BC,KAAK,EAAE;UACL,CAAC,EAAE;QACL;MACF,CAAC;MACD,iBAAiB,EAAE;QACjBD,IAAI,EAAE,CAAC,SAAS,EAAE,QAAQ,CAAC;QAC3BR,EAAE,EAAE;UACFU,MAAM,EAAE;YACNR,KAAK,EAAEb,GAAG,CAAC,eAAe,CAAC;YAC3BP,MAAM,EAAE,SAAS;YACjBqB,OAAO,EAAE,CAAC,cAAc;UAC1B,CAAC;UACDQ,OAAO,EAAE;QACX;MACF,CAAC;MACDvG,OAAO,EAAE;QACPoG,IAAI,EAAE,CAAC,SAAS,CAAC;QACjBC,KAAK,EAAE;UACLG,gBAAgB,EAAE;QACpB,CAAC;QACDZ,EAAE,EAAE;UACFW,OAAO,EAAE,YAAY;UACrBE,KAAK,EAAE;YACL/B,MAAM,EAAE,iBAAiB;YACzBqB,OAAO,EAAE;UACX;QACF;MACF,CAAC;MACDW,UAAU,EAAE;QACVT,KAAK,EAAE,iBAAiB;QACxBI,KAAK,EAAE;UACLM,YAAY,EAAE;YACZjC,MAAM,EAAE,WAAW;YACnBqB,OAAO,EAAE;UACX;QACF;MACF,CAAC;MACDa,SAAS,EAAE;QACTX,KAAK,EAAE,iBAAiB;QACxBhI,IAAI,EAAE;MACR;IACF;EACF,CAAC,EACD;IACEiI,UAAU,EAAE;MACVW,WAAWA,CAACC,IAAI,EAAEC,IAAI,EAAE;QAAEC;MAAK,CAAC,EAAE;QAChC,IAAIC,OAAO;QACX1L,GAAG,CAAC,MAAM;UACR,MAAM2L,MAAM,GAAG5K,GAAG,CAACQ,SAAS,CAACgK,IAAI,CAAC;UAClC,IAAI,CAACI,MAAM,EAAE;UACbJ,IAAI,CAAChG,OAAO,GAAG,IAAI;UACnB,MAAMqG,MAAM,GAAG3L,QAAQ,CAAC0L,MAAM,EAAE,cAAc,CAAC;UAC/CpL,IAAI,CACFqL,MAAM,CAACrF,MAAM,KAAK,CAAC,EACnB,6FACF,CAAC;UACD,MAAMsF,UAAU,GAAGA,CAAA,KAAM;YACvB,MAAMC,cAAc,GAAGH,MAAM,CAAC7C,KAAK,CAAC5E,MAAM;YAC1CyH,MAAM,CAAC7C,KAAK,CAAC5E,MAAM,GAAG,MAAM;YAC5B,MAAM6H,SAAS,GAAGJ,MAAM,CAACK,qBAAqB,CAAC,CAAC,CAAC9H,MAAM;YACvDyH,MAAM,CAAC7C,KAAK,CAAC5E,MAAM,GAAG4H,cAAc;YACpCP,IAAI,CAACrH,MAAM,GAAG6H,SAAS;YACvBN,IAAI,CAACQ,UAAU,CAAC;cAAEvJ,IAAI,EAAE,eAAe;cAAEpB,EAAE,EAAEmK,IAAI,CAACnK,EAAE;cAAE4C,MAAM,EAAE6H,SAAS;cAAE9K,SAAS,EAAEsK,IAAI,CAACtK;YAAU,CAAC,CAAC;UACvG,CAAC;UACD4K,UAAU,CAAC,CAAC;UACZ,MAAMK,GAAG,GAAGnL,GAAG,CAACoL,MAAM,CAACZ,IAAI,CAAC;UAC5B,MAAMa,QAAQ,GAAG,IAAIF,GAAG,CAACG,gBAAgB,CAACR,UAAU,CAAC;UACrDO,QAAQ,CAACE,OAAO,CAACX,MAAM,EAAE;YAAEY,SAAS,EAAE,IAAI;YAAEC,OAAO,EAAE,IAAI;YAAEC,aAAa,EAAE;UAAK,CAAC,CAAC;UACjFf,OAAO,GAAGA,CAAA,KAAMU,QAAQ,CAACM,UAAU,CAAC,CAAC;QACvC,CAAC,CAAC;QACF,OAAO,MAAMhB,OAAO,GAAG,CAAC;MAC1B;IACF,CAAC;IACD9L,MAAM,EAAE;MACN+M,mBAAmB,EAAEA,CAACC,CAAC,EAAEC,GAAG,KAAKA,GAAG,CAAC/K,KAAK,EAAEY,IAAI,KAAK,SAAS;MAC9DoK,aAAa,EAAGvB,IAAI,IAAKA,IAAI,CAAC7I,IAAI,KAAK,SAAS;MAChDqK,cAAc,EAAEA,CAACxB,IAAI,EAAEsB,GAAG,KAAKA,GAAG,CAAC/K,KAAK,EAAEY,IAAI,IAAI,IAAI,IAAImK,GAAG,CAAC/K,KAAK,CAACY,IAAI,KAAK6I,IAAI,CAAC7I,IAAI;MACtFsK,kBAAkB,EAAEA,CAACzB,IAAI,EAAEsB,GAAG,KAAKA,GAAG,CAAC/K,KAAK,EAAEW,QAAQ,IAAI,IAAI,IAAIoK,GAAG,CAAC/K,KAAK,CAACW,QAAQ,KAAK8I,IAAI,CAAC9I;IAChG,CAAC;IACDwK,MAAM,EAAE;MACNhC,gBAAgB,EAAGM,IAAI,IAAKA,IAAI,CAACvB,SAAS;MAC1CoB,YAAY,EAAGG,IAAI,IAAKA,IAAI,CAACvG;IAC/B,CAAC;IACDwF,OAAO,EAAE;MACP0C,aAAaA,CAAC3B,IAAI,EAAEC,IAAI,EAAE;QAAEC;MAAK,CAAC,EAAE;QAClCzL,GAAG,CAAC,MAAM;UACR,MAAM2L,MAAM,GAAG5K,GAAG,CAACQ,SAAS,CAACgK,IAAI,CAAC;UAClC,IAAI,CAACI,MAAM,EAAE;UACbJ,IAAI,CAAChG,OAAO,GAAG,IAAI;UACnB,MAAMuG,cAAc,GAAGH,MAAM,CAAC7C,KAAK,CAAC5E,MAAM;UAC1CyH,MAAM,CAAC7C,KAAK,CAAC5E,MAAM,GAAG,MAAM;UAC5B,MAAM6H,SAAS,GAAGJ,MAAM,CAACK,qBAAqB,CAAC,CAAC,CAAC9H,MAAM;UACvDyH,MAAM,CAAC7C,KAAK,CAAC5E,MAAM,GAAG4H,cAAc;UACpCP,IAAI,CAACrH,MAAM,GAAG6H,SAAS;UACvBN,IAAI,CAACQ,UAAU,CAAC;YAAEvJ,IAAI,EAAE,eAAe;YAAEpB,EAAE,EAAEmK,IAAI,CAACnK,EAAE;YAAE4C,MAAM,EAAE6H,SAAS;YAAE9K,SAAS,EAAEsK,IAAI,CAACtK;UAAU,CAAC,CAAC;QACvG,CAAC,CAAC;MACJ,CAAC;MACDkM,oBAAoBA,CAAC5B,IAAI,EAAE;QACzBA,IAAI,CAACvB,SAAS,IAAIE,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGoB,IAAI,CAACtB,SAAS;MAC/C,CAAC;MACDmD,YAAYA,CAAC7B,IAAI,EAAE;QACjBA,IAAI,CAACtB,SAAS,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC;MAC7B,CAAC;MACDkD,oBAAoBA,CAACzH,IAAI,EAAE4F,IAAI,EAAE;QAAEC;MAAK,CAAC,EAAE;QACzCA,IAAI,CAACQ,UAAU,CAAC;UAAEvJ,IAAI,EAAE,cAAc;UAAEpB,EAAE,EAAEmK,IAAI,CAACnK;QAAG,CAAC,CAAC;MACxD,CAAC;MACDgM,eAAeA,CAAC/B,IAAI,EAAE;QACpBA,IAAI,CAACgC,cAAc,GAAG;UAAEC,MAAM,EAAE;QAAa,CAAC,CAAC;MACjD,CAAC;MACDC,eAAeA,CAAClC,IAAI,EAAE;QACpBA,IAAI,CAACgC,cAAc,GAAG;UAAEC,MAAM,EAAE;QAAY,CAAC,CAAC;MAChD,CAAC;MACDE,eAAeA,CAACnC,IAAI,EAAE;QACpBA,IAAI,CAACgC,cAAc,GAAG;UAAEC,MAAM,EAAE;QAAU,CAAC,CAAC;MAC9C,CAAC;MACDG,UAAUA,CAACpC,IAAI,EAAEsB,GAAG,EAAE;QACpB,MAAMe,SAAS,GAAGf,GAAG,CAAC/K,KAAK,EAAEW,QAAQ;QACrC,MAAMoL,KAAK,GAAGhB,GAAG,CAAC/K,KAAK,EAAEY,IAAI,IAAI6I,IAAI,CAAC7I,IAAI;QAC1C,MAAMoL,iBAAiB,GAAGtL,gBAAgB,CAACoL,SAAS,EAAEC,KAAK,CAAC;QAC5DvI,MAAM,CAACF,MAAM,CAACmG,IAAI,EAAE;UAClB,GAAGsB,GAAG,CAAC/K,KAAK;UACZW,QAAQ,EAAEqL,iBAAiB;UAC3B9D,SAAS,EAAE8D;QACb,CAAC,CAAC;MACJ;IACF;EACF,CACF,CAAC;AACH;;AAEA;AACA,SAASC,YAAYA,CAACC,WAAW,EAAE;EACjC,MAAM7M,GAAG,GAAGb,OAAO,CAAC0N,WAAW,CAAC;EAChC,OAAOtO,aAAa,CAClB;IACE4B,EAAE,EAAE,SAAS;IACb8I,OAAO,EAAEjJ,GAAG,CAAC2D,OAAO,GAAG,SAAS,GAAG,OAAO;IAC1C9C,OAAO,EAAE;MACPoB,GAAG,EAAE,KAAK;MACV6K,GAAG,EAAEhJ,MAAM,CAACC,gBAAgB;MAC5BlB,GAAG,EAAE,EAAE;MACPkK,eAAe,EAAE,KAAK;MACtB5F,MAAM,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;MAC1BzF,OAAO,EAAE,MAAM;MACf5B,SAAS,EAAE,QAAQ;MACnB+D,WAAW,EAAE,GAAG;MAChB,GAAG7D,GAAG;MACNS,MAAM,EAAE,EAAE;MACVuM,aAAa,EAAE,IAAI;MACnB7E,aAAa,EAAE,KAAK;MACpBrF,OAAO,EAAE;IACX,CAAC;IACDmK,QAAQ,EAAE;MACRvK,KAAK,EAAG0H,IAAI,IAAKA,IAAI,CAAC3J,MAAM,CAAC2E;IAC/B,CAAC;IACDoE,UAAU,EAAE,CAAC,yBAAyB,EAAE,kBAAkB,CAAC;IAC3D0D,KAAK,EAAE;MACLzM,MAAM,EAAE,CAAC,kBAAkB,EAAE,sBAAsB;IACrD,CAAC;IACD0M,IAAI,EAAE,CAAC,cAAc,EAAE,wBAAwB,EAAE,oBAAoB,CAAC;IACtEjE,EAAE,EAAE;MACFkE,WAAW,EAAE;QACX/D,OAAO,EAAE,CAAC,YAAY;MACxB,CAAC;MACDgE,SAAS,EAAE;QACThE,OAAO,EAAE,CAAC,aAAa;MACzB,CAAC;MACDiE,YAAY,EAAE;QACZjE,OAAO,EAAE,CAAC,aAAa;MACzB,CAAC;MACDkE,UAAU,EAAE;QACVlE,OAAO,EAAE,CAAC,cAAc;MAC1B,CAAC;MACDmE,SAAS,EAAE;QACTpE,KAAK,EAAE,eAAe;QACtBC,OAAO,EAAE,CAAC,aAAa,EAAE,gBAAgB;MAC3C,CAAC;MACDoE,YAAY,EAAE;QACZpE,OAAO,EAAE,CAAC,aAAa;MACzB,CAAC;MACDqE,aAAa,EAAE;QACbrE,OAAO,EAAE,CAAC,cAAc;MAC1B,CAAC;MACDsE,WAAW,EAAE;QACXtE,OAAO,EAAE,CAAC,eAAe;MAC3B,CAAC;MACDuE,YAAY,EAAE;QACZvE,OAAO,EAAE,CAAC,aAAa,EAAE,gBAAgB,EAAE,iBAAiB;MAC9D,CAAC;MACDwE,UAAU,EAAE;QACVxE,OAAO,EAAE,CAAC,cAAc;MAC1B,CAAC;MACDyE,aAAa,EAAE;QACbzE,OAAO,EAAE,CAAC,aAAa,EAAE,iBAAiB;MAC5C,CAAC;MACD,YAAY,EAAE;QACZA,OAAO,EAAE,CAAC,eAAe;MAC3B,CAAC;MACD,aAAa,EAAE,CACb;QACED,KAAK,EAAE,eAAe;QACtBpB,MAAM,EAAE,SAAS;QACjBqB,OAAO,EAAE,CAAC,cAAc,EAAE,sBAAsB;MAClD,CAAC,EACD;QACEA,OAAO,EAAE,CAAC,cAAc,EAAE,sBAAsB;MAClD,CAAC;IAEL,CAAC;IACDI,MAAM,EAAE;MACNsE,KAAK,EAAE;QACLxE,KAAK,EAAE,CAAC,cAAc,CAAC;QACvBL,EAAE,EAAE;UACF,sBAAsB,EAAE,CACtB;YACEE,KAAK,EAAE,eAAe;YACtBpB,MAAM,EAAE,SAAS;YACjBqB,OAAO,EAAE,CAAC,cAAc;UAC1B,CAAC,EACD;YACEA,OAAO,EAAE,CAAC,cAAc;UAC1B,CAAC,CACF;UACD,gBAAgB,EAAE;YAChBrB,MAAM,EAAE;UACV,CAAC;UACD,cAAc,EAAE;YACdqB,OAAO,EAAE,CAAC,kBAAkB,EAAE,aAAa;UAC7C,CAAC;UACD,sBAAsB,EAAE;YACtBA,OAAO,EAAE,CAAC,aAAa;UACzB;QACF;MACF,CAAC;MACD1F,OAAO,EAAE;QACP4F,KAAK,EAAE,CAAC,gBAAgB,CAAC;QACzBL,EAAE,EAAE;UACF,cAAc,EAAE;YACdlB,MAAM,EAAE;UACV,CAAC;UACD,sBAAsB,EAAE;YACtBA,MAAM,EAAE,OAAO;YACfqB,OAAO,EAAE,CAAC,aAAa;UACzB,CAAC;UACD,cAAc,EAAE;YACdrB,MAAM,EAAE,OAAO;YACfqB,OAAO,EAAE,CAAC,kBAAkB,EAAE,aAAa;UAC7C;QACF;MACF;IACF;EACF,CAAC,EACD;IACE5K,MAAM,EAAE;MACNuP,aAAa,EAAG5D,IAAI,IAAKA,IAAI,CAAC3J,MAAM,CAAC2E,MAAM,GAAGgF,IAAI,CAAC0C,GAAG;MACtDmB,aAAa,EAAG7D,IAAI,IAAK,CAAC,CAACA,IAAI,CAACzG;IAClC,CAAC;IACD6F,UAAU,EAAE;MACV0E,gBAAgBA,CAAC9D,IAAI,EAAEC,IAAI,EAAE;QAAEvF;MAAK,CAAC,EAAE;QACrC,MAAMqJ,aAAa,GAAIpG,KAAK,IAAK;UAC/B,MAAMqG,eAAe,GAAGhE,IAAI,CAACjD,MAAM,CAACkH,KAAK,CAAEC,GAAG,IAAKvG,KAAK,CAACuG,GAAG,CAAC,IAAIvG,KAAK,CAACwG,IAAI,KAAKD,GAAG,CAAC;UACpF,IAAI,CAACF,eAAe,EAAE;UACtBtJ,IAAI,CAAC;YAAEvD,IAAI,EAAE;UAAa,CAAC,CAAC;QAC9B,CAAC;QACD,OAAOtC,WAAW,CAACuP,QAAQ,EAAE,SAAS,EAAEL,aAAa,EAAE;UAAEM,OAAO,EAAE;QAAK,CAAC,CAAC;MAC3E,CAAC;MACDC,uBAAuBA,CAACtE,IAAI,EAAEC,IAAI,EAAE;QAAEvF;MAAK,CAAC,EAAE;QAC5C,IAAI,CAACsF,IAAI,CAAC2C,eAAe,EAAE;QAC3B,MAAM4B,GAAG,GAAG/O,GAAG,CAACgP,MAAM,CAACxE,IAAI,CAAC;QAC5B,OAAOnL,WAAW,CAAC0P,GAAG,EAAE,kBAAkB,EAAE,MAAM;UAChD7J,IAAI,CAAC6J,GAAG,CAACE,eAAe,KAAK,QAAQ,GAAG,WAAW,GAAG,YAAY,CAAC;QACrE,CAAC,CAAC;MACJ;IACF,CAAC;IACDxF,OAAO,EAAE;MACPyF,oBAAoBA,CAAC1E,IAAI,EAAE;QACzB,MAAM2E,aAAa,GAAGvO,oBAAoB,CAAC4J,IAAI,CAAC3J,MAAM,EAAE2J,IAAI,CAACtK,SAAS,CAAC;QACvE,MAAMkP,SAAS,GAAGD,aAAa,CAAC3J,MAAM,GAAG,CAAC;QAC1C,IAAI,CAAC4J,SAAS,EAAE;UACd5E,IAAI,CAAC6E,QAAQ,GAAG,CAAC;UACjB;QACF;QACA,IAAID,SAAS,IAAI5E,IAAI,CAAC6E,QAAQ,EAAE;UAC9B;QACF;QACA,MAAMC,OAAO,GAAGA,CAAA,KAAMtP,GAAG,CAACG,WAAW,CAACqK,IAAI,EAAEA,IAAI,CAACtK,SAAS,CAAC;QAC3DsK,IAAI,CAAC6E,QAAQ,GAAGzP,sBAAsB,CAAC0P,OAAO,EAAE;UAAEC,KAAK,EAAE;QAAK,CAAC,CAAC;MAClE,CAAC;MACDC,sBAAsBA,CAAChF,IAAI,EAAE;QAC3BA,IAAI,CAAC6E,QAAQ,GAAG,CAAC;MACnB,CAAC;MACDI,aAAaA,CAACjF,IAAI,EAAE;QAClBkF,cAAc,CAAC,MAAM;UACnB1P,GAAG,CAACG,WAAW,CAACqK,IAAI,EAAEA,IAAI,CAACtK,SAAS,CAAC,EAAEyP,KAAK,CAAC,CAAC;QAChD,CAAC,CAAC;MACJ,CAAC;MACDC,YAAYA,CAACpF,IAAI,EAAE;QACjBqF,IAAI,CAACrF,IAAI,EAAGzJ,KAAK,IAAK;UACpBA,KAAK,CAACC,KAAK,CAACC,OAAO,CAAC+C,OAAO,GAAG,IAAI;QACpC,CAAC,CAAC;MACJ,CAAC;MACD8L,cAAcA,CAACtF,IAAI,EAAE;QACnBqF,IAAI,CAACrF,IAAI,EAAGzJ,KAAK,IAAK;UACpBA,KAAK,CAACC,KAAK,CAACC,OAAO,CAAC+C,OAAO,GAAG,KAAK;QACrC,CAAC,CAAC;MACJ,CAAC;MACD+L,gBAAgBA,CAACvF,IAAI,EAAEC,IAAI,EAAE;QAAEvF;MAAK,CAAC,EAAE;QACrC,IAAI,CAACsF,IAAI,CAACzG,OAAO,IAAIyG,IAAI,CAAC3J,MAAM,CAAC2E,MAAM,GAAG,CAAC,EAAE;QAC7CN,IAAI,CAAC,gBAAgB,CAAC;MACxB,CAAC;MACD8K,UAAUA,CAACnL,IAAI,EAAEiH,GAAG,EAAE;QAAEpB;MAAK,CAAC,EAAE;QAC9BA,IAAI,CAACuF,SAAS,CAAC,OAAO,EAAEnE,GAAG,CAACvL,EAAE,CAAC;MACjC,CAAC;MACD2P,WAAWA,CAAC1F,IAAI,EAAE;QAChBA,IAAI,CAAC3J,MAAM,CAAC4F,OAAO,CAAE1F,KAAK,IAAKA,KAAK,CAACmE,IAAI,CAAC,OAAO,CAAC,CAAC;MACrD,CAAC;MACDiL,WAAWA,CAACtL,IAAI,EAAEiH,GAAG,EAAE;QAAEpB;MAAK,CAAC,EAAE;QAC/BA,IAAI,CAACuF,SAAS,CAAC,QAAQ,EAAEnE,GAAG,CAACvL,EAAE,CAAC;MAClC,CAAC;MACD6P,YAAYA,CAAC5F,IAAI,EAAE;QACjBA,IAAI,CAAC3J,MAAM,CAAC4F,OAAO,CAAE1F,KAAK,IAAKA,KAAK,CAACmE,IAAI,CAAC,QAAQ,CAAC,CAAC;MACtD,CAAC;MACDmL,aAAaA,CAAC7F,IAAI,EAAE;QAClBA,IAAI,CAAC3J,MAAM,CAAC4F,OAAO,CAAE1F,KAAK,IAAKA,KAAK,CAACmE,IAAI,CAAC,SAAS,CAAC,CAAC;MACvD,CAAC;MACDoL,WAAWA,CAAC9F,IAAI,EAAEsB,GAAG,EAAE;QAAEpB,IAAI;QAAEtF;MAAS,CAAC,EAAE;QACzC,MAAMO,OAAO,GAAG;UACdzF,SAAS,EAAEsK,IAAI,CAACtK,SAAS;UACzBwB,QAAQ,EAAE8I,IAAI,CAAC9I,QAAQ;UACvBuC,WAAW,EAAEuG,IAAI,CAACvG,WAAW;UAC7B,GAAG6H,GAAG,CAAC/K,KAAK;UACZsB,GAAG,EAAEmI,IAAI,CAACnI,GAAG;UACbkO,WAAW,EAAE/F,IAAI,CAAC+F,WAAW;UAC7BvM,OAAO,EAAEoB,QAAQ,CAAC,CAAC,CAACoL,OAAO,CAAC,OAAO;QACrC,CAAC;QACD,MAAMzP,KAAK,GAAG+H,kBAAkB,CAACnD,OAAO,CAAC;QACzC,MAAM8K,KAAK,GAAG/F,IAAI,CAACgG,KAAK,CAAC3P,KAAK,CAAC;QAC/ByJ,IAAI,CAAC3J,MAAM,GAAG,CAAC4P,KAAK,EAAE,GAAGjG,IAAI,CAAC3J,MAAM,CAAC;MACvC,CAAC;MACD8P,WAAWA,CAAC9L,IAAI,EAAEiH,GAAG,EAAE;QAAEpB;MAAK,CAAC,EAAE;QAC/BA,IAAI,CAACuF,SAAS,CAAC;UAAEtO,IAAI,EAAE,QAAQ;UAAEZ,KAAK,EAAE+K,GAAG,CAAC/K;QAAM,CAAC,EAAE+K,GAAG,CAACvL,EAAE,CAAC;MAC9D,CAAC;MACDqQ,YAAYA,CAAC/L,IAAI,EAAEiH,GAAG,EAAE;QAAEpB;MAAK,CAAC,EAAE;QAChCA,IAAI,CAACuF,SAAS,CAAC,SAAS,EAAEnE,GAAG,CAACvL,EAAE,CAAC;MACnC,CAAC;MACDsQ,aAAaA,CAACrG,IAAI,EAAE;QAClBA,IAAI,CAAC3J,MAAM,CAAC4F,OAAO,CAAE1F,KAAK,IAAKA,KAAK,CAACmE,IAAI,CAAC,SAAS,CAAC,CAAC;MACvD,CAAC;MACD4L,WAAWA,CAACtG,IAAI,EAAEsB,GAAG,EAAE;QAAEpB;MAAK,CAAC,EAAE;QAC/BA,IAAI,CAACqG,SAAS,CAACjF,GAAG,CAACvL,EAAE,CAAC;QACtBiK,IAAI,CAAC3J,MAAM,GAAG2J,IAAI,CAAC3J,MAAM,CAACC,MAAM,CAAEC,KAAK,IAAKA,KAAK,CAACR,EAAE,KAAKuL,GAAG,CAACvL,EAAE,CAAC;QAChEiK,IAAI,CAACtH,OAAO,GAAGsH,IAAI,CAACtH,OAAO,CAACpC,MAAM,CAAEqC,MAAM,IAAKA,MAAM,CAAC5C,EAAE,KAAKuL,GAAG,CAACvL,EAAE,CAAC;MACtE,CAAC;MACDyQ,YAAYA,CAACxG,IAAI,EAAEC,IAAI,EAAE;QAAEC;MAAK,CAAC,EAAE;QACjCF,IAAI,CAAC3J,MAAM,CAAC4F,OAAO,CAAE1F,KAAK,IAAK2J,IAAI,CAACqG,SAAS,CAAChQ,KAAK,CAACR,EAAE,CAAC,CAAC;QACxDiK,IAAI,CAAC3J,MAAM,GAAG,EAAE;QAChB2J,IAAI,CAACtH,OAAO,GAAG,EAAE;MACnB,CAAC;MACD+N,WAAWA,CAACzG,IAAI,EAAEsB,GAAG,EAAE;QACrB,MAAMoF,QAAQ,GAAG1G,IAAI,CAACtH,OAAO,CAACuC,IAAI,CAAEtC,MAAM,IAAKA,MAAM,CAAC5C,EAAE,KAAKuL,GAAG,CAACvL,EAAE,CAAC;QACpE,IAAI2Q,QAAQ,EAAE;UACZA,QAAQ,CAAC/N,MAAM,GAAG2I,GAAG,CAAC3I,MAAM;UAC5B+N,QAAQ,CAAChR,SAAS,GAAG4L,GAAG,CAAC5L,SAAS;QACpC,CAAC,MAAM;UACL,MAAM8K,SAAS,GAAG;YAAEzK,EAAE,EAAEuL,GAAG,CAACvL,EAAE;YAAE4C,MAAM,EAAE2I,GAAG,CAAC3I,MAAM;YAAEjD,SAAS,EAAE4L,GAAG,CAAC5L;UAAU,CAAC;UAC9EsK,IAAI,CAACtH,OAAO,GAAG,CAAC8H,SAAS,EAAE,GAAGR,IAAI,CAACtH,OAAO,CAAC;QAC7C;MACF,CAAC;MACDiO,cAAcA,CAAC3G,IAAI,EAAE;QACnBqF,IAAI,CAACrF,IAAI,EAAE,CAACzJ,KAAK,EAAEqD,KAAK,EAAEvD,MAAM,KAAK;UACnCE,KAAK,CAACC,KAAK,CAACC,OAAO,CAACmD,KAAK,GAAGA,KAAK;UACjCrD,KAAK,CAACC,KAAK,CAACC,OAAO,CAAC6C,SAAS,GAAGM,KAAK,KAAK,CAAC;UAC3CrD,KAAK,CAACC,KAAK,CAACC,OAAO,CAACmC,MAAM,GAAGvC,MAAM,CAAC2E,MAAM,GAAGpB,KAAK;QACpD,CAAC,CAAC;MACJ,CAAC;MACDgN,eAAeA,CAAC5G,IAAI,EAAEsB,GAAG,EAAE;QACzB,MAAM5L,SAAS,GAAG4L,GAAG,CAAC5L,SAAS,IAAIsK,IAAI,CAACtK,SAAS;QACjD2P,IAAI,CAAC;UAAE,GAAGrF,IAAI;UAAEtK;QAAU,CAAC,EAAGa,KAAK,IAAK;UACtC,MAAMsQ,WAAW,GAAGC,IAAI,CAACpE,GAAG,CAC1B1C,IAAI,CAACtH,OAAO,CAACqO,SAAS,CAAEpO,MAAM,IAAKA,MAAM,CAAC5C,EAAE,KAAKQ,KAAK,CAACR,EAAE,CAAC,EAC1D,CACF,CAAC;UACD,MAAMiR,kBAAkB,GAAGhH,IAAI,CAACtH,OAAO,CAACuO,MAAM,CAAC,CAACC,IAAI,EAAEC,IAAI,EAAEC,YAAY,KAAK;YAC3E,IAAIA,YAAY,IAAIP,WAAW,EAAE,OAAOK,IAAI;YAC5C,OAAOA,IAAI,GAAGC,IAAI,CAACxO,MAAM;UAC3B,CAAC,EAAE,CAAC,CAAC;UACLpC,KAAK,CAACC,KAAK,CAACC,OAAO,CAACY,MAAM,GAAGwP,WAAW,GAAG7G,IAAI,CAACvH,GAAG,GAAGuO,kBAAkB;QAC1E,CAAC,CAAC;MACJ,CAAC;MACDK,gBAAgBA,CAACrH,IAAI,EAAEsB,GAAG,EAAE;QAC1B,IAAItB,IAAI,CAACjC,aAAa,IAAI,CAACuD,GAAG,CAAC1D,MAAM,EAAE;QACvCoC,IAAI,CAACjC,aAAa,GAAG,IAAI;QACzBiC,IAAI,CAAC4C,aAAa,GAAGtO,GAAG,CAACgN,GAAG,CAAC1D,MAAM,CAAC;MACtC,CAAC;MACD0J,oBAAoBA,CAACtH,IAAI,EAAE;QACzBA,IAAI,CAACjC,aAAa,GAAG,KAAK;QAC1B,IAAI,CAACiC,IAAI,CAAC4C,aAAa,EAAE;QACzB5C,IAAI,CAAC4C,aAAa,CAACuC,KAAK,CAAC;UAAEoC,aAAa,EAAE;QAAK,CAAC,CAAC;QACjDvH,IAAI,CAAC4C,aAAa,GAAG,IAAI;MAC3B,CAAC;MACD4E,kBAAkBA,CAACxH,IAAI,EAAE;QACvB,IAAI,CAACA,IAAI,CAAC4C,aAAa,EAAE;QACzB5C,IAAI,CAAC4C,aAAa,CAACuC,KAAK,CAAC;UAAEoC,aAAa,EAAE;QAAK,CAAC,CAAC;QACjDvH,IAAI,CAAC4C,aAAa,GAAG,IAAI;QACzB5C,IAAI,CAACjC,aAAa,GAAG,KAAK;MAC5B;IACF;EACF,CACF,CAAC;AACH;AACA,SAASsH,IAAIA,CAACzP,GAAG,EAAEqI,EAAE,EAAE;EACrB,MAAM0G,aAAa,GAAGvO,oBAAoB,CAACR,GAAG,CAACS,MAAM,EAAET,GAAG,CAACF,SAAS,CAAC;EACrEiP,aAAa,CAAC1I,OAAO,CAACgC,EAAE,CAAC;AAC3B;AACA,SAASwJ,OAAOA,CAACjR,KAAK,EAAEkE,IAAI,EAAEC,SAAS,EAAE;EACvC,MAAMzB,OAAO,GAAG1C,KAAK,CAACkR,MAAM,CAAC,SAAS,CAAC;EACvC,MAAMC,MAAM,GAAGnR,KAAK,CAACkR,MAAM,CAAC,QAAQ,CAAC;EACrC,MAAMhS,SAAS,GAAGc,KAAK,CAACC,OAAO,CAACf,SAAS;EACzC,MAAMyB,IAAI,GAAGX,KAAK,CAACC,OAAO,CAACU,IAAI;EAC/B,MAAM,CAACgC,IAAI,EAAE8D,KAAK,GAAG,QAAQ,CAAC,GAAGvH,SAAS,CAAC0D,KAAK,CAAC,GAAG,CAAC;EACrD,OAAO;IACLjC,IAAI;IACJyQ,KAAK,EAAEpR,KAAK,CAACC,OAAO,CAACmR,KAAK;IAC1BC,WAAW,EAAErR,KAAK,CAACC,OAAO,CAACoR,WAAW;IACtCnS,SAAS;IACTwD,OAAO;IACPyO,MAAM;IACNjL,KAAKA,CAAA,EAAG;MACNhC,IAAI,CAAC,OAAO,CAAC;IACf,CAAC;IACDiC,MAAMA,CAAA,EAAG;MACPjC,IAAI,CAAC,QAAQ,CAAC;IAChB,CAAC;IACDa,OAAOA,CAAA,EAAG;MACRb,IAAI,CAAC,SAAS,CAAC;IACjB,CAAC;IACDoN,YAAYA,CAAA,EAAG;MACb,OAAOnN,SAAS,CAACuC,OAAO,CAAC;QACvB,GAAG5H,KAAK,CAACyS,IAAI,CAAC3K,KAAK;QACnBvF,GAAG,EAAErB,KAAK,CAACC,OAAO,CAACoB,GAAG;QACtB9B,EAAE,EAAEP,GAAG,CAACM,SAAS,CAACU,KAAK,CAACC,OAAO,CAAC;QAChC,YAAY,EAAEyC,OAAO,GAAG,MAAM,GAAG,QAAQ;QACzC,WAAW,EAAE/B,IAAI;QACjB,gBAAgB,EAAEzB,SAAS;QAC3B,YAAY,EAAEuH,KAAK;QACnB,WAAW,EAAE9D,IAAI;QACjB,cAAc,EAAExE,QAAQ,CAAC6B,KAAK,CAACC,OAAO,CAACuD,OAAO,CAAC;QAC/C,aAAa,EAAErF,QAAQ,CAACgT,MAAM,CAAC;QAC/B,YAAY,EAAEhT,QAAQ,CAAC6B,KAAK,CAACC,OAAO,CAAC6C,SAAS,CAAC;QAC/C,cAAc,EAAE3E,QAAQ,CAAC,CAAC6B,KAAK,CAACC,OAAO,CAAC6C,SAAS,CAAC;QAClD,YAAY,EAAE3E,QAAQ,CAAC6B,KAAK,CAACC,OAAO,CAAC+C,OAAO,CAAC;QAC7C,cAAc,EAAE7E,QAAQ,CAAC,CAAC6B,KAAK,CAACC,OAAO,CAAC+C,OAAO,CAAC;QAChD8D,IAAI,EAAE,QAAQ;QACd,aAAa,EAAE,MAAM;QACrB,kBAAkB,EAAE9G,KAAK,CAACC,OAAO,CAACoR,WAAW,GAAGrS,GAAG,CAACU,gBAAgB,CAACM,KAAK,CAACC,OAAO,CAAC,GAAG,KAAK,CAAC;QAC5F,iBAAiB,EAAED,KAAK,CAACC,OAAO,CAACmR,KAAK,GAAGpS,GAAG,CAACS,UAAU,CAACO,KAAK,CAACC,OAAO,CAAC,GAAG,KAAK,CAAC;QAC/E4G,QAAQ,EAAE,CAAC;QACXE,KAAK,EAAEtE,iBAAiB,CAACzC,KAAK,CAACC,OAAO,EAAEyC,OAAO,CAAC;QAChD8O,SAASA,CAACrK,KAAK,EAAE;UACf,IAAIA,KAAK,CAACsK,gBAAgB,EAAE;UAC5B,IAAItK,KAAK,CAACuG,GAAG,IAAI,QAAQ,EAAE;YACzBxJ,IAAI,CAAC,SAAS,CAAC;YACfiD,KAAK,CAACuK,cAAc,CAAC,CAAC;UACxB;QACF;MACF,CAAC,CAAC;IACJ,CAAC;IACD;IACAC,mBAAmBA,CAAA,EAAG;MACpB,OAAOxN,SAAS,CAACuC,OAAO,CAAC;QACvB,YAAY,EAAE,QAAQ;QACtBK,KAAK,EAAEtD,mBAAmB,CAACzD,KAAK,CAACC,OAAO,EAAEyC,OAAO;MACnD,CAAC,CAAC;IACJ,CAAC;IACD;IACAkP,kBAAkBA,CAAA,EAAG;MACnB,OAAOzN,SAAS,CAACuC,OAAO,CAAC;QACvB,YAAY,EAAE,OAAO;QACrBK,KAAK,EAAEnD,kBAAkB,CAAC;MAC5B,CAAC,CAAC;IACJ,CAAC;IACDiO,aAAaA,CAAA,EAAG;MACd,OAAO1N,SAAS,CAACuC,OAAO,CAAC;QACvB,GAAG5H,KAAK,CAACsS,KAAK,CAACxK,KAAK;QACpBrH,EAAE,EAAEP,GAAG,CAACS,UAAU,CAACO,KAAK,CAACC,OAAO;MAClC,CAAC,CAAC;IACJ,CAAC;IACD6R,mBAAmBA,CAAA,EAAG;MACpB,OAAO3N,SAAS,CAACuC,OAAO,CAAC;QACvB,GAAG5H,KAAK,CAACuS,WAAW,CAACzK,KAAK;QAC1BrH,EAAE,EAAEP,GAAG,CAACU,gBAAgB,CAACM,KAAK,CAACC,OAAO;MACxC,CAAC,CAAC;IACJ,CAAC;IACD8R,qBAAqBA,CAAA,EAAG;MACtB,OAAO5N,SAAS,CAAC6N,MAAM,CAAC;QACtB,GAAGlT,KAAK,CAACmT,aAAa,CAACrL,KAAK;QAC5BjG,IAAI,EAAE,QAAQ;QACduR,OAAOA,CAAC/K,KAAK,EAAE;UACb,IAAIA,KAAK,CAACsK,gBAAgB,EAAE;UAC5BzR,KAAK,CAACC,OAAO,CAACkS,MAAM,EAAED,OAAO,GAAG,CAAC;UACjChO,IAAI,CAAC,SAAS,CAAC;QACjB;MACF,CAAC,CAAC;IACJ,CAAC;IACDkO,oBAAoBA,CAAA,EAAG;MACrB,OAAOjO,SAAS,CAAC6N,MAAM,CAAC;QACtBzS,EAAE,EAAEP,GAAG,CAACW,iBAAiB,CAACK,KAAK,CAACC,OAAO,CAAC;QACxC,GAAGnB,KAAK,CAACuT,YAAY,CAACzL,KAAK;QAC3BjG,IAAI,EAAE,QAAQ;QACd,YAAY,EAAE,sBAAsB;QACpCuR,OAAOA,CAAC/K,KAAK,EAAE;UACb,IAAIA,KAAK,CAACsK,gBAAgB,EAAE;UAC5BvN,IAAI,CAAC,SAAS,CAAC;QACjB;MACF,CAAC,CAAC;IACJ;EACF,CAAC;AACH;;AAEA;AACA,IAAIyC,KAAK,GAAG;EACVsK,OAAO,EAAEjN,YAAY;EACrBsO,OAAO,EAAEtG;AACX,CAAC;AAED,SAASnN,OAAO,EAAEoS,OAAO,EAAEnJ,kBAAkB,IAAInK,aAAa,EAAEgJ,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}